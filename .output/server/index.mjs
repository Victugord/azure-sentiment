globalThis._importMeta_={url:"file:///_entry.js",env:{}},"global"in globalThis||(globalThis.global=globalThis);const e=globalThis.AsyncLocalStorage||class{__unenv__=!0;_currentStore;_enterStore;_enabled=!0;getStore(){return this._currentStore??this._enterStore}disable(){this._enabled=!1}enable(){this._enabled=!0}enterWith(e){this._enterStore=e}run(e,t,...r){this._currentStore=e;const s=t(...r);return this._currentStore=void 0,s}exit(e,...t){const r=this._currentStore;this._currentStore=void 0;const s=e(...t);return this._currentStore=r,s}static snapshot(){throw new Error("[unenv] `AsyncLocalStorage.snapshot` is not implemented!")}};Object.assign(Object.create(null),{NONE:0,DIRHANDLE:1,DNSCHANNEL:2,ELDHISTOGRAM:3,FILEHANDLE:4,FILEHANDLECLOSEREQ:5,BLOBREADER:6,FSEVENTWRAP:7,FSREQCALLBACK:8,FSREQPROMISE:9,GETADDRINFOREQWRAP:10,GETNAMEINFOREQWRAP:11,HEAPSNAPSHOT:12,HTTP2SESSION:13,HTTP2STREAM:14,HTTP2PING:15,HTTP2SETTINGS:16,HTTPINCOMINGMESSAGE:17,HTTPCLIENTREQUEST:18,JSSTREAM:19,JSUDPWRAP:20,MESSAGEPORT:21,PIPECONNECTWRAP:22,PIPESERVERWRAP:23,PIPEWRAP:24,PROCESSWRAP:25,PROMISE:26,QUERYWRAP:27,QUIC_ENDPOINT:28,QUIC_LOGSTREAM:29,QUIC_PACKET:30,QUIC_SESSION:31,QUIC_STREAM:32,QUIC_UDP:33,SHUTDOWNWRAP:34,SIGNALWRAP:35,STATWATCHER:36,STREAMPIPE:37,TCPCONNECTWRAP:38,TCPSERVERWRAP:39,TCPWRAP:40,TTYWRAP:41,UDPSENDWRAP:42,UDPWRAP:43,SIGINTWATCHDOG:44,WORKER:45,WORKERHEAPSNAPSHOT:46,WRITEWRAP:47,ZLIB:48,CHECKPRIMEREQUEST:49,PBKDF2REQUEST:50,KEYPAIRGENREQUEST:51,KEYGENREQUEST:52,KEYEXPORTREQUEST:53,CIPHERREQUEST:54,DERIVEBITSREQUEST:55,HASHREQUEST:56,RANDOMBYTESREQUEST:57,RANDOMPRIMEREQUEST:58,SCRYPTREQUEST:59,SIGNREQUEST:60,TLSWRAP:61,VERIFYREQUEST:62});let t=100;const r=globalThis.AsyncResource||class{__unenv__=!0;type;_asyncId;_triggerAsyncId;constructor(e,r=0){this.type=e,this._asyncId=-1*t++,this._triggerAsyncId="number"==typeof r?r:r?.triggerAsyncId}static bind(e,t,s){return new r(t??"anonymous").bind(e)}bind(e,t){const binded=(...r)=>this.runInAsyncScope(e,t,...r);return binded.asyncResource=this,binded}runInAsyncScope(e,t,...r){return e.apply(t,r)}emitDestroy(){return this}asyncId(){return this._asyncId}triggerAsyncId(){return this._triggerAsyncId}};let s=10;const a=Object.getPrototypeOf(Object.getPrototypeOf((async function*(){})).prototype),inspect=(e,t)=>e,c=Error,u=Error,p=Error,d=Error,h=Error,m=Symbol.for("nodejs.rejection"),g=Symbol.for("kCapture"),v=Symbol.for("events.errorMonitor"),S=Symbol.for("shapeMode"),w=Symbol.for("events.maxEventTargetListeners"),E=Symbol.for("kEnhanceStackBeforeInspector"),_=Symbol.for("nodejs.watermarkData"),R=Symbol.for("kEventEmitter"),P=Symbol.for("kAsyncResource"),O=Symbol.for("kFirstEventParam"),I=Symbol.for("kResistStopPropagation"),N=Symbol.for("events.maxEventTargetListenersWarned");class _EventEmitter{_events=void 0;_eventsCount=0;_maxListeners=s;[g]=!1;[S]=!1;static captureRejectionSymbol=m;static errorMonitor=v;static kMaxEventTargetListeners=w;static kMaxEventTargetListenersWarned=N;static usingDomains=!1;static get on(){return on$1}static get once(){return once$1}static get getEventListeners(){return getEventListeners}static get getMaxListeners(){return getMaxListeners$1}static get addAbortListener(){return addAbortListener}static get EventEmitterAsyncResource(){return EventEmitterAsyncResource}static get EventEmitter(){return _EventEmitter}static setMaxListeners(e=s,...t){if(0===t.length)s=e;else for(const r of t)if(isEventTarget(r))r[w]=e,r[N]=!1;else{if("function"!=typeof r.setMaxListeners)throw new p("eventTargets",["EventEmitter","EventTarget"],r);r.setMaxListeners(e)}}static listenerCount(e,t){if("function"==typeof e.listenerCount)return e.listenerCount(t);_EventEmitter.prototype.listenerCount.call(e,t)}static init(){throw new Error("EventEmitter.init() is not implemented.")}static get captureRejections(){return this[g]}static set captureRejections(e){this[g]=e}static get defaultMaxListeners(){return s}static set defaultMaxListeners(e){s=e}constructor(e){void 0===this._events||this._events===Object.getPrototypeOf(this)._events?(this._events={__proto__:null},this._eventsCount=0,this[S]=!1):this[S]=!0,this._maxListeners=this._maxListeners||void 0,this[g]=e?.captureRejections?Boolean(e.captureRejections):_EventEmitter.prototype[g]}setMaxListeners(e){return this._maxListeners=e,this}getMaxListeners(){return _getMaxListeners(this)}emit(e,...t){let r="error"===e;const s=this._events;if(void 0!==s)r&&void 0!==s[v]&&this.emit(v,...t),r=r&&void 0===s.error;else if(!r)return!1;if(r){let e,r;if(t.length>0&&(e=t[0]),e instanceof Error){try{const t={};Error.captureStackTrace?.(t,_EventEmitter.prototype.emit),Object.defineProperty(e,E,{__proto__:null,value:Function.prototype.bind(enhanceStackTrace,this,e,t),configurable:!0})}catch{}throw e}try{r=inspect(e)}catch{r=e}const s=new u(r);throw s.context=e,s}const a=s[e];if(void 0===a)return!1;if("function"==typeof a){const r=a.apply(this,t);null!=r&&addCatch(this,r,e,t)}else{const r=a.length,s=arrayClone(a);for(let a=0;a<r;++a){const r=s[a].apply(this,t);null!=r&&addCatch(this,r,e,t)}}return!0}addListener(e,t){return _addListener(this,e,t,!1),this}on(e,t){return this.addListener(e,t)}prependListener(e,t){return _addListener(this,e,t,!0),this}once(e,t){return this.on(e,_onceWrap(this,e,t)),this}prependOnceListener(e,t){return this.prependListener(e,_onceWrap(this,e,t)),this}removeListener(e,t){const r=this._events;if(void 0===r)return this;const s=r[e];if(void 0===s)return this;if(s===t||s.listener===t)this._eventsCount-=1,this[S]?r[e]=void 0:0===this._eventsCount?this._events={__proto__:null}:(delete r[e],r.removeListener&&this.emit("removeListener",e,s.listener||t));else if("function"!=typeof s){let a=-1;for(let e=s.length-1;e>=0;e--)if(s[e]===t||s[e].listener===t){a=e;break}if(a<0)return this;0===a?s.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(s,a),1===s.length&&(r[e]=s[0]),void 0!==r.removeListener&&this.emit("removeListener",e,t)}return this}off(e,t){return this.removeListener(e,t)}removeAllListeners(e){const t=this._events;if(void 0===t)return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events={__proto__:null},this._eventsCount=0):void 0!==t[e]&&(0===--this._eventsCount?this._events={__proto__:null}:delete t[e]),this[S]=!1,this;if(0===arguments.length){for(const e of Reflect.ownKeys(t))"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={__proto__:null},this._eventsCount=0,this[S]=!1,this}const r=t[e];if("function"==typeof r)this.removeListener(e,r);else if(void 0!==r)for(let t=r.length-1;t>=0;t--)this.removeListener(e,r[t]);return this}listeners(e){return _listeners(this,e,!0)}rawListeners(e){return _listeners(this,e,!1)}eventNames(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}listenerCount(e,t){const r=this._events;if(void 0!==r){const s=r[e];if("function"==typeof s)return null!=t?t===s||t===s.listener?1:0:1;if(void 0!==s){if(null!=t){let e=0;for(let r=0,a=s.length;r<a;r++)s[r]!==t&&s[r].listener!==t||e++;return e}return s.length}}return 0}}class EventEmitterAsyncResource extends _EventEmitter{constructor(e){let t;"string"==typeof e?(t=e,e=void 0):t=e?.name||new.target.name,super(e),this[P]=new EventEmitterReferencingAsyncResource(this,t,e)}emit(e,...t){if(void 0===this[P])throw new c("EventEmitterAsyncResource");const{asyncResource:r}=this;return Array.prototype.unshift(t,super.emit,this,e),Reflect.apply(r.runInAsyncScope,r,t)}emitDestroy(){if(void 0===this[P])throw new c("EventEmitterAsyncResource");this.asyncResource.emitDestroy()}get asyncId(){if(void 0===this[P])throw new c("EventEmitterAsyncResource");return this.asyncResource.asyncId()}get triggerAsyncId(){if(void 0===this[P])throw new c("EventEmitterAsyncResource");return this.asyncResource.triggerAsyncId()}get asyncResource(){if(void 0===this[P])throw new c("EventEmitterAsyncResource");return this[P]}}class EventEmitterReferencingAsyncResource extends r{constructor(e,t,r){super(t,r),this[R]=e}get eventEmitter(){if(void 0===this[R])throw new c("EventEmitterReferencingAsyncResource");return this[R]}}const on$1=function(e,t,r={}){const s=r.signal;if(s?.aborted)throw new d(void 0,{cause:s?.reason});const c=r.highWaterMark??r.highWatermark??Number.MAX_SAFE_INTEGER,u=r.lowWaterMark??r.lowWatermark??1,h=new FixedQueue,m=new FixedQueue;let g=!1,v=null,S=!1,w=0;const E=Object.setPrototypeOf({next(){if(w){const t=h.shift();return w--,g&&w<u&&(e.resume?.(),g=!1),Promise.resolve(createIterResult(t,!1))}if(v){const e=Promise.reject(v);return v=null,e}return S?closeHandler():new Promise((function(e,t){m.push({resolve:e,reject:t})}))},return:()=>closeHandler(),throw(e){if(!(e&&e instanceof Error))throw new p("EventEmitter.AsyncIterator","Error",e);errorHandler(e)},[Symbol.asyncIterator](){return this},[_]:{get size(){return w},get low(){return u},get high(){return c},get isPaused(){return g}}},a),{addEventListener:R,removeAll:P}=function(){const e=[];return{addEventListener(t,r,s,a){eventTargetAgnosticAddListener(t,r,s,a),Array.prototype.push(e,[t,r,s,a])},removeAll(){for(;e.length>0;)Reflect.apply(eventTargetAgnosticRemoveListener,void 0,e.pop())}}}();R(e,t,r[O]?eventHandler:function(...e){return eventHandler(e)}),"error"!==t&&"function"==typeof e.on&&R(e,"error",errorHandler);const I=r?.close;if(I?.length)for(const t of I)R(e,t,closeHandler);const N=s?addAbortListener(s,(function(){errorHandler(new d(void 0,{cause:s?.reason}))})):null;return E;function eventHandler(t){m.isEmpty()?(w++,!g&&w>c&&(g=!0,e.pause?.()),h.push(t)):m.shift().resolve(createIterResult(t,!1))}function errorHandler(e){m.isEmpty()?v=e:m.shift().reject(e),closeHandler()}function closeHandler(){N?.[Symbol.dispose](),P(),S=!0;const e=createIterResult(void 0,!0);for(;!m.isEmpty();)m.shift().resolve(e);return Promise.resolve(e)}},once$1=async function(e,t,r={}){const s=r?.signal;if(s?.aborted)throw new d(void 0,{cause:s?.reason});return new Promise(((r,a)=>{const errorListener=r=>{"function"==typeof e.removeListener&&e.removeListener(t,resolver),null!=s&&eventTargetAgnosticRemoveListener(s,"abort",abortListener),a(r)},resolver=(...t)=>{"function"==typeof e.removeListener&&e.removeListener("error",errorListener),null!=s&&eventTargetAgnosticRemoveListener(s,"abort",abortListener),r(t)};function abortListener(){eventTargetAgnosticRemoveListener(e,t,resolver),eventTargetAgnosticRemoveListener(e,"error",errorListener),a(new d(void 0,{cause:s?.reason}))}eventTargetAgnosticAddListener(e,t,resolver,{__proto__:null,once:!0,[I]:!0}),"error"!==t&&"function"==typeof e.once&&e.once("error",errorListener),null!=s&&eventTargetAgnosticAddListener(s,"abort",abortListener,{__proto__:null,once:!0,[I]:!0})}))},addAbortListener=function(e,t){if(void 0===e)throw new p("signal","AbortSignal",e);let r;return e.aborted?queueMicrotask((()=>t())):(e.addEventListener("abort",t,{__proto__:null,once:!0,[I]:!0}),r=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[Symbol.dispose](){r?.()}}},getEventListeners=function(e,t){if("function"==typeof e.listeners)return e.listeners(t);if(isEventTarget(e)){const r=e[kEvents].get(t),s=[];let a=r?.next;for(;void 0!==a?.listener;){const e=a.listener?.deref?a.listener.deref():a.listener;s.push(e),a=a.next}return s}throw new p("emitter",["EventEmitter","EventTarget"],e)},getMaxListeners$1=function(e){if("function"==typeof e?.getMaxListeners)return _getMaxListeners(e);if(e?.[w])return e[w];throw new p("emitter",["EventEmitter","EventTarget"],e)},C=2047;class FixedCircularBuffer{bottom;top;list;next;constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&C)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&C}shift(){const e=this.list[this.bottom];return void 0===e?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&C,e)}}class FixedQueue{head;tail;constructor(){this.head=this.tail=new FixedCircularBuffer}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new FixedCircularBuffer),this.head.push(e)}shift(){const e=this.tail,t=e.shift();return e.isEmpty()&&null!==e.next&&(this.tail=e.next,e.next=null),t}}function isEventTarget(e){return"function"==typeof e?.addEventListener}function addCatch(e,t,r,s){if(e[g])try{const a=t.then;"function"==typeof a&&a.call(t,void 0,(function(t){setTimeout(emitUnhandledRejectionOrErr,0,e,t,r,s)}))}catch(t){e.emit("error",t)}}function emitUnhandledRejectionOrErr(e,t,r,s){if("function"==typeof e[m])e[m](t,r,...s);else{const r=e[g];try{e[g]=!1,e.emit("error",t)}finally{e[g]=r}}}function _getMaxListeners(e){return void 0===e._maxListeners?s:e._maxListeners}function enhanceStackTrace(e,t){let r="";try{const{name:e}=this.constructor;"EventEmitter"!==e&&(r=` on ${e} instance`)}catch{}const s=`\nEmitted 'error' event${r} at:\n`,a=(t.stack||"").split("\n").slice(1);return e.stack+s+a.join("\n")}function _addListener(e,t,r,s){let a,c,u;if(c=e._events,void 0===c?(c=e._events={__proto__:null},e._eventsCount=0):(void 0!==c.newListener&&(e.emit("newListener",t,r.listener??r),c=e._events),u=c[t]),void 0===u)c[t]=r,++e._eventsCount;else if("function"==typeof u?u=c[t]=s?[r,u]:[u,r]:s?u.unshift(r):u.push(r),a=_getMaxListeners(e),a>0&&u.length>a&&!u.warned){u.warned=!0;const r=new h(`Possible EventEmitter memory leak detected. ${u.length} ${String(t)} listeners added to ${inspect(e)}. MaxListeners is ${a}. Use emitter.setMaxListeners() to increase limit`,{name:"MaxListenersExceededWarning",emitter:e,type:t,count:u.length});console.warn(r)}return e}function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(e,t,r){const s={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=onceWrapper.bind(s);return a.listener=r,s.wrapFn=a,a}function _listeners(e,t,r){const s=e._events;if(void 0===s)return[];const a=s[t];return void 0===a?[]:"function"==typeof a?r?[a.listener||a]:[a]:r?function(e){const t=arrayClone(e);for(let e=0;e<t.length;++e){const r=t[e].listener;"function"==typeof r&&(t[e]=r)}return t}(a):arrayClone(a)}function arrayClone(e){switch(e.length){case 2:return[e[0],e[1]];case 3:return[e[0],e[1],e[2]];case 4:return[e[0],e[1],e[2],e[3]];case 5:return[e[0],e[1],e[2],e[3],e[4]];case 6:return[e[0],e[1],e[2],e[3],e[4],e[5]]}return Array.prototype.slice(e)}function createIterResult(e,t){return{value:e,done:t}}function eventTargetAgnosticRemoveListener(e,t,r,s){if("function"==typeof e.removeListener)e.removeListener(t,r);else{if("function"!=typeof e.removeEventListener)throw new p("emitter","EventEmitter",e);e.removeEventListener(t,r,s)}}function eventTargetAgnosticAddListener(e,t,r,s){if("function"==typeof e.on)s?.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new p("emitter","EventEmitter",e);e.addEventListener(t,r,s)}}function createNotImplementedError(e){return new Error(`[unenv] ${e} is not implemented yet!`)}function notImplemented(e){return Object.assign((()=>{throw createNotImplementedError(e)}),{__unenv__:!0})}function notImplementedAsync(e){const t=notImplemented(e);return t.__promisify__=()=>notImplemented(e+".__promisify__"),t.native=t,t}function notImplementedClass(e){return class{__unenv__=!0;constructor(){throw new Error(`[unenv] ${e} is not implemented yet!`)}}}let x=class{fd;columns=80;rows=24;isTTY=!1;constructor(e){this.fd=e}clearLine(e,t){return t&&t(),!1}clearScreenDown(e){return e&&e(),!1}cursorTo(e,t,r){return r&&"function"==typeof r&&r(),!1}moveCursor(e,t,r){return r&&r(),!1}getColorDepth(e){return 1}hasColors(e,t){return!1}getWindowSize(){return[this.columns,this.rows]}write(e,t,r){e instanceof Uint8Array&&(e=(new TextDecoder).decode(e));try{console.log(e)}catch{}return r&&"function"==typeof r&&r(),!1}},L=class{fd;isRaw=!1;isTTY=!1;constructor(e){this.fd=e}setRawMode(e){return this.isRaw=e,this}};const D="22.14.0";class Process extends _EventEmitter{env;hrtime;nextTick;constructor(e){super(),this.env=e.env,this.hrtime=e.hrtime,this.nextTick=e.nextTick;for(const e of[...Object.getOwnPropertyNames(Process.prototype),...Object.getOwnPropertyNames(_EventEmitter.prototype)]){const t=this[e];"function"==typeof t&&(this[e]=t.bind(this))}}emitWarning(e,t,r){console.warn(`${r?`[${r}] `:""}${t?`${t}: `:""}${e}`)}emit(...e){return super.emit(...e)}listeners(e){return super.listeners(e)}#e;#t;#r;get stdin(){return this.#e??=new L(0)}get stdout(){return this.#t??=new x(1)}get stderr(){return this.#r??=new x(2)}#n="/";chdir(e){this.#n=e}cwd(){return this.#n}arch="";platform="";argv=[];argv0="";execArgv=[];execPath="";title="";pid=200;ppid=100;get version(){return`v${D}`}get versions(){return{node:D}}get allowedNodeEnvironmentFlags(){return new Set}get sourceMapsEnabled(){return!1}get debugPort(){return 0}get throwDeprecation(){return!1}get traceDeprecation(){return!1}get features(){return{}}get release(){return{}}get connected(){return!1}get config(){return{}}get moduleLoadList(){return[]}constrainedMemory(){return 0}availableMemory(){return 0}uptime(){return 0}resourceUsage(){return{}}ref(){}unref(){}umask(){throw createNotImplementedError("process.umask")}getBuiltinModule(){}getActiveResourcesInfo(){throw createNotImplementedError("process.getActiveResourcesInfo")}exit(){throw createNotImplementedError("process.exit")}reallyExit(){throw createNotImplementedError("process.reallyExit")}kill(){throw createNotImplementedError("process.kill")}abort(){throw createNotImplementedError("process.abort")}dlopen(){throw createNotImplementedError("process.dlopen")}setSourceMapsEnabled(){throw createNotImplementedError("process.setSourceMapsEnabled")}loadEnvFile(){throw createNotImplementedError("process.loadEnvFile")}disconnect(){throw createNotImplementedError("process.disconnect")}cpuUsage(){throw createNotImplementedError("process.cpuUsage")}setUncaughtExceptionCaptureCallback(){throw createNotImplementedError("process.setUncaughtExceptionCaptureCallback")}hasUncaughtExceptionCaptureCallback(){throw createNotImplementedError("process.hasUncaughtExceptionCaptureCallback")}initgroups(){throw createNotImplementedError("process.initgroups")}openStdin(){throw createNotImplementedError("process.openStdin")}assert(){throw createNotImplementedError("process.assert")}binding(){throw createNotImplementedError("process.binding")}permission={has:notImplemented("process.permission.has")};report={directory:"",filename:"",signal:"SIGUSR2",compact:!1,reportOnFatalError:!1,reportOnSignal:!1,reportOnUncaughtException:!1,getReport:notImplemented("process.report.getReport"),writeReport:notImplemented("process.report.writeReport")};finalization={register:notImplemented("process.finalization.register"),unregister:notImplemented("process.finalization.unregister"),registerBeforeExit:notImplemented("process.finalization.registerBeforeExit")};memoryUsage=Object.assign((()=>({arrayBuffers:0,rss:0,external:0,heapTotal:0,heapUsed:0})),{rss:()=>0});mainModule=void 0;domain=void 0;send=void 0;exitCode=void 0;channel=void 0;getegid=void 0;geteuid=void 0;getgid=void 0;getgroups=void 0;getuid=void 0;setegid=void 0;seteuid=void 0;setgid=void 0;setgroups=void 0;setuid=void 0;_events=void 0;_eventsCount=void 0;_exiting=void 0;_maxListeners=void 0;_debugEnd=void 0;_debugProcess=void 0;_fatalException=void 0;_getActiveHandles=void 0;_getActiveRequests=void 0;_kill=void 0;_preload_modules=void 0;_rawDebug=void 0;_startProfilerIdleNotifier=void 0;_stopProfilerIdleNotifier=void 0;_tickCallback=void 0;_disconnect=void 0;_handleQueue=void 0;_pendingMessage=void 0;_channel=void 0;_send=void 0;_linkedBinding=void 0}const z=Object.create(null),M=globalThis.process,_getEnv=e=>globalThis.__env__||M?.env||(e?z:globalThis),B=new Proxy(z,{get:(e,t)=>_getEnv()[t]??z[t],has:(e,t)=>t in _getEnv()||t in z,set:(e,t,r)=>(_getEnv(!0)[t]=r,!0),deleteProperty:(e,t)=>(delete _getEnv(!0)[t],!0),ownKeys(){const e=_getEnv();return Object.keys(e)},getOwnPropertyDescriptor(e,t){const r=_getEnv();if(t in r)return{value:r[t],writable:!0,enumerable:!0,configurable:!0}}}),$=Object.assign((function(e){const t=Date.now(),r=Math.trunc(t/1e3),s=t%1e3*1e6;if(e){let t=r-e[0],a=s-e[0];return a<0&&(t-=1,a=1e9+a),[t,a]}return[r,s]}),{bigint:function(){return BigInt(1e6*Date.now())}}),j=globalThis.queueMicrotask?(e,...t)=>{globalThis.queueMicrotask(e.bind(void 0,...t))}:createNextTickWithTimeout();function createNextTickWithTimeout(){let e,t=[],r=!1,s=-1;function cleanUpNextTick(){r&&e&&(r=!1,e.length>0?t=[...e,...t]:s=-1,t.length>0&&drainQueue())}function drainQueue(){if(r)return;const a=setTimeout(cleanUpNextTick);r=!0;let c=t.length;for(;c;){for(e=t,t=[];++s<c;)e&&e[s]();s=-1,c=t.length}e=void 0,r=!1,clearTimeout(a)}return(e,...s)=>{t.push(e.bind(void 0,...s)),1!==t.length||r||setTimeout(drainQueue)}}const q=new Process({env:B,hrtime:$,nextTick:j}),{abort:H,addListener:F,allowedNodeEnvironmentFlags:V,hasUncaughtExceptionCaptureCallback:W,setUncaughtExceptionCaptureCallback:K,loadEnvFile:G,sourceMapsEnabled:Y,arch:J,argv:Q,argv0:X,chdir:Z,config:ee,connected:te,constrainedMemory:re,availableMemory:ne,cpuUsage:oe,cwd:se,debugPort:ie,dlopen:ae,disconnect:ce,emit:le,emitWarning:ue,env:pe,eventNames:de,execArgv:fe,execPath:he,exit:me,finalization:ye,features:ge,getBuiltinModule:be,getActiveResourcesInfo:ve,getMaxListeners:Se,hrtime:we,kill:Ee,listeners:_e,listenerCount:Re,memoryUsage:Pe,nextTick:Oe,on:Ie,off:Ae,once:Te,pid:Ne,platform:Ce,ppid:xe,prependListener:ke,prependOnceListener:Le,rawListeners:De,release:ze,removeAllListeners:Me,removeListener:Be,report:$e,resourceUsage:je,setMaxListeners:qe,setSourceMapsEnabled:Ue,stderr:He,stdin:Fe,stdout:Ve,title:We,umask:Ke,uptime:Ge,version:Ye,versions:Je,domain:Qe,initgroups:Xe,moduleLoadList:Ze,reallyExit:et,openStdin:tt,assert:rt,binding:nt,send:ot,exitCode:st,channel:it,getegid:at,geteuid:ct,getgid:lt,getgroups:ut,getuid:pt,setegid:dt,seteuid:ft,setgid:ht,setgroups:mt,setuid:yt,permission:gt,mainModule:bt,ref:vt,unref:St,_events:wt,_eventsCount:Et,_exiting:_t,_maxListeners:Rt,_debugEnd:Pt,_debugProcess:Ot,_fatalException:It,_getActiveHandles:At,_getActiveRequests:Tt,_kill:Nt,_preload_modules:Ct,_rawDebug:xt,_startProfilerIdleNotifier:kt,_stopProfilerIdleNotifier:Lt,_tickCallback:Dt,_disconnect:zt,_handleQueue:Mt,_pendingMessage:Bt,_channel:$t,_send:jt,_linkedBinding:qt}=q,Ut=globalThis.process;globalThis.process=Ut?new Proxy(Ut,{get:(e,t,r)=>Reflect.has(e,t)?Reflect.get(e,t,r):Reflect.get(q,t,r)}):q;const Ht=[],Ft=[],Vt="undefined"==typeof Uint8Array?Array:Uint8Array,Wt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(let e=0,t=64;e<t;++e)Ht[e]=Wt[e],Ft[Wt.charCodeAt(e)]=e;function toByteArray(e){let t;const r=function(e){const t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");let r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}(e),s=r[0],a=r[1],c=new Vt(function(e,t,r){return 3*(t+r)/4-r}(0,s,a));let u=0;const p=a>0?s-4:s;let d;for(d=0;d<p;d+=4)t=Ft[e.charCodeAt(d)]<<18|Ft[e.charCodeAt(d+1)]<<12|Ft[e.charCodeAt(d+2)]<<6|Ft[e.charCodeAt(d+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===a&&(t=Ft[e.charCodeAt(d)]<<2|Ft[e.charCodeAt(d+1)]>>4,c[u++]=255&t),1===a&&(t=Ft[e.charCodeAt(d)]<<10|Ft[e.charCodeAt(d+1)]<<4|Ft[e.charCodeAt(d+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c}function encodeChunk(e,t,r){let s;const a=[];for(let u=t;u<r;u+=3)s=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),a.push(Ht[(c=s)>>18&63]+Ht[c>>12&63]+Ht[c>>6&63]+Ht[63&c]);var c;return a.join("")}function fromByteArray(e){let t;const r=e.length,s=r%3,a=[],c=16383;for(let t=0,u=r-s;t<u;t+=c)a.push(encodeChunk(e,t,t+c>u?u:t+c));return 1===s?(t=e[r-1],a.push(Ht[t>>2]+Ht[t<<4&63]+"==")):2===s&&(t=(e[r-2]<<8)+e[r-1],a.push(Ht[t>>10]+Ht[t>>4&63]+Ht[t<<2&63]+"=")),a.join("")}function read$1(e,t,r,s,a){let c,u;const p=8*a-s-1,d=(1<<p)-1,h=d>>1;let m=-7,g=r?a-1:0;const v=r?-1:1;let S=e[t+g];for(g+=v,c=S&(1<<-m)-1,S>>=-m,m+=p;m>0;)c=256*c+e[t+g],g+=v,m-=8;for(u=c&(1<<-m)-1,c>>=-m,m+=s;m>0;)u=256*u+e[t+g],g+=v,m-=8;if(0===c)c=1-h;else{if(c===d)return u?Number.NaN:(S?-1:1)*Number.POSITIVE_INFINITY;u+=Math.pow(2,s),c-=h}return(S?-1:1)*u*Math.pow(2,c-s)}function write$1(e,t,r,s,a,c){let u,p,d,h=8*c-a-1;const m=(1<<h)-1,g=m>>1,v=23===a?Math.pow(2,-24)-Math.pow(2,-77):0;let S=s?0:c-1;const w=s?1:-1,E=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),Number.isNaN(t)||t===Number.POSITIVE_INFINITY?(p=Number.isNaN(t)?1:0,u=m):(u=Math.floor(Math.log2(t)),t*(d=Math.pow(2,-u))<1&&(u--,d*=2),(t+=u+g>=1?v/d:v*Math.pow(2,1-g))*d>=2&&(u++,d/=2),u+g>=m?(p=0,u=m):u+g>=1?(p=(t*d-1)*Math.pow(2,a),u+=g):(p=t*Math.pow(2,g-1)*Math.pow(2,a),u=0));a>=8;)e[r+S]=255&p,S+=w,p/=256,a-=8;for(u=u<<a|p,h+=a;h>0;)e[r+S]=255&u,S+=w,u/=256,h-=8;e[r+S-w]|=128*E}Ft["-".charCodeAt(0)]=62,Ft["_".charCodeAt(0)]=63;const Kt="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,Gt=2147483647;function createBuffer(e){if(e>Gt)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,Buffer$1.prototype),t}function Buffer$1(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(e)}return from(e,t,r)}function from(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!Buffer$1.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|byteLength(e,t);let s=createBuffer(r);const a=s.write(e,t);a!==r&&(s=s.slice(0,a));return s}(e,t);if(ArrayBuffer.isView(e))return function(e){if(isInstance(e,Uint8Array)){const t=new Uint8Array(e);return fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength)}return fromArrayLike(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(isInstance(e,ArrayBuffer)||e&&isInstance(e.buffer,ArrayBuffer))return fromArrayBuffer(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(isInstance(e,SharedArrayBuffer)||e&&isInstance(e.buffer,SharedArrayBuffer)))return fromArrayBuffer(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const s=e.valueOf&&e.valueOf();if(null!=s&&s!==e)return Buffer$1.from(s,t,r);const a=function(e){if(Buffer$1.isBuffer(e)){const t=0|checked(e.length),r=createBuffer(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||numberIsNaN(e.length)?createBuffer(0):fromArrayLike(e);if("Buffer"===e.type&&Array.isArray(e.data))return fromArrayLike(e.data)}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Buffer$1.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function allocUnsafe(e){return assertSize(e),createBuffer(e<0?0:0|checked(e))}function fromArrayLike(e){const t=e.length<0?0:0|checked(e.length),r=createBuffer(t);for(let s=0;s<t;s+=1)r[s]=255&e[s];return r}function fromArrayBuffer(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let s;return s=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(s,Buffer$1.prototype),s}function checked(e){if(e>=Gt)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Gt.toString(16)+" bytes");return 0|e}function byteLength(e,t){if(Buffer$1.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||isInstance(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===r)return 0;let a=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(a)return s?-1:utf8ToBytes(e).length;t=(""+t).toLowerCase(),a=!0}}function slowToString(e,t,r){let s=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function swap(e,t,r){const s=e[t];e[t]=e[r],e[r]=s}function bidirectionalIndexOf(e,t,r,s,a){if(0===e.length)return-1;if("string"==typeof r?(s=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),numberIsNaN(r=+r)&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return-1;r=e.length-1}else if(r<0){if(!a)return-1;r=0}if("string"==typeof t&&(t=Buffer$1.from(t,s)),Buffer$1.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,r,s,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):arrayIndexOf(e,[t],r,s,a);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,s,a){let c,u=1,p=e.length,d=t.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(e.length<2||t.length<2)return-1;u=2,p/=2,d/=2,r/=2}function read(e,t){return 1===u?e[t]:e.readUInt16BE(t*u)}if(a){let s=-1;for(c=r;c<p;c++)if(read(e,c)===read(t,-1===s?0:c-s)){if(-1===s&&(s=c),c-s+1===d)return s*u}else-1!==s&&(c-=c-s),s=-1}else for(r+d>p&&(r=p-d),c=r;c>=0;c--){let r=!0;for(let s=0;s<d;s++)if(read(e,c+s)!==read(t,s)){r=!1;break}if(r)return c}return-1}function hexWrite(e,t,r,s){r=Number(r)||0;const a=e.length-r;s?(s=Number(s))>a&&(s=a):s=a;const c=t.length;let u;for(s>c/2&&(s=c/2),u=0;u<s;++u){const s=Number.parseInt(t.slice(2*u,2*u+2),16);if(numberIsNaN(s))return u;e[r+u]=s}return u}function utf8Write(e,t,r,s){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,s)}function asciiWrite(e,t,r,s){return blitBuffer(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,s)}function base64Write(e,t,r,s){return blitBuffer(base64ToBytes(t),e,r,s)}function ucs2Write(e,t,r,s){return blitBuffer(function(e,t){let r,s,a;const c=[];for(let u=0;u<e.length&&!((t-=2)<0);++u)r=e.charCodeAt(u),s=r>>8,a=r%256,c.push(a,s);return c}(t,e.length-r),e,r,s)}function base64Slice(e,t,r){return 0===t&&r===e.length?fromByteArray(e):fromByteArray(e.slice(t,r))}function utf8Slice(e,t,r){r=Math.min(e.length,r);const s=[];let a=t;for(;a<r;){const t=e[a];let c=null,u=t>239?4:t>223?3:t>191?2:1;if(a+u<=r){let r,s,p,d;switch(u){case 1:t<128&&(c=t);break;case 2:r=e[a+1],128==(192&r)&&(d=(31&t)<<6|63&r,d>127&&(c=d));break;case 3:r=e[a+1],s=e[a+2],128==(192&r)&&128==(192&s)&&(d=(15&t)<<12|(63&r)<<6|63&s,d>2047&&(d<55296||d>57343)&&(c=d));break;case 4:r=e[a+1],s=e[a+2],p=e[a+3],128==(192&r)&&128==(192&s)&&128==(192&p)&&(d=(15&t)<<18|(63&r)<<12|(63&s)<<6|63&p,d>65535&&d<1114112&&(c=d))}}null===c?(c=65533,u=1):c>65535&&(c-=65536,s.push(c>>>10&1023|55296),c=56320|1023&c),s.push(c),a+=u}return function(e){const t=e.length;if(t<=Yt)return String.fromCharCode.apply(String,e);let r="",s=0;for(;s<t;)r+=String.fromCharCode.apply(String,e.slice(s,s+=Yt));return r}(s)}Buffer$1.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}(),Buffer$1.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This environment lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer$1.prototype,"parent",{enumerable:!0,get:function(){if(Buffer$1.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer$1.prototype,"offset",{enumerable:!0,get:function(){if(Buffer$1.isBuffer(this))return this.byteOffset}}),Buffer$1.poolSize=8192,Buffer$1.from=function(e,t,r){return from(e,t,r)},Object.setPrototypeOf(Buffer$1.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer$1,Uint8Array),Buffer$1.alloc=function(e,t,r){return function(e,t,r){return assertSize(e),e<=0?createBuffer(e):void 0!==t?"string"==typeof r?createBuffer(e).fill(t,r):createBuffer(e).fill(t):createBuffer(e)}(e,t,r)},Buffer$1.allocUnsafe=function(e){return allocUnsafe(e)},Buffer$1.allocUnsafeSlow=function(e){return allocUnsafe(e)},Buffer$1.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Buffer$1.prototype},Buffer$1.compare=function(e,t){if(isInstance(e,Uint8Array)&&(e=Buffer$1.from(e,e.offset,e.byteLength)),isInstance(t,Uint8Array)&&(t=Buffer$1.from(t,t.offset,t.byteLength)),!Buffer$1.isBuffer(e)||!Buffer$1.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,s=t.length;for(let a=0,c=Math.min(r,s);a<c;++a)if(e[a]!==t[a]){r=e[a],s=t[a];break}return r<s?-1:s<r?1:0},Buffer$1.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer$1.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer$1.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const s=Buffer$1.allocUnsafe(t);let a=0;for(r=0;r<e.length;++r){let t=e[r];if(isInstance(t,Uint8Array))a+t.length>s.length?(Buffer$1.isBuffer(t)||(t=Buffer$1.from(t.buffer,t.byteOffset,t.byteLength)),t.copy(s,a)):Uint8Array.prototype.set.call(s,t,a);else{if(!Buffer$1.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(s,a)}a+=t.length}return s},Buffer$1.byteLength=byteLength,Buffer$1.prototype._isBuffer=!0,Buffer$1.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer$1.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer$1.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer$1.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):Reflect.apply(slowToString,this,arguments)},Buffer$1.prototype.toLocaleString=Buffer$1.prototype.toString,Buffer$1.prototype.equals=function(e){if(!Buffer$1.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer$1.compare(this,e)},Buffer$1.prototype.inspect=function(){let e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},Kt&&(Buffer$1.prototype[Kt]=Buffer$1.prototype.inspect),Buffer$1.prototype.compare=function(e,t,r,s,a){if(isInstance(e,Uint8Array)&&(e=Buffer$1.from(e,e.offset,e.byteLength)),!Buffer$1.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===s&&(s=0),void 0===a&&(a=this.length),t<0||r>e.length||s<0||a>this.length)throw new RangeError("out of range index");if(s>=a&&t>=r)return 0;if(s>=a)return-1;if(t>=r)return 1;if(this===e)return 0;let c=(a>>>=0)-(s>>>=0),u=(r>>>=0)-(t>>>=0);const p=Math.min(c,u),d=this.slice(s,a),h=e.slice(t,r);for(let e=0;e<p;++e)if(d[e]!==h[e]){c=d[e],u=h[e];break}return c<u?-1:u<c?1:0},Buffer$1.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer$1.prototype.indexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},Buffer$1.prototype.lastIndexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},Buffer$1.prototype.write=function(e,t,r,s){if(void 0===t)s="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)s=t,r=this.length,t=0;else{if(!Number.isFinite(t))throw new TypeError("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,Number.isFinite(r)?(r>>>=0,void 0===s&&(s="utf8")):(s=r,r=void 0)}const a=this.length-t;if((void 0===r||r>a)&&(r=a),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let c=!1;for(;;)switch(s){case"hex":return hexWrite(this,e,t,r);case"utf8":case"utf-8":return utf8Write(this,e,t,r);case"ascii":case"latin1":case"binary":return asciiWrite(this,e,t,r);case"base64":return base64Write(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(c)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),c=!0}},Buffer$1.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Yt=4096;function asciiSlice(e,t,r){let s="";r=Math.min(e.length,r);for(let a=t;a<r;++a)s+=String.fromCharCode(127&e[a]);return s}function latin1Slice(e,t,r){let s="";r=Math.min(e.length,r);for(let a=t;a<r;++a)s+=String.fromCharCode(e[a]);return s}function hexSlice(e,t,r){const s=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>s)&&(r=s);let a="";for(let s=t;s<r;++s)a+=Xt[e[s]];return a}function utf16leSlice(e,t,r){const s=e.slice(t,r);let a="";for(let e=0;e<s.length-1;e+=2)a+=String.fromCharCode(s[e]+256*s[e+1]);return a}function checkOffset(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,r,s,a,c){if(!Buffer$1.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<c)throw new RangeError('"value" argument is out of bounds');if(r+s>e.length)throw new RangeError("Index out of range")}function wrtBigUInt64LE(e,t,r,s,a){checkIntBI(t,s,a,e,r,7);let c=Number(t&BigInt(4294967295));e[r++]=c,c>>=8,e[r++]=c,c>>=8,e[r++]=c,c>>=8,e[r++]=c;let u=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=u,u>>=8,e[r++]=u,u>>=8,e[r++]=u,u>>=8,e[r++]=u,r}function wrtBigUInt64BE(e,t,r,s,a){checkIntBI(t,s,a,e,r,7);let c=Number(t&BigInt(4294967295));e[r+7]=c,c>>=8,e[r+6]=c,c>>=8,e[r+5]=c,c>>=8,e[r+4]=c;let u=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=u,u>>=8,e[r+2]=u,u>>=8,e[r+1]=u,u>>=8,e[r]=u,r+8}function checkIEEE754(e,t,r,s,a,c){if(r+s>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,s,a){return t=+t,r>>>=0,a||checkIEEE754(e,0,r,4),write$1(e,t,r,s,23,4),r+4}function writeDouble(e,t,r,s,a){return t=+t,r>>>=0,a||checkIEEE754(e,0,r,8),write$1(e,t,r,s,52,8),r+8}Buffer$1.prototype.slice=function(e,t){const r=this.length;(e=Math.trunc(e))<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:Math.trunc(t))<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const s=this.subarray(e,t);return Object.setPrototypeOf(s,Buffer$1.prototype),s},Buffer$1.prototype.readUintLE=Buffer$1.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);let s=this[e],a=1,c=0;for(;++c<t&&(a*=256);)s+=this[e+c]*a;return s},Buffer$1.prototype.readUintBE=Buffer$1.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);let s=this[e+--t],a=1;for(;t>0&&(a*=256);)s+=this[e+--t]*a;return s},Buffer$1.prototype.readUint8=Buffer$1.prototype.readUInt8=function(e,t){return e>>>=0,t||checkOffset(e,1,this.length),this[e]},Buffer$1.prototype.readUint16LE=Buffer$1.prototype.readUInt16LE=function(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer$1.prototype.readUint16BE=Buffer$1.prototype.readUInt16BE=function(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer$1.prototype.readUint32LE=Buffer$1.prototype.readUInt32LE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer$1.prototype.readUint32BE=Buffer$1.prototype.readUInt32BE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer$1.prototype.readBigUInt64LE=defineBigIntMethod((function(e){validateNumber(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||boundsError(e,this.length-8);const s=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,a=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(s)+(BigInt(a)<<BigInt(32))})),Buffer$1.prototype.readBigUInt64BE=defineBigIntMethod((function(e){validateNumber(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||boundsError(e,this.length-8);const s=t*2**24+65536*this[++e]+256*this[++e]+this[++e],a=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(s)<<BigInt(32))+BigInt(a)})),Buffer$1.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);let s=this[e],a=1,c=0;for(;++c<t&&(a*=256);)s+=this[e+c]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*t)),s},Buffer$1.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);let s=t,a=1,c=this[e+--s];for(;s>0&&(a*=256);)c+=this[e+--s]*a;return a*=128,c>=a&&(c-=Math.pow(2,8*t)),c},Buffer$1.prototype.readInt8=function(e,t){return e>>>=0,t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer$1.prototype.readInt16LE=function(e,t){e>>>=0,t||checkOffset(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer$1.prototype.readInt16BE=function(e,t){e>>>=0,t||checkOffset(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer$1.prototype.readInt32LE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer$1.prototype.readInt32BE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer$1.prototype.readBigInt64LE=defineBigIntMethod((function(e){validateNumber(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||boundsError(e,this.length-8);const s=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(s)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),Buffer$1.prototype.readBigInt64BE=defineBigIntMethod((function(e){validateNumber(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||boundsError(e,this.length-8);const s=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(s)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),Buffer$1.prototype.readFloatLE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),read$1(this,e,!0,23,4)},Buffer$1.prototype.readFloatBE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),read$1(this,e,!1,23,4)},Buffer$1.prototype.readDoubleLE=function(e,t){return e>>>=0,t||checkOffset(e,8,this.length),read$1(this,e,!0,52,8)},Buffer$1.prototype.readDoubleBE=function(e,t){return e>>>=0,t||checkOffset(e,8,this.length),read$1(this,e,!1,52,8)},Buffer$1.prototype.writeUintLE=Buffer$1.prototype.writeUIntLE=function(e,t,r,s){if(e=+e,t>>>=0,r>>>=0,!s){checkInt(this,e,t,r,Math.pow(2,8*r)-1,0)}let a=1,c=0;for(this[t]=255&e;++c<r&&(a*=256);)this[t+c]=e/a&255;return t+r},Buffer$1.prototype.writeUintBE=Buffer$1.prototype.writeUIntBE=function(e,t,r,s){if(e=+e,t>>>=0,r>>>=0,!s){checkInt(this,e,t,r,Math.pow(2,8*r)-1,0)}let a=r-1,c=1;for(this[t+a]=255&e;--a>=0&&(c*=256);)this[t+a]=e/c&255;return t+r},Buffer$1.prototype.writeUint8=Buffer$1.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,1,255,0),this[t]=255&e,t+1},Buffer$1.prototype.writeUint16LE=Buffer$1.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer$1.prototype.writeUint16BE=Buffer$1.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer$1.prototype.writeUint32LE=Buffer$1.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Buffer$1.prototype.writeUint32BE=Buffer$1.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer$1.prototype.writeBigUInt64LE=defineBigIntMethod((function(e,t=0){return wrtBigUInt64LE(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer$1.prototype.writeBigUInt64BE=defineBigIntMethod((function(e,t=0){return wrtBigUInt64BE(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer$1.prototype.writeIntLE=function(e,t,r,s){if(e=+e,t>>>=0,!s){const s=Math.pow(2,8*r-1);checkInt(this,e,t,r,s-1,-s)}let a=0,c=1,u=0;for(this[t]=255&e;++a<r&&(c*=256);)e<0&&0===u&&0!==this[t+a-1]&&(u=1),this[t+a]=Math.trunc(e/c)-u&255;return t+r},Buffer$1.prototype.writeIntBE=function(e,t,r,s){if(e=+e,t>>>=0,!s){const s=Math.pow(2,8*r-1);checkInt(this,e,t,r,s-1,-s)}let a=r-1,c=1,u=0;for(this[t+a]=255&e;--a>=0&&(c*=256);)e<0&&0===u&&0!==this[t+a+1]&&(u=1),this[t+a]=Math.trunc(e/c)-u&255;return t+r},Buffer$1.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer$1.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer$1.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer$1.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Buffer$1.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer$1.prototype.writeBigInt64LE=defineBigIntMethod((function(e,t=0){return wrtBigUInt64LE(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer$1.prototype.writeBigInt64BE=defineBigIntMethod((function(e,t=0){return wrtBigUInt64BE(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer$1.prototype.writeFloatLE=function(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer$1.prototype.writeFloatBE=function(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer$1.prototype.writeDoubleLE=function(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer$1.prototype.writeDoubleBE=function(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer$1.prototype.copy=function(e,t,r,s){if(!Buffer$1.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<r&&(s=r),s===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-r&&(s=e.length-t+r);const a=s-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,s):Uint8Array.prototype.set.call(e,this.subarray(r,s),t),a},Buffer$1.prototype.fill=function(e,t,r,s){if("string"==typeof e){if("string"==typeof t?(s=t,t=0,r=this.length):"string"==typeof r&&(s=r,r=this.length),void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!Buffer$1.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(1===e.length){const t=e.charCodeAt(0);("utf8"===s&&t<128||"latin1"===s)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{const c=Buffer$1.isBuffer(e)?e:Buffer$1.from(e,s),u=c.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-t;++a)this[a+t]=c[a%u]}return this};const Jt={};function E$1(e,t,r){Jt[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:Reflect.apply(t,this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function addNumericalSeparator(e){let t="",r=e.length;const s="-"===e[0]?1:0;for(;r>=s+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function checkIntBI(e,t,r,s,a,c){if(e>r||e<t){const r="bigint"==typeof t?"n":"";let s;throw s=0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(c+1)}${r}`:`>= -(2${r} ** ${8*(c+1)-1}${r}) and < 2 ** ${8*(c+1)-1}${r}`,new Jt.ERR_OUT_OF_RANGE("value",s,e)}!function(e,t,r){validateNumber(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||boundsError(t,e.length-(r+1))}(s,a,c)}function validateNumber(e,t){if("number"!=typeof e)throw new Jt.ERR_INVALID_ARG_TYPE(t,"number",e)}function boundsError(e,t,r){if(Math.floor(e)!==e)throw validateNumber(e,r),new Jt.ERR_OUT_OF_RANGE("offset","an integer",e);if(t<0)throw new Jt.ERR_BUFFER_OUT_OF_BOUNDS;throw new Jt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,e)}E$1("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),E$1("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),E$1("ERR_OUT_OF_RANGE",(function(e,t,r){let s=`The value of "${e}" is out of range.`,a=r;return Number.isInteger(r)&&Math.abs(r)>2**32?a=addNumericalSeparator(String(r)):"bigint"==typeof r&&(a=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(a=addNumericalSeparator(a)),a+="n"),s+=` It must be ${t}. Received ${a}`,s}),RangeError);const Qt=/[^\w+/-]/g;function utf8ToBytes(e,t){let r;t=t||Number.POSITIVE_INFINITY;const s=e.length;let a=null;const c=[];for(let u=0;u<s;++u){if(r=e.charCodeAt(u),r>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&c.push(239,191,189);continue}if(u+1===s){(t-=3)>-1&&c.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&c.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(t-=3)>-1&&c.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;c.push(r)}else if(r<2048){if((t-=2)<0)break;c.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;c.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;c.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return c}function base64ToBytes(e){return toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Qt,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function blitBuffer(e,t,r,s){let a;for(a=0;a<s&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}function isInstance(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function numberIsNaN(e){return e!=e}const Xt=function(){const e="0123456789abcdef",t=Array.from({length:256});for(let r=0;r<16;++r){const s=16*r;for(let a=0;a<16;++a)t[s+a]=e[r]+e[a]}return t}();function defineBigIntMethod(e){return"undefined"==typeof BigInt?BufferBigIntNotDefined:e}function BufferBigIntNotDefined(){throw new Error("BigInt not supported")}const Zt=globalThis.Buffer||Buffer$1;globalThis.btoa.bind(globalThis),globalThis.atob.bind(globalThis),globalThis.Buffer||(globalThis.Buffer=Zt);Object.assign((()=>{}),{__unenv__:!0});class Timeout{constructor(e,t){"function"==typeof e&&e(...t)}close(){throw createNotImplementedError("node.timers.timeout.close")}_onTimeout(...e){throw createNotImplementedError("node.timers.timeout._onTimeout")}ref(){return this}unref(){return this}hasRef(){return!1}refresh(){return this}[Symbol.dispose](){}[Symbol.toPrimitive](){return 0}}function setTimeoutFallback(e,t,...r){return new Timeout(e,r)}setTimeoutFallback.__promisify__=function(e,t,r){return new Promise((e=>{e(t)}))};class Immediate{_onImmediate;_timeout;constructor(e,t){this._onImmediate=e,"setTimeout"in globalThis?this._timeout=setTimeout(e,0,...t):e(...t)}ref(){return this._timeout?.ref(),this}unref(){return this._timeout?.unref(),this}hasRef(){return this._timeout?.hasRef()??!1}[Symbol.dispose](){"clearTimeout"in globalThis&&clearTimeout(this._timeout)}}function setImmediateFallback(e,...t){return new Immediate(e,t)}function setIntervalFallback(e,t,...r){return new Timeout(e,r)}setImmediateFallback.__promisify__=function(e){return new Promise((t=>{t(e)}))},setIntervalFallback.__promisify__=async function*(e,t){yield t};const er=globalThis.clearImmediate?.bind(globalThis)||function(e){e?.[Symbol.dispose]()};globalThis.clearInterval?.bind(globalThis),globalThis.clearTimeout?.bind(globalThis);const tr=globalThis.setImmediate?.bind(globalThis)||setImmediateFallback;globalThis.setTimeout?.bind(globalThis),globalThis.setInterval?.bind(globalThis),globalThis.setImmediate||(globalThis.setImmediate=tr),globalThis.clearImmediate||(globalThis.clearImmediate=er);const rr=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,nr=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,or=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function destr(e,t={}){if("string"!=typeof e)return e;if('"'===e[0]&&'"'===e[e.length-1]&&-1===e.indexOf("\\"))return e.slice(1,-1);const r=e.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!or.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(rr.test(e)||nr.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,jsonParseTransform)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}const sr=/#/g,ir=/&/g,ar=/\//g,cr=/=/g,lr=/\+/g,ur=/%5e/gi,pr=/%60/gi,dr=/%7c/gi,fr=/%20/gi;function encodeQueryValue(e){return(t="string"==typeof e?e:JSON.stringify(e),encodeURI(""+t).replace(dr,"|")).replace(lr,"%2B").replace(fr,"+").replace(sr,"%23").replace(ir,"%26").replace(pr,"`").replace(ur,"^").replace(ar,"%2F");var t}function encodeQueryKey(e){return encodeQueryValue(e).replace(cr,"%3D")}function decode$1(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function decodeQueryValue(e){return decode$1(e.replace(lr," "))}function parseQuery(e=""){const t=Object.create(null);"?"===e[0]&&(e=e.slice(1));for(const r of e.split("&")){const e=r.match(/([^=]+)=?(.*)/)||[];if(e.length<2)continue;const s=decode$1(e[1].replace(lr," "));if("__proto__"===s||"constructor"===s)continue;const a=decodeQueryValue(e[2]||"");void 0===t[s]?t[s]=a:Array.isArray(t[s])?t[s].push(a):t[s]=[t[s],a]}return t}function stringifyQuery(e){return Object.keys(e).filter((t=>void 0!==e[t])).map((t=>{return r=t,"number"!=typeof(s=e[t])&&"boolean"!=typeof s||(s=String(s)),s?Array.isArray(s)?s.map((e=>`${encodeQueryKey(r)}=${encodeQueryValue(e)}`)).join("&"):`${encodeQueryKey(r)}=${encodeQueryValue(s)}`:encodeQueryKey(r);var r,s})).filter(Boolean).join("&")}const hr=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,mr=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,yr=/^([/\\]\s*){2,}[^/\\]/,gr=/^\.?\//;function hasProtocol(e,t={}){return"boolean"==typeof t&&(t={acceptRelative:t}),t.strict?hr.test(e):mr.test(e)||!!t.acceptRelative&&yr.test(e)}function withoutTrailingSlash(e="",t){return(function(e=""){return e.endsWith("/")}(e)?e.slice(0,-1):e)||"/"}function withTrailingSlash(e="",t){return e.endsWith("/")?e:e+"/"}function withoutBase(e,t){if(isEmptyURL(t))return e;const r=withoutTrailingSlash(t);if(!e.startsWith(r))return e;const s=e.slice(r.length);return"/"===s[0]?s:"/"+s}function withQuery(e,t){const r=parseURL(e),s={...parseQuery(r.search),...t};return r.search=stringifyQuery(s),function(e){const t=e.pathname||"",r=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",s=e.hash||"",a=e.auth?e.auth+"@":"",c=e.host||"",u=e.protocol||e[br]?(e.protocol||"")+"//":"";return u+a+c+t+r+s}(r)}function getQuery(e){return parseQuery(parseURL(e).search)}function isEmptyURL(e){return!e||"/"===e}function joinURL(e,...t){let r=e||"";for(const e of t.filter((e=>function(e){return e&&"/"!==e}(e))))if(r){const t=e.replace(gr,"");r=withTrailingSlash(r)+t}else r=e;return r}const br=Symbol.for("ufo:protocolRelative");function parseURL(e="",t){const r=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(r){const[,e,t=""]=r;return{protocol:e.toLowerCase(),pathname:t,href:e+t,auth:"",host:"",search:"",hash:""}}if(!hasProtocol(e,{acceptRelative:!0}))return parsePath(e);const[,s="",a,c=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,u="",p=""]=c.match(/([^#/?]*)(.*)?/)||[];"file:"===s&&(p=p.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:d,search:h,hash:m}=parsePath(p);return{protocol:s.toLowerCase(),auth:a?a.slice(0,Math.max(0,a.length-1)):"",host:u,pathname:d,search:h,hash:m,[br]:!s}}function parsePath(e=""){const[t="",r="",s=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:r,hash:s}}const vr=0,Sr=1,wr=2;function createRouter$1(e={}){const t={options:e,rootNode:createRadixNode(),staticRoutesMap:{}},normalizeTrailingSlash=t=>e.strictTrailingSlash?t:t.replace(/\/$/,"")||"/";if(e.routes)for(const r in e.routes)insert(t,normalizeTrailingSlash(r),e.routes[r]);return{ctx:t,lookup:e=>function(e,t){const r=e.staticRoutesMap[t];if(r)return r.data;const s=t.split("/"),a={};let c=!1,u=null,p=e.rootNode,d=null;for(let e=0;e<s.length;e++){const t=s[e];null!==p.wildcardChildNode&&(u=p.wildcardChildNode,d=s.slice(e).join("/"));const r=p.children.get(t);if(void 0===r){if(p&&p.placeholderChildren.length>1){const t=s.length-e;p=p.placeholderChildren.find((e=>e.maxDepth===t))||null}else p=p.placeholderChildren[0]||null;if(!p)break;p.paramName&&(a[p.paramName]=t),c=!0}else p=r}null!==p&&null!==p.data||null===u||(p=u,a[p.paramName||"_"]=d,c=!0);if(!p)return null;if(c)return{...p.data,params:c?a:void 0};return p.data}(t,normalizeTrailingSlash(e)),insert:(e,r)=>insert(t,normalizeTrailingSlash(e),r),remove:e=>function(e,t){let r=!1;const s=t.split("/");let a=e.rootNode;for(const e of s)if(a=a.children.get(e),!a)return r;if(a.data){const e=s.at(-1)||"";a.data=null,0===Object.keys(a.children).length&&a.parent&&(a.parent.children.delete(e),a.parent.wildcardChildNode=null,a.parent.placeholderChildren=[]),r=!0}return r}(t,normalizeTrailingSlash(e))}}function insert(e,t,r){let s=!0;const a=t.split("/");let c=e.rootNode,u=0;const p=[c];for(const e of a){let t;if(t=c.children.get(e))c=t;else{const r=getNodeType(e);t=createRadixNode({type:r,parent:c}),c.children.set(e,t),r===wr?(t.paramName="*"===e?"_"+u++:e.slice(1),c.placeholderChildren.push(t),s=!1):r===Sr&&(c.wildcardChildNode=t,t.paramName=e.slice(3)||"_",s=!1),p.push(t),c=t}}for(const[e,t]of p.entries())t.maxDepth=Math.max(p.length-e,t.maxDepth||0);return c.data=r,!0===s&&(e.staticRoutesMap[t]=c),c}function createRadixNode(e={}){return{type:e.type||vr,maxDepth:0,parent:e.parent||null,children:new Map,data:e.data||null,paramName:e.paramName||null,wildcardChildNode:null,placeholderChildren:[]}}function getNodeType(e){return e.startsWith("**")?Sr:":"===e[0]||"*"===e?wr:vr}function toRouteMatcher(e){return function(e,t){return{ctx:{table:e},matchAll:r=>_matchRoutes(r,e,t)}}(_routerNodeToTable("",e.ctx.rootNode),e.ctx.options.strictTrailingSlash)}function _matchRoutes(e,t,r){!0!==r&&e.endsWith("/")&&(e=e.slice(0,-1)||"/");const s=[];for(const[r,a]of _sortRoutesMap(t.wildcard))(e===r||e.startsWith(r+"/"))&&s.push(a);for(const[r,a]of _sortRoutesMap(t.dynamic))if(e.startsWith(r+"/")){const t="/"+e.slice(r.length).split("/").splice(2).join("/");s.push(..._matchRoutes(t,a))}const a=t.static.get(e);return a&&s.push(a),s.filter(Boolean)}function _sortRoutesMap(e){return[...e.entries()].sort(((e,t)=>e[0].length-t[0].length))}function _routerNodeToTable(e,t){const r={static:new Map,wildcard:new Map,dynamic:new Map};return function _addNode(e,t){if(e)if(t.type!==vr||e.includes("*")||e.includes(":")){if(t.type===Sr)r.wildcard.set(e.replace("/**",""),t.data);else if(t.type===wr){const s=_routerNodeToTable("",t);return t.data&&s.static.set("/",t.data),void r.dynamic.set(e.replace(/\/\*|\/:\w+/,""),s)}}else t.data&&r.static.set(e,t.data);for(const[r,s]of t.children.entries())_addNode(`${e}/${r}`.replace("//","/"),s)}(e,t),r}function isPlainObject(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&(!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e)))}function _defu(e,t,r=".",s){if(!isPlainObject(t))return _defu(e,{},r,s);const a=Object.assign({},t);for(const t in e){if("__proto__"===t||"constructor"===t)continue;const c=e[t];null!=c&&(s&&s(a,t,c,r)||(Array.isArray(c)&&Array.isArray(a[t])?a[t]=[...c,...a[t]]:isPlainObject(c)&&isPlainObject(a[t])?a[t]=_defu(c,a[t],(r?`${r}.`:"")+t.toString(),s):a[t]=c))}return a}function createDefu(e){return(...t)=>t.reduce(((t,r)=>_defu(t,r,"",e)),{})}const Er=createDefu(),_r=createDefu(((e,t,r)=>{if(void 0!==e[t]&&"function"==typeof r)return e[t]=r(e[t]),!0}));function o(e){throw new Error(`${e} is not implemented yet!`)}class i extends _EventEmitter{__unenv__={};readableEncoding=null;readableEnded=!0;readableFlowing=!1;readableHighWaterMark=0;readableLength=0;readableObjectMode=!1;readableAborted=!1;readableDidRead=!1;closed=!1;errored=null;readable=!1;destroyed=!1;static from(e,t){return new i(t)}constructor(e){super()}_read(e){}read(e){}setEncoding(e){return this}pause(){return this}resume(){return this}isPaused(){return!0}unpipe(e){return this}unshift(e,t){}wrap(e){return this}push(e,t){return!1}_destroy(e,t){this.removeAllListeners()}destroy(e){return this.destroyed=!0,this._destroy(e),this}pipe(e,t){return{}}compose(e,t){throw new Error("Method not implemented.")}[Symbol.asyncDispose](){return this.destroy(),Promise.resolve()}async*[Symbol.asyncIterator](){throw o("Readable.asyncIterator")}iterator(e){throw o("Readable.iterator")}map(e,t){throw o("Readable.map")}filter(e,t){throw o("Readable.filter")}forEach(e,t){throw o("Readable.forEach")}reduce(e,t,r){throw o("Readable.reduce")}find(e,t){throw o("Readable.find")}findIndex(e,t){throw o("Readable.findIndex")}some(e,t){throw o("Readable.some")}toArray(e){throw o("Readable.toArray")}every(e,t){throw o("Readable.every")}flatMap(e,t){throw o("Readable.flatMap")}drop(e,t){throw o("Readable.drop")}take(e,t){throw o("Readable.take")}asIndexedPairs(e){throw o("Readable.asIndexedPairs")}}let Rr=class extends _EventEmitter{__unenv__={};writable=!0;writableEnded=!1;writableFinished=!1;writableHighWaterMark=0;writableLength=0;writableObjectMode=!1;writableCorked=0;closed=!1;errored=null;writableNeedDrain=!1;destroyed=!1;_data;_encoding="utf8";constructor(e){super()}pipe(e,t){return{}}_write(e,t,r){if(this.writableEnded)r&&r();else{if(void 0===this._data)this._data=e;else{const r="string"==typeof this._data?Zt.from(this._data,this._encoding||t||"utf8"):this._data,s="string"==typeof e?Zt.from(e,t||this._encoding||"utf8"):e;this._data=Zt.concat([r,s])}this._encoding=t,r&&r()}}_writev(e,t){}_destroy(e,t){}_final(e){}write(e,t,r){const s="string"==typeof t?this._encoding:"utf8",a="function"==typeof t?t:"function"==typeof r?r:void 0;return this._write(e,s,a),!0}setDefaultEncoding(e){return this}end(e,t,r){const s="function"==typeof e?e:"function"==typeof t?t:"function"==typeof r?r:void 0;if(this.writableEnded)return s&&s(),this;const a=e===s?void 0:e;if(a){const e=t===s?void 0:t;this.write(a,e,s)}return this.writableEnded=!0,this.writableFinished=!0,this.emit("close"),this.emit("finish"),this}cork(){}uncork(){}destroy(e){return this.destroyed=!0,delete this._data,this.removeAllListeners(),this}compose(e,t){throw new Error("Method not implemented.")}};const Pr=class{allowHalfOpen=!0;_destroy;constructor(e=new i,t=new Rr){Object.assign(this,e),Object.assign(this,t),this._destroy=function(...e){return function(...t){for(const r of e)r(...t)}}(e._destroy,t._destroy)}};const Or=(Object.assign(Pr.prototype,i.prototype),Object.assign(Pr.prototype,Rr.prototype),Pr);class A extends Or{__unenv__={};bufferSize=0;bytesRead=0;bytesWritten=0;connecting=!1;destroyed=!1;pending=!1;localAddress="";localPort=0;remoteAddress="";remoteFamily="";remotePort=0;autoSelectFamilyAttemptedAddresses=[];readyState="readOnly";constructor(e){super()}write(e,t,r){return!1}connect(e,t,r){return this}end(e,t,r){return this}setEncoding(e){return this}pause(){return this}resume(){return this}setTimeout(e,t){return this}setNoDelay(e){return this}setKeepAlive(e,t){return this}address(){return{}}unref(){return this}ref(){return this}destroySoon(){this.destroy()}resetAndDestroy(){const e=new Error("ERR_SOCKET_CLOSED");return e.code="ERR_SOCKET_CLOSED",this.destroy(e),this}}class y extends i{aborted=!1;httpVersion="1.1";httpVersionMajor=1;httpVersionMinor=1;complete=!0;connection;socket;headers={};trailers={};method="GET";url="/";statusCode=200;statusMessage="";closed=!1;errored=null;readable=!1;constructor(e){super(),this.socket=this.connection=e||new A}get rawHeaders(){const e=this.headers,t=[];for(const r in e)if(Array.isArray(e[r]))for(const s of e[r])t.push(r,s);else t.push(r,e[r]);return t}get rawTrailers(){return[]}setTimeout(e,t){return this}get headersDistinct(){return p$1(this.headers)}get trailersDistinct(){return p$1(this.trailers)}}function p$1(e){const t={};for(const[r,s]of Object.entries(e))r&&(t[r]=(Array.isArray(s)?s:[s]).filter(Boolean));return t}let Ir=class extends Rr{statusCode=200;statusMessage="";upgrading=!1;chunkedEncoding=!1;shouldKeepAlive=!1;useChunkedEncodingByDefault=!1;sendDate=!1;finished=!1;headersSent=!1;strictContentLength=!1;connection=null;socket=null;req;_headers={};constructor(e){super(),this.req=e}assignSocket(e){e._httpMessage=this,this.socket=e,this.connection=e,this.emit("socket",e),this._flush()}_flush(){this.flushHeaders()}detachSocket(e){}writeContinue(e){}writeHead(e,t,r){e&&(this.statusCode=e),"string"==typeof t&&(this.statusMessage=t,t=void 0);const s=r||t;if(s&&!Array.isArray(s))for(const e in s)this.setHeader(e,s[e]);return this.headersSent=!0,this}writeProcessing(){}setTimeout(e,t){return this}appendHeader(e,t){e=e.toLowerCase();const r=this._headers[e],s=[...Array.isArray(r)?r:[r],...Array.isArray(t)?t:[t]].filter(Boolean);return this._headers[e]=s.length>1?s:s[0],this}setHeader(e,t){return this._headers[e.toLowerCase()]=t,this}setHeaders(e){for(const[t,r]of Object.entries(e))this.setHeader(t,r);return this}getHeader(e){return this._headers[e.toLowerCase()]}getHeaders(){return this._headers}getHeaderNames(){return Object.keys(this._headers)}hasHeader(e){return e.toLowerCase()in this._headers}removeHeader(e){delete this._headers[e.toLowerCase()]}addTrailers(e){}flushHeaders(){}writeEarlyHints(e,t){"function"==typeof t&&t()}};const Ar=(()=>{const n=function(){};return n.prototype=Object.create(null),n})();function S$1(e={}){if(e instanceof Headers)return e;const t=new Headers;for(const[r,s]of Object.entries(e))if(void 0!==s){if(Array.isArray(s)){for(const e of s)t.append(r,String(e));continue}t.set(r,String(s))}return t}const Tr=new Set([101,204,205,304]);async function b(e,t){const r=new y,s=new Ir(r);let a;if(r.url=t.url?.toString()||"/",!r.url.startsWith("/")){const e=new URL(r.url);a=e.host,r.url=e.pathname+e.search+e.hash}r.method=t.method||"GET",r.headers=function(e={}){const t=new Ar,r=Array.isArray(e)||function(e){return"function"==typeof e?.entries}(e)?e:Object.entries(e);for(const[e,s]of r)if(s){if(void 0===t[e]){t[e]=s;continue}t[e]=[...Array.isArray(t[e])?t[e]:[t[e]],...Array.isArray(s)?s:[s]]}return t}(t.headers||{}),r.headers.host||(r.headers.host=t.host||a||"localhost"),r.connection.encrypted=r.connection.encrypted||"https"===t.protocol,r.body=t.body||null,r.__unenv__=t.context,await e(r,s);let c=s._data;(Tr.has(s.statusCode)||"HEAD"===r.method.toUpperCase())&&(c=null,delete s._headers["content-length"]);const u={status:s.statusCode,statusText:s.statusMessage,headers:s._headers,body:c};return r.destroy(),s.destroy(),u}function hasProp(e,t){try{return t in e}catch{return!1}}class H3Error extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,t={}){super(e,t),t.cause&&!this.cause&&(this.cause=t.cause)}toJSON(){const e={message:this.message,statusCode:sanitizeStatusCode(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=sanitizeStatusMessage(this.statusMessage)),void 0!==this.data&&(e.data=this.data),e}}function createError(e){if("string"==typeof e)return new H3Error(e);if(isError$2(e))return e;const t=new H3Error(e.message??e.statusMessage??"",{cause:e.cause||e});if(hasProp(e,"stack"))try{Object.defineProperty(t,"stack",{get:()=>e.stack})}catch{try{t.stack=e.stack}catch{}}if(e.data&&(t.data=e.data),e.statusCode?t.statusCode=sanitizeStatusCode(e.statusCode,t.statusCode):e.status&&(t.statusCode=sanitizeStatusCode(e.status,t.statusCode)),e.statusMessage?t.statusMessage=e.statusMessage:e.statusText&&(t.statusMessage=e.statusText),t.statusMessage){const e=t.statusMessage;sanitizeStatusMessage(t.statusMessage)!==e&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return void 0!==e.fatal&&(t.fatal=e.fatal),void 0!==e.unhandled&&(t.unhandled=e.unhandled),t}function isError$2(e){return!0===e?.constructor?.__h3_error__}function getRequestURL(e,t={}){const r=function(e,t={}){if(t.xForwardedHost){const t=e.node.req.headers["x-forwarded-host"];if(t)return t}return e.node.req.headers.host||"localhost"}(e,t),s=function(e,t={}){return!1!==t.xForwardedProto&&"https"===e.node.req.headers["x-forwarded-proto"]||e.node.req.connection?.encrypted?"https":"http"}(e,t),a=(e.node.req.originalUrl||e.path).replace(/^[/\\]+/g,"/");return new URL(a,`${s}://${r}`)}const Nr=Symbol.for("h3RawBody"),Cr=["PATCH","POST","PUT","DELETE"];function readRawBody(e,t="utf8"){!function(e,t){if(!function(e,t){if("string"==typeof t){if(e.method===t)return!0}else if(t.includes(e.method))return!0;return!1}(e,t))throw createError({statusCode:405,statusMessage:"HTTP method is not allowed."})}(e,Cr);const r=e._requestBody||e.web?.request?.body||e.node.req[Nr]||e.node.req.rawBody||e.node.req.body;if(r){const e=Promise.resolve(r).then((e=>Zt.isBuffer(e)?e:"function"==typeof e.pipeTo?new Promise(((t,r)=>{const s=[];e.pipeTo(new WritableStream({write(e){s.push(e)},close(){t(Zt.concat(s))},abort(e){r(e)}})).catch(r)})):"function"==typeof e.pipe?new Promise(((t,r)=>{const s=[];e.on("data",(e=>{s.push(e)})).on("end",(()=>{t(Zt.concat(s))})).on("error",r)})):e.constructor===Object?Zt.from(JSON.stringify(e)):e instanceof URLSearchParams?Zt.from(e.toString()):e instanceof FormData?new Response(e).bytes().then((e=>Zt.from(e))):Zt.from(e)));return t?e.then((e=>e.toString(t))):e}if(!Number.parseInt(e.node.req.headers["content-length"]||"")&&!String(e.node.req.headers["transfer-encoding"]??"").split(",").map((e=>e.trim())).filter(Boolean).includes("chunked"))return Promise.resolve(void 0);const s=e.node.req[Nr]=new Promise(((t,r)=>{const s=[];e.node.req.on("error",(e=>{r(e)})).on("data",(e=>{s.push(e)})).on("end",(()=>{t(Zt.concat(s))}))}));return t?s.then((e=>e.toString(t))):s}function getRequestWebStream(e){if(!Cr.includes(e.method))return;const t=e.web?.request?.body||e._requestBody;if(t)return t;return Nr in e.node.req||"rawBody"in e.node.req||"body"in e.node.req||"__unenv__"in e.node.req?new ReadableStream({async start(t){const r=await readRawBody(e,!1);r&&t.enqueue(r),t.close()}}):new ReadableStream({start:t=>{e.node.req.on("data",(e=>{t.enqueue(e)})),e.node.req.on("end",(()=>{t.close()})),e.node.req.on("error",(e=>{t.error(e)}))}})}function handleCacheHeaders(e,t){const r=["public",...t.cacheControls||[]];let s=!1;if(void 0!==t.maxAge&&r.push("max-age="+ +t.maxAge,"s-maxage="+ +t.maxAge),t.modifiedTime){const r=new Date(t.modifiedTime),a=e.node.req.headers["if-modified-since"];e.node.res.setHeader("last-modified",r.toUTCString()),a&&new Date(a)>=r&&(s=!0)}if(t.etag){e.node.res.setHeader("etag",t.etag);e.node.req.headers["if-none-match"]===t.etag&&(s=!0)}return e.node.res.setHeader("cache-control",r.join(", ")),!!s&&(e.node.res.statusCode=304,e.handled||e.node.res.end(),!0)}const xr={html:"text/html",json:"application/json"},kr=/[^\u0009\u0020-\u007E]/g;function sanitizeStatusMessage(e=""){return e.replace(kr,"")}function sanitizeStatusCode(e,t=200){return e?("string"==typeof e&&(e=Number.parseInt(e,10)),e<100||e>999?t:e):t}function splitCookiesString(e){if(Array.isArray(e))return e.flatMap((e=>splitCookiesString(e)));if("string"!=typeof e)return[];const t=[];let r,s,a,c,u,p=0;const skipWhitespace=()=>{for(;p<e.length&&/\s/.test(e.charAt(p));)p+=1;return p<e.length};for(;p<e.length;){for(r=p,u=!1;skipWhitespace();)if(s=e.charAt(p),","===s){for(a=p,p+=1,skipWhitespace(),c=p;p<e.length&&(s=e.charAt(p),"="!==s&&";"!==s&&","!==s);)p+=1;p<e.length&&"="===e.charAt(p)?(u=!0,p=c,t.push(e.slice(r,a)),r=p):p=a+1}else p+=1;(!u||p>=e.length)&&t.push(e.slice(r))}return t}const Lr=void 0===tr?e=>e():tr;function send(e,t,r){return r&&function(e,t){t&&304!==e.node.res.statusCode&&!e.node.res.getHeader("content-type")&&e.node.res.setHeader("content-type",t)}(e,r),new Promise((r=>{Lr((()=>{e.handled||e.node.res.end(t),r()}))}))}function setResponseStatus(e,t,r){t&&(e.node.res.statusCode=sanitizeStatusCode(t,e.node.res.statusCode)),r&&(e.node.res.statusMessage=sanitizeStatusMessage(r))}function setResponseHeaders(e,t){for(const[r,s]of Object.entries(t))e.node.res.setHeader(r,s)}const Dr=setResponseHeaders;function sendStream(e,t){if(!t||"object"!=typeof t)throw new Error("[h3] Invalid stream provided.");if(e.node.res._data=t,!e.node.res.socket)return e._handled=!0,Promise.resolve();if(hasProp(t,"pipeTo")&&"function"==typeof t.pipeTo)return t.pipeTo(new WritableStream({write(t){e.node.res.write(t)}})).then((()=>{e.node.res.end()}));if(hasProp(t,"pipe")&&"function"==typeof t.pipe)return new Promise(((r,s)=>{t.pipe(e.node.res),t.on&&(t.on("end",(()=>{e.node.res.end(),r()})),t.on("error",(e=>{s(e)}))),e.node.res.on("close",(()=>{t.abort&&t.abort()}))}));throw new Error("[h3] Invalid or incompatible stream provided.")}function sendWebResponse(e,t){for(const[r,s]of t.headers)"set-cookie"===r?e.node.res.appendHeader(r,splitCookiesString(s)):e.node.res.setHeader(r,s);if(t.status&&(e.node.res.statusCode=sanitizeStatusCode(t.status,e.node.res.statusCode)),t.statusText&&(e.node.res.statusMessage=sanitizeStatusMessage(t.statusText)),t.redirected&&e.node.res.setHeader("location",t.url),t.body)return sendStream(e,t.body);e.node.res.end()}const zr=new Set(["PATCH","POST","PUT","DELETE"]),Mr=new Set(["transfer-encoding","accept-encoding","connection","keep-alive","upgrade","expect","host","accept"]);async function proxyRequest(e,t,r={}){let s,a;zr.has(e.method)&&(r.streamRequest?(s=getRequestWebStream(e),a="half"):s=await readRawBody(e,!1).catch((()=>{})));const c=r.fetchOptions?.method||e.method,u=function(e,...t){const r=t.filter(Boolean);if(0===r.length)return e;const s=new Headers(e);for(const e of r){const t=Array.isArray(e)?e:"function"==typeof e.entries?e.entries():Object.entries(e);for(const[e,r]of t)void 0!==r&&s.set(e,r)}return s}(getProxyRequestHeaders(e,{host:t.startsWith("/")}),r.fetchOptions?.headers,r.headers);return async function(e,t,r={}){let s;try{s=await _getFetch(r.fetch)(t,{headers:r.headers,ignoreResponseError:!0,...r.fetchOptions})}catch(e){throw createError({status:502,statusMessage:"Bad Gateway",cause:e})}e.node.res.statusCode=sanitizeStatusCode(s.status,e.node.res.statusCode),e.node.res.statusMessage=sanitizeStatusMessage(s.statusText);const a=[];for(const[t,r]of s.headers.entries())"content-encoding"!==t&&"content-length"!==t&&("set-cookie"!==t?e.node.res.setHeader(t,r):a.push(...splitCookiesString(r)));a.length>0&&e.node.res.setHeader("set-cookie",a.map((e=>(r.cookieDomainRewrite&&(e=rewriteCookieProperty(e,r.cookieDomainRewrite,"domain")),r.cookiePathRewrite&&(e=rewriteCookieProperty(e,r.cookiePathRewrite,"path")),e))));r.onResponse&&await r.onResponse(e,s);if(void 0!==s._data)return s._data;if(e.handled)return;if(!1===r.sendStream){const t=new Uint8Array(await s.arrayBuffer());return e.node.res.end(t)}if(s.body)for await(const t of s.body)e.node.res.write(t);return e.node.res.end()}(e,t,{...r,fetchOptions:{method:c,body:s,duplex:a,...r.fetchOptions,headers:u}})}function getProxyRequestHeaders(e,t){const r=Object.create(null),s=function(e){const t={};for(const r in e.node.req.headers){const s=e.node.req.headers[r];t[r]=Array.isArray(s)?s.filter(Boolean).join(", "):s}return t}(e);for(const e in s)(!Mr.has(e)||"host"===e&&t?.host)&&(r[e]=s[e]);return r}function fetchWithEvent(e,t,r,s){return _getFetch(s?.fetch)(t,{...r,context:r?.context||e.context,headers:{...getProxyRequestHeaders(e,{host:"string"==typeof t&&t.startsWith("/")}),...r?.headers}})}function _getFetch(e){if(e)return e;if(globalThis.fetch)return globalThis.fetch;throw new Error("fetch is not available. Try importing `node-fetch-native/polyfill` for Node.js.")}function rewriteCookieProperty(e,t,r){const s="string"==typeof t?{"*":t}:t;return e.replace(new RegExp(`(;\\s*${r}=)([^;]+)`,"gi"),((e,t,r)=>{let a;if(r in s)a=s[r];else{if(!("*"in s))return e;a=s["*"]}return a?t+a:""}))}class H3Event{__is_event__=!0;node;web;context={};_method;_path;_headers;_requestBody;_handled=!1;_onBeforeResponseCalled;_onAfterResponseCalled;constructor(e,t){this.node={req:e,res:t}}get method(){return this._method||(this._method=(this.node.req.method||"GET").toUpperCase()),this._method}get path(){return this._path||this.node.req.url||"/"}get headers(){return this._headers||(this._headers=function(e){const t=new Headers;for(const[r,s]of Object.entries(e))if(Array.isArray(s))for(const e of s)t.append(r,e);else s&&t.set(r,s);return t}(this.node.req.headers)),this._headers}get handled(){return this._handled||this.node.res.writableEnded||this.node.res.headersSent}respondWith(e){return Promise.resolve(e).then((e=>sendWebResponse(this,e)))}toString(){return`[${this.method}] ${this.path}`}toJSON(){return this.toString()}get req(){return this.node.req}get res(){return this.node.res}}function isEvent(e){return hasProp(e,"__is_event__")}function createEvent(e,t){return new H3Event(e,t)}function defineEventHandler(e){if("function"==typeof e)return e.__is_handler__=!0,e;const t={onRequest:_normalizeArray(e.onRequest),onBeforeResponse:_normalizeArray(e.onBeforeResponse)},_handler=r=>async function(e,t,r){if(r.onRequest)for(const t of r.onRequest)if(await t(e),e.handled)return;const s=await t(e),a={body:s};if(r.onBeforeResponse)for(const t of r.onBeforeResponse)await t(e,a);return a.body}(r,e.handler,t);return _handler.__is_handler__=!0,_handler.__resolve__=e.handler.__resolve__,_handler.__websocket__=e.websocket,_handler}function _normalizeArray(e){return e?Array.isArray(e)?e:[e]:void 0}const Br=defineEventHandler;function isEventHandler(e){return hasProp(e,"__is_handler__")}function toEventHandler(e,t,r){return isEventHandler(e)||console.warn("[h3] Implicit event handler conversion is deprecated. Use `eventHandler()` or `fromNodeMiddleware()` to define event handlers.",r&&"/"!==r?`\n     Route: ${r}`:"",`\n     Handler: ${e}`),e}const lazyEventHandler=function(e){let t,r;const resolveHandler=()=>r?Promise.resolve(r):(t||(t=Promise.resolve(e()).then((e=>{const t=e.default||e;if("function"!=typeof t)throw new TypeError("Invalid lazy handler result. It should be a function:",t);return r={handler:toEventHandler(e.default||e)},r}))),t),s=Br((e=>r?r.handler(e):resolveHandler().then((t=>t.handler(e)))));return s.__resolve__=resolveHandler,s};function createApp(e={}){const t=[],r=function(e,t){const r=t.debug?2:void 0;return Br((async s=>{s.node.req.originalUrl=s.node.req.originalUrl||s.node.req.url||"/";const a=s._path||s.node.req.url||"/";let c;t.onRequest&&await t.onRequest(s);for(const u of e){if(u.route.length>1){if(!a.startsWith(u.route))continue;c=a.slice(u.route.length)||"/"}else c=a;if(u.match&&!u.match(c,s))continue;s._path=c,s.node.req.url=c;const e=await u.handler(s),p=void 0===e?void 0:await e;if(void 0!==p){const e={body:p};return t.onBeforeResponse&&(s._onBeforeResponseCalled=!0,await t.onBeforeResponse(s,e)),await handleHandlerResponse(s,e.body,r),void(t.onAfterResponse&&(s._onAfterResponseCalled=!0,await t.onAfterResponse(s,e)))}if(s.handled)return void(t.onAfterResponse&&(s._onAfterResponseCalled=!0,await t.onAfterResponse(s,void 0)))}if(!s.handled)throw createError({statusCode:404,statusMessage:`Cannot find any path matching ${s.path||"/"}.`});t.onAfterResponse&&(s._onAfterResponseCalled=!0,await t.onAfterResponse(s,void 0))}))}(t,e),s=function(e){return async t=>{let r;for(const s of e){if("/"===s.route&&!s.handler.__resolve__)continue;if(!t.startsWith(s.route))continue;if(r=t.slice(s.route.length)||"/",s.match&&!s.match(r,void 0))continue;let e={route:s.route,handler:s.handler};if(e.handler.__resolve__){const t=await e.handler.__resolve__(r);if(!t)continue;e={...e,...t,route:joinURL(e.route||"/",t.route||"/")}}return e}}}(t);r.__resolve__=s;const a=function(e){let t;return()=>(t||(t=e()),t)}((()=>{return t=s,{...e.websocket,async resolve(e){const r=e.request?.url||e.url||"/",{pathname:s}="string"==typeof r?parseURL(r):r,a=await t(s);return a?.handler?.__websocket__||{}}};var t})),c={use:(e,t,r)=>use(c,e,t,r),resolve:s,handler:r,stack:t,options:e,get websocket(){return a()}};return c}function use(e,t,r,s){if(Array.isArray(t))for(const a of t)use(e,a,r,s);else if(Array.isArray(r))for(const a of r)use(e,t,a,s);else"string"==typeof t?e.stack.push(normalizeLayer({...s,route:t,handler:r})):"function"==typeof t?e.stack.push(normalizeLayer({...r,handler:t})):e.stack.push(normalizeLayer({...t}));return e}function normalizeLayer(e){let t=e.handler;return t.handler&&(t=t.handler),e.lazy?t=lazyEventHandler(t):isEventHandler(t)||(t=toEventHandler(t,0,e.route)),{route:withoutTrailingSlash(e.route),match:e.match,handler:t}}function handleHandlerResponse(e,t,r){if(null===t)return function(e,t){if(e.handled)return;t||200===e.node.res.statusCode||(t=e.node.res.statusCode);const r=sanitizeStatusCode(t,204);204===r&&e.node.res.removeHeader("content-length"),e.node.res.writeHead(r),e.node.res.end()}(e);if(t){if(s=t,"undefined"!=typeof Response&&s instanceof Response)return sendWebResponse(e,t);if(function(e){if(!e||"object"!=typeof e)return!1;if("function"==typeof e.pipe){if("function"==typeof e._read)return!0;if("function"==typeof e.abort)return!0}return"function"==typeof e.pipeTo}(t))return sendStream(e,t);if(t.buffer)return send(e,t);if(t.arrayBuffer&&"function"==typeof t.arrayBuffer)return t.arrayBuffer().then((r=>send(e,Zt.from(r),t.type)));if(t instanceof Error)throw createError(t);if("function"==typeof t.end)return!0}var s;const a=typeof t;if("string"===a)return send(e,t,xr.html);if("object"===a||"boolean"===a||"number"===a)return send(e,JSON.stringify(t,void 0,r),xr.json);if("bigint"===a)return send(e,t.toString(),xr.json);throw createError({statusCode:500,statusMessage:`[h3] Cannot send ${a} as response.`})}const $r=["connect","delete","get","head","options","post","put","trace","patch"];function toNodeListener(e){return async function(t,r){const s=createEvent(t,r);try{await e.handler(s)}catch(t){const r=createError(t);if(isError$2(t)||(r.unhandled=!0),setResponseStatus(s,r.statusCode,r.statusMessage),e.options.onError&&await e.options.onError(r,s),s.handled)return;(r.unhandled||r.fatal)&&console.error("[h3]",r.fatal?"[fatal]":"[unhandled]",r),e.options.onBeforeResponse&&!s._onBeforeResponseCalled&&await e.options.onBeforeResponse(s,{body:r}),await function(e,t,r){if(e.handled)return;const s=isError$2(t)?t:createError(t),a={statusCode:s.statusCode,statusMessage:s.statusMessage,stack:[],data:s.data};if(r&&(a.stack=(s.stack||"").split("\n").map((e=>e.trim()))),e.handled)return;setResponseStatus(e,Number.parseInt(s.statusCode),s.statusMessage),e.node.res.setHeader("content-type",xr.json),e.node.res.end(JSON.stringify(a,void 0,2))}(s,r,!!e.options.debug),e.options.onAfterResponse&&!s._onAfterResponseCalled&&await e.options.onAfterResponse(s,{body:r})}}}function flatHooks(e,t={},r){for(const s in e){const a=e[s],c=r?`${r}:${s}`:s;"object"==typeof a&&null!==a?flatHooks(a,t,c):"function"==typeof a&&(t[c]=a)}return t}const jr={run:e=>e()},qr=void 0!==console.createTask?console.createTask:()=>jr;function serialTaskCaller(e,t){const r=t.shift(),s=qr(r);return e.reduce(((e,r)=>e.then((()=>s.run((()=>r(...t)))))),Promise.resolve())}function parallelTaskCaller(e,t){const r=t.shift(),s=qr(r);return Promise.all(e.map((e=>s.run((()=>e(...t))))))}function callEachWith(e,t){for(const r of[...e])r(t)}class Hookable{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,t,r={}){if(!e||"function"!=typeof t)return()=>{};const s=e;let a;for(;this._deprecatedHooks[e];)a=this._deprecatedHooks[e],e=a.to;if(a&&!r.allowDeprecated){let e=a.message;e||(e=`${s} hook has been deprecated`+(a.to?`, please use ${a.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(e)||(console.warn(e),this._deprecatedMessages.add(e))}if(!t.name)try{Object.defineProperty(t,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(t),()=>{t&&(this.removeHook(e,t),t=void 0)}}hookOnce(e,t){let r,_function=(...e)=>("function"==typeof r&&r(),r=void 0,_function=void 0,t(...e));return r=this.hook(e,_function),r}removeHook(e,t){if(this._hooks[e]){const r=this._hooks[e].indexOf(t);-1!==r&&this._hooks[e].splice(r,1),0===this._hooks[e].length&&delete this._hooks[e]}}deprecateHook(e,t){this._deprecatedHooks[e]="string"==typeof t?{to:t}:t;const r=this._hooks[e]||[];delete this._hooks[e];for(const t of r)this.hook(e,t)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const t in e)this.deprecateHook(t,e[t])}addHooks(e){const t=flatHooks(e),r=Object.keys(t).map((e=>this.hook(e,t[e])));return()=>{for(const e of r.splice(0,r.length))e()}}removeHooks(e){const t=flatHooks(e);for(const e in t)this.removeHook(e,t[e])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...t){return t.unshift(e),this.callHookWith(serialTaskCaller,e,...t)}callHookParallel(e,...t){return t.unshift(e),this.callHookWith(parallelTaskCaller,e,...t)}callHookWith(e,t,...r){const s=this._before||this._after?{name:t,args:r,context:{}}:void 0;this._before&&callEachWith(this._before,s);const a=e(t in this._hooks?[...this._hooks[t]]:[],r);return a instanceof Promise?a.finally((()=>{this._after&&s&&callEachWith(this._after,s)})):(this._after&&s&&callEachWith(this._after,s),a)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(void 0!==this._before){const t=this._before.indexOf(e);-1!==t&&this._before.splice(t,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(void 0!==this._after){const t=this._after.indexOf(e);-1!==t&&this._after.splice(t,1)}}}}const Ur=globalThis;class FetchError extends Error{constructor(e,t){super(e,t),this.name="FetchError",t?.cause&&!this.cause&&(this.cause=t.cause)}}const Hr=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function isPayloadMethod(e="GET"){return Hr.has(e.toUpperCase())}const Fr=new Set(["image/svg","application/xml","application/xhtml","application/html"]),Vr=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function resolveFetchOptions(e,t,r,s){const a=function(e,t,r){if(!t)return new r(e);const s=new r(t);if(e)for(const[t,a]of Symbol.iterator in e||Array.isArray(e)?e:new r(e))s.set(t,a);return s}(t?.headers??e?.headers,r?.headers,s);let c;return(r?.query||r?.params||t?.params||t?.query)&&(c={...r?.params,...r?.query,...t?.params,...t?.query}),{...r,...t,query:c,params:c,headers:a}}async function callHooks(e,t){if(t)if(Array.isArray(t))for(const r of t)await r(e);else await t(e)}const Wr=new Set([408,409,425,429,500,502,503,504]),Kr=new Set([101,204,205,304]);function createFetch(e={}){const{fetch:t=globalThis.fetch,Headers:r=globalThis.Headers,AbortController:s=globalThis.AbortController}=e;async function onError(e){const t=e.error&&"AbortError"===e.error.name&&!e.options.timeout||!1;if(!1!==e.options.retry&&!t){let t;t="number"==typeof e.options.retry?e.options.retry:isPayloadMethod(e.options.method)?0:1;const r=e.response&&e.response.status||500;if(t>0&&(Array.isArray(e.options.retryStatusCodes)?e.options.retryStatusCodes.includes(r):Wr.has(r))){const r="function"==typeof e.options.retryDelay?e.options.retryDelay(e):e.options.retryDelay||0;return r>0&&await new Promise((e=>setTimeout(e,r))),$fetchRaw(e.request,{...e.options,retry:t-1})}}const r=function(e){const t=e.error?.message||e.error?.toString()||"",r=e.request?.method||e.options?.method||"GET",s=e.request?.url||String(e.request)||"/",a=`[${r}] ${JSON.stringify(s)}`,c=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",u=new FetchError(`${a}: ${c}${t?` ${t}`:""}`,e.error?{cause:e.error}:void 0);for(const t of["request","options","response"])Object.defineProperty(u,t,{get:()=>e[t]});for(const[t,r]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(u,t,{get:()=>e.response&&e.response[r]});return u}(e);throw Error.captureStackTrace&&Error.captureStackTrace(r,$fetchRaw),r}const $fetchRaw=async function(a,c={}){const u={request:a,options:resolveFetchOptions(a,c,e.defaults,r),response:void 0,error:void 0};let p;if(u.options.method&&(u.options.method=u.options.method.toUpperCase()),u.options.onRequest&&await callHooks(u,u.options.onRequest),"string"==typeof u.request&&(u.options.baseURL&&(u.request=function(e,t){if(isEmptyURL(t)||hasProtocol(e))return e;const r=withoutTrailingSlash(t);return e.startsWith(r)?e:joinURL(r,e)}(u.request,u.options.baseURL)),u.options.query&&(u.request=withQuery(u.request,u.options.query),delete u.options.query),"query"in u.options&&delete u.options.query,"params"in u.options&&delete u.options.params),u.options.body&&isPayloadMethod(u.options.method)&&(!function(e){if(void 0===e)return!1;const t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}(u.options.body)?("pipeTo"in u.options.body&&"function"==typeof u.options.body.pipeTo||"function"==typeof u.options.body.pipe)&&("duplex"in u.options||(u.options.duplex="half")):(u.options.body="string"==typeof u.options.body?u.options.body:JSON.stringify(u.options.body),u.options.headers=new r(u.options.headers||{}),u.options.headers.has("content-type")||u.options.headers.set("content-type","application/json"),u.options.headers.has("accept")||u.options.headers.set("accept","application/json"))),!u.options.signal&&u.options.timeout){const e=new s;p=setTimeout((()=>{const t=new Error("[TimeoutError]: The operation was aborted due to timeout");t.name="TimeoutError",t.code=23,e.abort(t)}),u.options.timeout),u.options.signal=e.signal}try{u.response=await t(u.request,u.options)}catch(e){return u.error=e,u.options.onRequestError&&await callHooks(u,u.options.onRequestError),await onError(u)}finally{p&&clearTimeout(p)}if((u.response.body||u.response._bodyInit)&&!Kr.has(u.response.status)&&"HEAD"!==u.options.method){const e=(u.options.parseResponse?"json":u.options.responseType)||function(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return Vr.test(t)?"json":Fr.has(t)||t.startsWith("text/")?"text":"blob"}(u.response.headers.get("content-type")||"");switch(e){case"json":{const e=await u.response.text(),t=u.options.parseResponse||destr;u.response._data=t(e);break}case"stream":u.response._data=u.response.body||u.response._bodyInit;break;default:u.response._data=await u.response[e]()}}return u.options.onResponse&&await callHooks(u,u.options.onResponse),!u.options.ignoreResponseError&&u.response.status>=400&&u.response.status<600?(u.options.onResponseError&&await callHooks(u,u.options.onResponseError),await onError(u)):u.response},$fetch=async function(e,t){return(await $fetchRaw(e,t))._data};return $fetch.raw=$fetchRaw,$fetch.native=(...e)=>t(...e),$fetch.create=(t={},r={})=>createFetch({...e,...r,defaults:{...e.defaults,...r.defaults,...t}}),$fetch}const Gr=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if(void 0!==Ur)return Ur;throw new Error("unable to locate global object")}(),Yr=Gr.fetch?(...e)=>Gr.fetch(...e):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),Jr=Gr.Headers,Qr=Gr.AbortController;function asyncCall(e,...t){try{return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}var r}function stringify$1(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return stringify$1(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}createFetch({fetch:Yr,Headers:Jr,AbortController:Qr});const Xr="base64:";function serializeRaw(e){return"string"==typeof e?e:Xr+function(e){if(globalThis.Buffer)return Zt.from(e).toString("base64");return globalThis.btoa(String.fromCodePoint(...e))}(e)}function deserializeRaw(e){return"string"!=typeof e?e:e.startsWith(Xr)?function(e){if(globalThis.Buffer)return Zt.from(e,"base64");return Uint8Array.from(globalThis.atob(e),(e=>e.codePointAt(0)))}(e.slice(7)):e}const Zr=["has","hasItem","get","getItem","getItemRaw","set","setItem","setItemRaw","del","remove","removeItem","getMeta","setMeta","removeMeta","getKeys","clear","mount","unmount"];function normalizeKey$1(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function joinKeys(...e){return normalizeKey$1(e.join(":"))}function normalizeBaseKey(e){return(e=normalizeKey$1(e))?e+":":""}const memory=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function watch$2(e,t,r){return e.watch?e.watch(((e,s)=>t(e,r+s))):()=>{}}async function dispose(e){"function"==typeof e.dispose&&await asyncCall(e.dispose)}const en={},normalizeKey=function(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""},tn={getKeys:()=>Promise.resolve(Object.keys(en)),hasItem:e=>(e=normalizeKey(e),Promise.resolve(e in en)),getItem:e=>(e=normalizeKey(e),Promise.resolve(en[e]?en[e].import():null)),getMeta:e=>(e=normalizeKey(e),Promise.resolve(en[e]?en[e].meta:{}))},rn=function(e={}){const t={mounts:{"":e.driver||memory()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},getMount=e=>{for(const r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},getMounts=(e,r)=>t.mountpoints.filter((t=>t.startsWith(e)||r&&e.startsWith(t))).map((r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]}))),onChange=(e,r)=>{if(t.watching){r=normalizeKey$1(r);for(const s of t.watchListeners)s(e,r)}},stopWatch=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},runBatch=(e,t,r)=>{const s=new Map,getBatch=e=>{let t=s.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},s.set(e.base,t)),t};for(const r of e){const e="string"==typeof r,s=normalizeKey$1(e?r:r.key),a=e?void 0:r.value,c=e||!r.options?t:{...t,...r.options},u=getMount(s);getBatch(u).items.push({key:s,value:a,relativeKey:u.relativeKey,options:c})}return Promise.all([...s.values()].map((e=>r(e)))).then((e=>e.flat()))},r={hasItem(e,t={}){e=normalizeKey$1(e);const{relativeKey:r,driver:s}=getMount(e);return asyncCall(s.hasItem,r,t)},getItem(e,t={}){e=normalizeKey$1(e);const{relativeKey:r,driver:s}=getMount(e);return asyncCall(s.getItem,r,t).then((e=>destr(e)))},getItems:(e,t={})=>runBatch(e,t,(e=>e.driver.getItems?asyncCall(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:joinKeys(e.base,t.key),value:destr(t.value)}))))):Promise.all(e.items.map((t=>asyncCall(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:destr(e)})))))))),getItemRaw(e,t={}){e=normalizeKey$1(e);const{relativeKey:r,driver:s}=getMount(e);return s.getItemRaw?asyncCall(s.getItemRaw,r,t):asyncCall(s.getItem,r,t).then((e=>deserializeRaw(e)))},async setItem(e,t,s={}){if(void 0===t)return r.removeItem(e);e=normalizeKey$1(e);const{relativeKey:a,driver:c}=getMount(e);c.setItem&&(await asyncCall(c.setItem,a,stringify$1(t),s),c.watch||onChange("update",e))},async setItems(e,t){await runBatch(e,t,(async e=>{if(e.driver.setItems)return asyncCall(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:stringify$1(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>asyncCall(e.driver.setItem,t.relativeKey,stringify$1(t.value),t.options))))}))},async setItemRaw(e,t,s={}){if(void 0===t)return r.removeItem(e,s);e=normalizeKey$1(e);const{relativeKey:a,driver:c}=getMount(e);if(c.setItemRaw)await asyncCall(c.setItemRaw,a,t,s);else{if(!c.setItem)return;await asyncCall(c.setItem,a,serializeRaw(t),s)}c.watch||onChange("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=normalizeKey$1(e);const{relativeKey:r,driver:s}=getMount(e);s.removeItem&&(await asyncCall(s.removeItem,r,t),(t.removeMeta||t.removeMata)&&await asyncCall(s.removeItem,r+"$",t),s.watch||onChange("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=normalizeKey$1(e);const{relativeKey:r,driver:s}=getMount(e),a=Object.create(null);if(s.getMeta&&Object.assign(a,await asyncCall(s.getMeta,r,t)),!t.nativeOnly){const e=await asyncCall(s.getItem,r+"$",t).then((e=>destr(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(a,e))}return a},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=normalizeBaseKey(e);const r=getMounts(e,!0);let s=[];const a=[];let c=!0;for(const e of r){e.driver.flags?.maxDepth||(c=!1);const r=await asyncCall(e.driver.getKeys,e.relativeBase,t);for(const t of r){const r=e.mountpoint+normalizeKey$1(t);s.some((e=>r.startsWith(e)))||a.push(r)}s=[e.mountpoint,...s.filter((t=>!t.startsWith(e.mountpoint)))]}const u=void 0!==t.maxDepth&&!c;return a.filter((r=>(!u||function(e,t){if(void 0===t)return!0;let r=0,s=e.indexOf(":");for(;s>-1;)r++,s=e.indexOf(":",s+1);return r<=t}(r,t.maxDepth))&&function(e,t){return t?e.startsWith(t)&&"$"!==e[e.length-1]:"$"!==e[e.length-1]}(r,e)))},async clear(e,t={}){e=normalizeBaseKey(e),await Promise.all(getMounts(e,!1).map((async e=>{if(e.driver.clear)return asyncCall(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const r=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(r.map((r=>e.driver.removeItem(r,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>dispose(e))))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await watch$2(t.mounts[e],onChange,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await stopWatch()}),async unwatch(){t.watchListeners=[],await stopWatch()},mount(e,s){if((e=normalizeBaseKey(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=s,t.watching&&Promise.resolve(watch$2(s,onChange,e)).then((r=>{t.unwatch[e]=r})).catch(console.error),r},async unmount(e,r=!0){(e=normalizeBaseKey(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),r&&await dispose(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=normalizeKey$1(e)+":";const t=getMount(e);return{driver:t.driver,base:t.base}},getMounts(e="",t={}){e=normalizeKey$1(e);return getMounts(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))},keys:(e,t={})=>r.getKeys(e,t),get:(e,t={})=>r.getItem(e,t),set:(e,t,s={})=>r.setItem(e,t,s),has:(e,t={})=>r.hasItem(e,t),del:(e,t={})=>r.removeItem(e,t),remove:(e,t={})=>r.removeItem(e,t)};return r}({});function useStorage(e=""){return e?function(e,t){if(!(t=normalizeBaseKey(t)))return e;const r={...e};for(const s of Zr)r[s]=(r="",...a)=>e[s](t+r,...a);return r.getKeys=(r="",...s)=>e.getKeys(t+r,...s).then((e=>e.map((e=>e.slice(t.length))))),r.getItems=async(r,s)=>{const a=r.map((e=>"string"==typeof e?t+e:{...e,key:t+e.key}));return(await e.getItems(a,s)).map((e=>({key:e.key.slice(t.length),value:e.value})))},r.setItems=async(r,s)=>{const a=r.map((e=>({key:t+e.key,value:e.value,options:e.options})));return e.setItems(a,s)},r}(rn,e):rn}rn.mount("/assets",tn);const nn=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],on=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],sn=[];class k{_data=new l;_hash=new l([...nn]);_nDataBytes=0;_minBufferSize=0;finalize(e){e&&this._append(e);const t=8*this._nDataBytes,r=8*this._data.sigBytes;return this._data.words[r>>>5]|=128<<24-r%32,this._data.words[14+(r+64>>>9<<4)]=Math.floor(t/4294967296),this._data.words[15+(r+64>>>9<<4)]=t,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash}_doProcessBlock(e,t){const r=this._hash.words;let s=r[0],a=r[1],c=r[2],u=r[3],p=r[4],d=r[5],h=r[6],m=r[7];for(let r=0;r<64;r++){if(r<16)sn[r]=0|e[t+r];else{const e=sn[r-15],t=(e<<25|e>>>7)^(e<<14|e>>>18)^e>>>3,s=sn[r-2],a=(s<<15|s>>>17)^(s<<13|s>>>19)^s>>>10;sn[r]=t+sn[r-7]+a+sn[r-16]}const g=s&a^s&c^a&c,v=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),S=m+((p<<26|p>>>6)^(p<<21|p>>>11)^(p<<7|p>>>25))+(p&d^~p&h)+on[r]+sn[r];m=h,h=d,d=p,p=u+S|0,u=c,c=a,a=s,s=S+(v+g)|0}r[0]=r[0]+s|0,r[1]=r[1]+a|0,r[2]=r[2]+c|0,r[3]=r[3]+u|0,r[4]=r[4]+p|0,r[5]=r[5]+d|0,r[6]=r[6]+h|0,r[7]=r[7]+m|0}_append(e){"string"==typeof e&&(e=l.fromUtf8(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(e){let t,r=this._data.sigBytes/64;r=e?Math.ceil(r):Math.max((0|r)-this._minBufferSize,0);const s=16*r,a=Math.min(4*s,this._data.sigBytes);if(s){for(let e=0;e<s;e+=16)this._doProcessBlock(this._data.words,e);t=this._data.words.splice(0,s),this._data.sigBytes-=a}return new l(t,a)}}class l{words;sigBytes;constructor(e,t){e=this.words=e||[],this.sigBytes=void 0===t?4*e.length:t}static fromUtf8(e){const t=unescape(encodeURIComponent(e)),r=t.length,s=[];for(let e=0;e<r;e++)s[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new l(s,r)}toBase64(){const e=[];for(let t=0;t<this.sigBytes;t+=3){const r=(this.words[t>>>2]>>>24-t%4*8&255)<<16|(this.words[t+1>>>2]>>>24-(t+1)%4*8&255)<<8|this.words[t+2>>>2]>>>24-(t+2)%4*8&255;for(let s=0;s<4&&8*t+6*s<8*this.sigBytes;s++)e.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(r>>>6*(3-s)&63))}return e.join("")}concat(e){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let t=0;t<e.sigBytes;t++){const r=e.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=r<<24-(this.sigBytes+t)%4*8}else for(let t=0;t<e.sigBytes;t+=4)this.words[this.sigBytes+t>>>2]=e.words[t>>>2];this.sigBytes+=e.sigBytes}}const an=(()=>{class Hasher2{buff="";#o=new Map;write(e){this.buff+=e}dispatch(e){return this[null===e?"null":typeof e](e)}object(e){if(e&&"function"==typeof e.toJSON)return this.object(e.toJSON());const t=Object.prototype.toString.call(e);let r="";const s=t.length;r=s<10?"unknown:["+t+"]":t.slice(8,s-1),r=r.toLowerCase();let a=null;if(void 0!==(a=this.#o.get(e)))return this.dispatch("[CIRCULAR:"+a+"]");if(this.#o.set(e,this.#o.size),void 0!==Zt&&Zt.isBuffer&&Zt.isBuffer(e))return this.write("buffer:"),this.write(e.toString("utf8"));if("object"!==r&&"function"!==r&&"asyncfunction"!==r)this[r]?this[r](e):this.unknown(e,r);else{const t=Object.keys(e).sort(),r=[];this.write("object:"+(t.length+r.length)+":");const dispatchForKey=t=>{this.dispatch(t),this.write(":"),this.dispatch(e[t]),this.write(",")};for(const e of t)dispatchForKey(e);for(const e of r)dispatchForKey(e)}}array(e,t){if(t=void 0!==t&&t,this.write("array:"+e.length+":"),!t||e.length<=1){for(const t of e)this.dispatch(t);return}const r=new Map,s=e.map((e=>{const t=new Hasher2;t.dispatch(e);for(const[e,s]of t.#o)r.set(e,s);return t.toString()}));return this.#o=r,s.sort(),this.array(s,!1)}date(e){return this.write("date:"+e.toJSON())}symbol(e){return this.write("symbol:"+e.toString())}unknown(e,t){if(this.write(t),e)return this.write(":"),e&&"function"==typeof e.entries?this.array([...e.entries()],!0):void 0}error(e){return this.write("error:"+e.toString())}boolean(e){return this.write("bool:"+e)}string(e){this.write("string:"+e.length+":"),this.write(e)}function(e){this.write("fn:"),!function(e){if("function"!=typeof e)return!1;return"[native code] }"===Function.prototype.toString.call(e).slice(-15)}(e)?this.dispatch(e.toString()):this.dispatch("[native]")}number(e){return this.write("number:"+e)}null(){return this.write("Null")}undefined(){return this.write("Undefined")}regexp(e){return this.write("regex:"+e.toString())}arraybuffer(e){return this.write("arraybuffer:"),this.dispatch(new Uint8Array(e))}url(e){return this.write("url:"+e.toString())}map(e){this.write("map:");const t=[...e];return this.array(t,!1)}set(e){this.write("set:");const t=[...e];return this.array(t,!1)}bigint(e){return this.write("bigint:"+e.toString())}}for(const e of["uint8array","uint8clampedarray","unt8array","uint16array","unt16array","uint32array","unt32array","float32array","float64array"])Hasher2.prototype[e]=function(t){return this.write(e+":"),this.array([...t],!1)};return Hasher2})();function hash$1(e){return function(e){return(new k).finalize(e).toBase64()}("string"==typeof e?e:function(e){const t=new an;return t.dispatch(e),t.buff}(e)).replace(/[-_]/g,"").slice(0,10)}function defineCachedFunction(e,t={}){t={name:"_",base:"/cache",swr:!0,maxAge:1,...t};const r={},s=t.group||"nitro/functions",a=t.name||e.name||"_",c=t.integrity||hash$1([e,t]),u=t.validate||(e=>void 0!==e.value);return async(...p)=>{if(await(t.shouldBypassCache?.(...p)))return e(...p);const d=await(t.getKey||getKey)(...p),h=await(t.shouldInvalidateCache?.(...p)),m=await async function(e,p,d,h){const m=[t.base,s,a,e+".json"].filter(Boolean).join(":").replace(/:\/$/,":index");let g=await useStorage().getItem(m).catch((e=>{console.error("[cache] Cache read error.",e),useNitroApp().captureError(e,{event:h,tags:["cache"]})}))||{};if("object"!=typeof g){g={};const e=new Error("Malformed data read from cache.");console.error("[cache]",e),useNitroApp().captureError(e,{event:h,tags:["cache"]})}const v=1e3*(t.maxAge??0);v&&(g.expires=Date.now()+v);const S=d||g.integrity!==c||v&&Date.now()-(g.mtime||0)>v||!1===u(g),w=S?(async()=>{const s=r[e];s||(void 0!==g.value&&(t.staleMaxAge||0)>=0&&!1===t.swr&&(g.value=void 0,g.integrity=void 0,g.mtime=void 0,g.expires=void 0),r[e]=Promise.resolve(p()));try{g.value=await r[e]}catch(t){throw s||delete r[e],t}if(!s&&(g.mtime=Date.now(),g.integrity=c,delete r[e],!1!==u(g))){let e;t.maxAge&&!t.swr&&(e={ttl:t.maxAge});const r=useStorage().setItem(m,g,e).catch((e=>{console.error("[cache] Cache write error.",e),useNitroApp().captureError(e,{event:h,tags:["cache"]})}));h?.waitUntil&&h.waitUntil(r)}})():Promise.resolve();return void 0===g.value?await w:S&&h&&h.waitUntil&&h.waitUntil(w),t.swr&&!1!==u(g)?(w.catch((e=>{console.error("[cache] SWR handler error.",e),useNitroApp().captureError(e,{event:h,tags:["cache"]})})),g):w.then((()=>g))}(d,(()=>e(...p)),h,p[0]&&isEvent(p[0])?p[0]:void 0);let g=m.value;return t.transform&&(g=await t.transform(m,...p)||g),g}}function getKey(...e){return e.length>0?hash$1(e):""}function escapeKey(e){return String(e).replace(/\W/g,"")}function cloneWithProxy(e,t){return new Proxy(e,{get:(e,r,s)=>r in t?t[r]:Reflect.get(e,r,s),set:(e,r,s,a)=>r in t?(t[r]=s,!0):Reflect.set(e,r,s,a)})}const cachedEventHandler=function(e,t={name:"_",base:"/cache",swr:!0,maxAge:1}){const r=(t.varies||[]).filter(Boolean).map((e=>e.toLowerCase())).sort(),s={...t,getKey:async e=>{const s=await(t.getKey?.(e));if(s)return escapeKey(s);const a=e.node.req.originalUrl||e.node.req.url||e.path;let c;try{c=escapeKey(decodeURI(parseURL(a).pathname)).slice(0,16)||"index"}catch{c="-"}return[`${c}.${hash$1(a)}`,...r.map((t=>[t,e.node.req.headers[t]])).map((([e,t])=>`${escapeKey(e)}.${hash$1(t)}`))].join(":")},validate:e=>!!e.value&&(!(e.value.code>=400)&&(void 0!==e.value.body&&("undefined"!==e.value.headers.etag&&"undefined"!==e.value.headers["last-modified"]))),group:t.group||"nitro/handlers",integrity:t.integrity||hash$1([e,t])},a=function(e,t={}){return defineCachedFunction(e,t)}((async a=>{const c={};for(const e of r){const t=a.node.req.headers[e];void 0!==t&&(c[e]=t)}const u=cloneWithProxy(a.node.req,{headers:c}),p={};let d;const h=createEvent(u,cloneWithProxy(a.node.res,{statusCode:200,writableEnded:!1,writableFinished:!1,headersSent:!1,closed:!1,getHeader:e=>p[e],setHeader(e,t){return p[e]=t,this},getHeaderNames:()=>Object.keys(p),hasHeader:e=>e in p,removeHeader(e){delete p[e]},getHeaders:()=>p,end(e,t,r){return"string"==typeof e&&(d=e),"function"==typeof t&&t(),"function"==typeof r&&r(),this},write:(e,t,r)=>("string"==typeof e&&(d=e),"function"==typeof t&&t(void 0),"function"==typeof r&&r(),!0),writeHead(e,t){if(this.statusCode=e,t){if(Array.isArray(t)||"string"==typeof t)throw new TypeError("Raw headers  is not supported.");for(const e in t){const r=t[e];void 0!==r&&this.setHeader(e,r)}}return this}}));h.fetch=(e,t)=>fetchWithEvent(h,e,t,{fetch:useNitroApp().localFetch}),h.$fetch=(e,t)=>fetchWithEvent(h,e,t,{fetch:globalThis.$fetch}),h.waitUntil=a.waitUntil,h.context=a.context,h.context.cache={options:s};const m=await e(h)||d,g=h.node.res.getHeaders();g.etag=String(g.Etag||g.etag||`W/"${hash$1(m)}"`),g["last-modified"]=String(g["Last-Modified"]||g["last-modified"]||(new Date).toUTCString());const v=[];t.swr?(t.maxAge&&v.push(`s-maxage=${t.maxAge}`),t.staleMaxAge?v.push(`stale-while-revalidate=${t.staleMaxAge}`):v.push("stale-while-revalidate")):t.maxAge&&v.push(`max-age=${t.maxAge}`),v.length>0&&(g["cache-control"]=v.join(", "));return{code:h.node.res.statusCode,headers:g,body:m}}),s);return defineEventHandler((async r=>{if(t.headersOnly){if(handleCacheHeaders(r,{maxAge:t.maxAge}))return;return e(r)}const s=await a(r);if(r.node.res.headersSent||r.node.res.writableEnded)return s.body;if(!handleCacheHeaders(r,{modifiedTime:new Date(s.headers["last-modified"]),etag:s.headers.etag,maxAge:t.maxAge})){r.node.res.statusCode=s.code;for(const e in s.headers){const t=s.headers[e];"set-cookie"===e?r.node.res.appendHeader(e,splitCookiesString(t)):void 0!==t&&r.node.res.setHeader(e,t)}return s.body}}))};function klona(e){if("object"!=typeof e)return e;var t,r,s=Object.prototype.toString.call(e);if("[object Object]"===s){if(e.constructor!==Object&&"function"==typeof e.constructor)for(t in r=new e.constructor,e)e.hasOwnProperty(t)&&r[t]!==e[t]&&(r[t]=klona(e[t]));else for(t in r={},e)"__proto__"===t?Object.defineProperty(r,t,{value:klona(e[t]),configurable:!0,enumerable:!0,writable:!0}):r[t]=klona(e[t]);return r}if("[object Array]"===s){for(t=e.length,r=Array(t);t--;)r[t]=klona(e[t]);return r}return"[object Set]"===s?(r=new Set,e.forEach((function(e){r.add(klona(e))})),r):"[object Map]"===s?(r=new Map,e.forEach((function(e,t){r.set(klona(t),klona(e))})),r):"[object Date]"===s?new Date(+e):"[object RegExp]"===s?((r=new RegExp(e.source,e.flags)).lastIndex=e.lastIndex,r):"[object DataView]"===s?new e.constructor(klona(e.buffer)):"[object ArrayBuffer]"===s?e.slice(0):"Array]"===s.slice(-6)?new e.constructor(e):e}const cn=_r({}),ln=/\d/,un=["-","_","/","."];function isUppercase(e=""){if(!ln.test(e))return e!==e.toLowerCase()}function kebabCase(e,t){return e?(Array.isArray(e)?e:function(e){const t=un,r=[];if(!e||"string"!=typeof e)return r;let s,a,c="";for(const u of e){const e=t.includes(u);if(!0===e){r.push(c),c="",s=void 0;continue}const p=isUppercase(u);if(!1===a){if(!1===s&&!0===p){r.push(c),c=u,s=p;continue}if(!0===s&&!1===p&&c.length>1){const e=c.at(-1);r.push(c.slice(0,Math.max(0,c.length-1))),c=e+u,s=p;continue}}c+=u,s=p,a=e}return r.push(c),r}(e)).map((e=>e.toLowerCase())).join(t):""}function getEnv(e,t){const r=(s=e,kebabCase(s||"","_")).toUpperCase();var s;return destr(q.env[t.prefix+r]??q.env[t.altPrefix+r])}function _isObject(e){return"object"==typeof e&&!Array.isArray(e)}const pn=/\{\{([^{}]*)\}\}/g;const dn={app:{baseURL:"/"},nitro:{routeRules:{}}},fn={prefix:"NITRO_",altPrefix:dn.nitro.envPrefix??q.env.NITRO_ENV_PREFIX??"_",envExpansion:dn.nitro.envExpansion??q.env.NITRO_ENV_EXPANSION??!1},hn=_deepFreeze(function applyEnv(e,t,r=""){for(const s in e){const a=r?`${r}_${s}`:s,c=getEnv(a,t);_isObject(e[s])?_isObject(c)?(e[s]={...e[s],...c},applyEnv(e[s],t,a)):void 0===c?applyEnv(e[s],t,a):e[s]=c??e[s]:e[s]=c??e[s],t.envExpansion&&"string"==typeof e[s]&&(e[s]=e[s].replace(pn,((e,t)=>q.env[t]||e)))}return e}(klona(dn),fn));function useRuntimeConfig(e){return hn}function _deepFreeze(e){const t=Object.getOwnPropertyNames(e);for(const r of t){const t=e[r];t&&"object"==typeof t&&_deepFreeze(t)}return Object.freeze(e)}_deepFreeze(klona(cn)),new Proxy(Object.create(null),{get:(e,t)=>{console.warn("Please use `useRuntimeConfig()` instead of accessing config directly.");const r=useRuntimeConfig();if(t in r)return r[t]}});const mn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==Ur?Ur:{},yn="__unctx__",gn=mn[yn]||(mn[yn]=function(e={}){const t={};return{get:(r,s={})=>(t[r]||(t[r]=function(e={}){let t,r=!1;const checkConflict=e=>{if(t&&t!==e)throw new Error("Context conflict")};let s;if(e.asyncContext){const t=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;t?s=new t:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const _getCurrentInstance=()=>{if(s){const e=s.getStore();if(void 0!==e)return e}return t};return{use:()=>{const e=_getCurrentInstance();if(void 0===e)throw new Error("Context is not available");return e},tryUse:()=>_getCurrentInstance(),set:(e,s)=>{s||checkConflict(e),t=e,r=!0},unset:()=>{t=void 0,r=!1},call:(e,a)=>{checkConflict(e),t=e;try{return s?s.run(e,a):a()}finally{r||(t=void 0)}},async callAsync(e,a){t=e;const onRestore=()=>{t=e},onLeave=()=>t===e?onRestore:void 0;vn.add(onLeave);try{const c=s?s.run(e,a):a();return r||(t=void 0),await c}finally{vn.delete(onLeave)}}}}({...e,...s})),t[r])}}()),getContext=(e,t={})=>gn.get(e,t),bn="__unctx_async_handlers__",vn=mn[bn]||(mn[bn]=new Set);getContext("nitro-app",{asyncContext:void 0,AsyncLocalStorage:void 0});const Sn=toRouteMatcher(createRouter$1({routes:useRuntimeConfig().nitro.routeRules}));function createRouteRulesHandler(e){return Br((t=>{const r=function(e){e.context._nitro=e.context._nitro||{},e.context._nitro.routeRules||(e.context._nitro.routeRules=getRouteRulesForPath(withoutBase(e.path.split("?")[0],useRuntimeConfig().app.baseURL)));return e.context._nitro.routeRules}(t);if(r.headers&&Dr(t,r.headers),r.redirect){let e=r.redirect.to;if(e.endsWith("/**")){let s=t.path;const a=r.redirect._redirectStripBase;a&&(s=withoutBase(s,a)),e=joinURL(e.slice(0,-3),s)}else if(t.path.includes("?")){e=withQuery(e,getQuery(t.path))}return function(e,t,r=302){return e.node.res.statusCode=sanitizeStatusCode(r,e.node.res.statusCode),e.node.res.setHeader("location",t),send(e,`<!DOCTYPE html><html><head><meta http-equiv="refresh" content="0; url=${t.replace(/"/g,"%22")}"></head></html>`,xr.html)}(t,e,r.redirect.statusCode)}if(r.proxy){let s=r.proxy.to;if(s.endsWith("/**")){let e=t.path;const a=r.proxy._proxyStripBase;a&&(e=withoutBase(e,a)),s=joinURL(s.slice(0,-3),e)}else if(t.path.includes("?")){s=withQuery(s,getQuery(t.path))}return proxyRequest(t,s,{fetch:e.localFetch,...r.proxy})}}))}function getRouteRulesForPath(e){return Er({},...Sn.matchAll(e).reverse())}const wn=/post|put|patch/i;function joinHeaders(e){return Array.isArray(e)?e.join(", "):String(e)}function normalizeCookieHeader(e=""){return splitCookiesString(joinHeaders(e))}function normalizeCookieHeaders(e){const t=new Headers;for(const[r,s]of e)if("set-cookie"===r)for(const e of normalizeCookieHeader(s))t.append("set-cookie",e);else t.set(r,joinHeaders(s));return t}const errorHandler$0=function(e,t){const r=defaultHandler(e,t);return setResponseHeaders(t,r.headers),setResponseStatus(t,r.status,r.statusText),send(t,JSON.stringify(r.body,null,2))};function defaultHandler(e,t,r){const s=e.unhandled||e.fatal,a=e.statusCode||500,c=e.statusMessage||"Server Error",u=getRequestURL(t,{xForwardedHost:!0,xForwardedProto:!0});if(404===a){const e="/";if(/^\/[^/]/.test(e)&&!u.pathname.startsWith(e)){return{status:302,statusText:"Found",headers:{location:`${e}${u.pathname.slice(1)}${u.search}`},body:"Redirecting..."}}}if(s&&!r?.silent){const r=[e.unhandled&&"[unhandled]",e.fatal&&"[fatal]"].filter(Boolean).join(" ");console.error(`[request error] ${r} [${t.method}] ${u}\n`,e)}const p={"content-type":"application/json","x-content-type-options":"nosniff","x-frame-options":"DENY","referrer-policy":"no-referrer","content-security-policy":"script-src 'none'; frame-ancestors 'none';"};setResponseStatus(t,a,c),404!==a&&function(e,t){return e.node.res.getHeader(t)}(t,"cache-control")||(p["cache-control"]="no-cache");return{status:a,statusText:c,headers:p,body:{error:!0,url:u.href,statusCode:a,statusMessage:c,message:s?"Server Error":e.message,data:s?void 0:e.data}}}const En=[errorHandler$0];const _n={name:"vinxi",routers:[{name:"public",type:"static",dir:"./public",base:"/",root:"/Users/diogo/Documents/Github/azure-sentiment",order:0,outDir:"/Users/diogo/Documents/Github/azure-sentiment/.vinxi/build/public"},{name:"client",type:"spa",handler:"index.html",base:"/",root:"/Users/diogo/Documents/Github/azure-sentiment",target:"browser",outDir:"/Users/diogo/Documents/Github/azure-sentiment/.vinxi/build/client",order:1},{name:"api",type:"http",handler:"server/entry.ts",base:"/api",root:"/Users/diogo/Documents/Github/azure-sentiment",target:"server",outDir:"/Users/diogo/Documents/Github/azure-sentiment/.vinxi/build/api",order:2}],server:{preset:"cloudflare-module"},root:"/Users/diogo/Documents/Github/azure-sentiment"},Rn={client:{"index.html":{file:"assets/index-BoNMcHDW.js",name:"index",src:"index.html",isEntry:!0,css:["assets/index-CSRMiVrP.css"]}},api:{"virtual:$vinxi/handler/api":{file:"api.js",name:"api",src:"virtual:$vinxi/handler/api",isEntry:!0}}},Pn={};const On="Invariant Violation",{setPrototypeOf:In=function(e,t){return e.__proto__=t,e}}=Object;class InvariantError extends Error{framesToPop=1;name=On;constructor(e=On){super("number"==typeof e?`${On}: ${e} (see https://github.com/apollographql/invariant-packages)`:e),In(this,InvariantError.prototype)}}function invariant(e,t){if(!e)throw new InvariantError(t)}const An=/^[A-Za-z]:\//;const Tn=/^[/\\]{2}/,Nn=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,Cn=/^[A-Za-z]:$/,normalize$1=function(e){if(0===e.length)return".";e=function(e=""){return e?e.replace(/\\/g,"/").replace(An,(e=>e.toUpperCase())):e}(e);const t=e.match(Tn),r=isAbsolute$1(e),s="/"===e[e.length-1];return e=function(e,t){let r="",s=0,a=-1,c=0,u=null;for(let p=0;p<=e.length;++p){if(p<e.length)u=e[p];else{if("/"===u)break;u="/"}if("/"===u){if(a===p-1||1===c);else if(2===c){if(r.length<2||2!==s||"."!==r[r.length-1]||"."!==r[r.length-2]){if(r.length>2){const e=r.lastIndexOf("/");-1===e?(r="",s=0):(r=r.slice(0,e),s=r.length-1-r.lastIndexOf("/")),a=p,c=0;continue}if(r.length>0){r="",s=0,a=p,c=0;continue}}t&&(r+=r.length>0?"/..":"..",s=2)}else r.length>0?r+=`/${e.slice(a+1,p)}`:r=e.slice(a+1,p),s=p-a-1;a=p,c=0}else"."===u&&-1!==c?++c:c=-1}return r}(e,!r),0===e.length?r?"/":s?"./":".":(s&&(e+="/"),Cn.test(e)&&(e+="/"),t?r?`//${e}`:`//./${e}`:r&&!isAbsolute$1(e)?`/${e}`:e)},join$1=function(...e){if(0===e.length)return".";let t;for(const r of e)r&&r.length>0&&(void 0===t?t=r:t+=`/${r}`);return void 0===t?".":normalize$1(t.replace(/\/\/+/g,"/"))};const isAbsolute$1=function(e){return Nn.test(e)};function virtualId(e){return`virtual:${e}`}function handlerModule(e){return e.handler?.endsWith(".html")?isAbsolute$1(e.handler)?e.handler:join$1(e.root,e.handler):`$vinxi/handler/${e.name}`}class ERR_INVALID_URI extends URIError{code="ERR_INVALID_URI";constructor(){super("URI malformed")}}const xn=Array.from({length:256});for(let e=0;e<256;++e)xn[e]="%"+String.prototype.toUpperCase.call((e<16?"0":"")+Number.prototype.toString.call(e,16));const kn=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function encodeStr(e,t,r){const s=e.length;if(0===s)return"";let a="",c=0,u=0;e:for(;u<s;u++){let p=String.prototype.charCodeAt.call(e,u);for(;p<128;){if(1!==t[p]&&(c<u&&(a+=String.prototype.slice.call(e,c,u)),c=u+1,a+=r[p]),++u===s)break e;p=String.prototype.charCodeAt.call(e,u)}if(c<u&&(a+=String.prototype.slice.call(e,c,u)),p<2048){c=u+1,a+=r[192|p>>6]+r[128|63&p];continue}if(p<55296||p>=57344){c=u+1,a+=r[224|p>>12]+r[128|p>>6&63]+r[128|63&p];continue}if(++u,u>=s)throw new ERR_INVALID_URI;c=u+1,p=65536+((1023&p)<<10|1023&String.prototype.charCodeAt.call(e,u)),a+=r[240|p>>18]+r[128|p>>12&63]+r[128|p>>6&63]+r[128|63&p]}return 0===c?e:c<s?a+String.prototype.slice.call(e,c):a}const Ln=new Int8Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);function qsUnescape(e,t){try{return decodeURIComponent(e)}catch{return function(e,t){const r=globalThis.Buffer.allocUnsafe(e.length);let s,a,c,u,p=0,d=0;const h=e.length-2;let m=!1;for(;p<e.length;)if(s=String.prototype.charCodeAt.call(e,p),43===s&&t)r[d++]=32,p++;else{if(37===s&&p<h){if(s=String.prototype.charCodeAt.call(e,++p),c=Ln[s],!(c>=0)){r[d++]=37;continue}a=String.prototype.charCodeAt.call(e,++p),u=Ln[a],u>=0?(m=!0,s=16*c+u):(r[d++]=37,p--)}r[d++]=s,p++}return m?r.slice(0,d):r}(e,t).toString()}}const Dn=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function qsEscape(e){return"string"!=typeof e&&("object"==typeof e?e=String(e):e+=""),encodeStr(e,Dn,xn)}function encodeStringified(e,t){return"string"==typeof e?e.length>0?t(e):"":"number"==typeof e&&Number.isFinite(e)?Math.abs(e)<1e21?""+e:t(""+e):"bigint"==typeof e?""+e:"boolean"==typeof e?e?"true":"false":""}function encodeStringifiedCustom(e,t){return t(function(e){return"string"==typeof e?e:"number"==typeof e&&Number.isFinite(e)||"bigint"==typeof e?""+e:"boolean"==typeof e?e?"true":"false":""}(e))}function charCodes(e){if(0===e.length)return[];if(1===e.length)return[String.prototype.charCodeAt.call(e,0)];const t=Array.from({length:e.length});for(let r=0;r<e.length;++r)t[r]=String.prototype.charCodeAt.call(e,r);return t}const zn=[38],Mn=[61];function addKeyVal(e,t,r,s,a,c){if(t.length>0&&s&&(t=decodeStr(t,c)),r.length>0&&a&&(r=decodeStr(r,c)),void 0===e[t])e[t]=r;else{const s=e[t];s.pop?s[s.length]=r:e[t]=[s,r]}}function parse$3(e,t,r,s){const a={__proto__:null};if("string"!=typeof e||0===e.length)return a;const c=t?charCodes(String(t)):zn,u=r?charCodes(String(r)):Mn,p=c.length,d=u.length;let h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys>0?s.maxKeys:-1);let m=qsUnescape;s&&"function"==typeof s.decodeURIComponent&&(m=s.decodeURIComponent);const g=m!==qsUnescape;let v=0,S=0,w=0,E="",_="",R=g,P=g;const O=g?"%20":" ";let I=0;for(let t=0;t<e.length;++t){const r=String.prototype.charCodeAt.call(e,t);if(r===c[S]){if(++S===p){const r=t-S+1;if(w<d){if(v<r)E+=String.prototype.slice.call(e,v,r);else if(0===E.length){if(0===--h)return a;v=t+1,S=w=0;continue}}else v<r&&(_+=String.prototype.slice.call(e,v,r));if(addKeyVal(a,E,_,R,P,m),0===--h)return a;R=P=g,E=_="",I=0,v=t+1,S=w=0}}else{if(S=0,w<d){if(r===u[w]){if(++w===d){const r=t-w+1;v<r&&(E+=String.prototype.slice.call(e,v,r)),I=0,v=t+1}continue}if(w=0,!R){if(37===r){I=1;continue}if(I>0){if(1===kn[r]){3===++I&&(R=!0);continue}I=0}}if(43===r){v<t&&(E+=String.prototype.slice.call(e,v,t)),E+=O,v=t+1;continue}}43===r?(v<t&&(_+=String.prototype.slice.call(e,v,t)),_+=O,v=t+1):P||(37===r?I=1:I>0&&(1===kn[r]?3===++I&&(P=!0):I=0))}}if(v<e.length)w<d?E+=String.prototype.slice.call(e,v):S<p&&(_+=String.prototype.slice.call(e,v));else if(0===w&&0===E.length)return a;return addKeyVal(a,E,_,R,P,m),a}function decodeStr(e,t){try{return t(e)}catch{return qsUnescape(e,!0)}}const Bn=2147483647,$n=36,jn=/^xn--/,qn=/[^\0-\u007F]/,Un=/[.\u3002\uFF0E\uFF61]/g,Hn={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Fn=Math.floor,Vn=String.fromCharCode;function error(e){throw new RangeError(Hn[e])}function mapDomain(e,t){const r=e.split("@");let s="";r.length>1&&(s=r[0]+"@",e=r[1]);const a=function(e,t){const r=[];let s=e.length;for(;s--;)r[s]=t(e[s]);return r}((e=e.replace(Un,".")).split("."),t).join(".");return s+a}const digitToBasic=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},adapt=function(e,t,r){let s=0;for(e=r?Fn(e/700):e>>1,e+=Fn(e/t);e>455;s+=$n)e=Fn(e/35);return Fn(s+36*e/(e+38))},toUnicode=function(e){return mapDomain(e,(function(e){return jn.test(e)?function(e){const t=[],r=e.length;let s=0,a=128,c=72,u=e.lastIndexOf("-");u<0&&(u=0);for(let r=0;r<u;++r)e.charCodeAt(r)>=128&&error("not-basic"),t.push(e.charCodeAt(r));for(let d=u>0?u+1:0;d<r;){const u=s;for(let t=1,a=$n;;a+=$n){d>=r&&error("invalid-input");const u=(p=e.charCodeAt(d++))>=48&&p<58?p-48+26:p>=65&&p<91?p-65:p>=97&&p<123?p-97:$n;u>=$n&&error("invalid-input"),u>Fn((Bn-s)/t)&&error("overflow"),s+=u*t;const h=a<=c?1:a>=c+26?26:a-c;if(u<h)break;const m=$n-h;t>Fn(Bn/m)&&error("overflow"),t*=m}const h=t.length+1;c=adapt(s-u,h,0===u),Fn(s/h)>Bn-a&&error("overflow"),a+=Fn(s/h),s%=h,t.splice(s++,0,a)}var p;return String.fromCodePoint(...t)}(e.slice(4).toLowerCase()):e}))},toASCII=function(e){return mapDomain(e,(function(e){return qn.test(e)?"xn--"+function(e){const t=[],r=function(e){const t=[];let r=0;const s=e.length;for(;r<s;){const a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<s){const s=e.charCodeAt(r++);56320==(64512&s)?t.push(((1023&a)<<10)+(1023&s)+65536):(t.push(a),r--)}else t.push(a)}return t}(e),s=r.length;let a=128,c=0,u=72;for(const e of r)e<128&&t.push(Vn(e));const p=t.length;let d=p;for(p&&t.push("-");d<s;){let e=Bn;for(const t of r)t>=a&&t<e&&(e=t);const s=d+1;e-a>Fn((Bn-c)/s)&&error("overflow"),c+=(e-a)*s,a=e;for(const e of r)if(e<a&&++c>Bn&&error("overflow"),e===a){let e=c;for(let r=$n;;r+=$n){const s=r<=u?1:r>=u+26?26:r-u;if(e<s)break;const a=e-s,c=$n-s;t.push(Vn(digitToBasic(s+a%c,0))),e=Fn(a/c)}t.push(Vn(digitToBasic(e,0))),u=adapt(c,s,d===p),c=0,++d}++c,++a}return t.join("")}(e):e}))};function spliceOne(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function fmt(e){return Array.isArray(e)?e.map((e=>fmt(e))).join(" or "):e?e.toString():""+e}class ERR_INVALID_ARG_VALUE extends TypeError{code="ERR_INVALID_ARG_VALUE";constructor(e,t,r){super(`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${t}`)}}class ERR_INVALID_ARG_TYPE extends TypeError{code="ERR_INVALID_ARG_TYPE";constructor(e,t,r){super(`The "${e}" argument must be of type ${fmt(t)}. Received ${fmt(r)}`)}}class ERR_INVALID_URL extends TypeError{code="ERR_INVALID_URL";input;base;constructor(e,t){super("Invalid URL"),this.input=e,null!=t&&(this.base=t)}}class ERR_INVALID_URL_SCHEME extends TypeError{code="ERR_INVALID_URL_SCHEME";constructor(e){super(`The URL must be of scheme ${e}`)}}class ERR_INVALID_FILE_URL_PATH extends TypeError{code="ERR_INVALID_FILE_URL_PATH";constructor(e){super(`Invalid ile URL path: ${e}`)}}class ERR_INVALID_FILE_URL_HOST extends TypeError{code="ERR_INVALID_FILE_URL_HOST";constructor(e){super(`File URL host must be "localhost" or empty on ${e}`)}}const Wn=/^[A-Za-z]:\//;function normalizeWindowsPath(e=""){return e?e.replace(/\\/g,"/").replace(Wn,(e=>e.toUpperCase())):e}const Kn=/^[/\\]{2}/,Gn=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,Yn=/^[A-Za-z]:$/,Jn=/^\/([A-Za-z]:)?$/,Qn=/.(\.[^./]+|\.)$/,Xn=/^[/\\]|^[a-zA-Z]:[/\\]/,normalize=function(e){if(0===e.length)return".";const t=(e=normalizeWindowsPath(e)).match(Kn),r=isAbsolute(e),s="/"===e[e.length-1];return 0===(e=normalizeString(e,!r)).length?r?"/":s?"./":".":(s&&(e+="/"),Yn.test(e)&&(e+="/"),t?r?`//${e}`:`//./${e}`:r&&!isAbsolute(e)?`/${e}`:e)},join=function(...e){let t="";for(const r of e)if(r)if(t.length>0){const e="/"===t[t.length-1],s="/"===r[0];t+=e&&s?r.slice(1):e||s?r:`/${r}`}else t+=r;return normalize(t)};const resolve=function(...e){let t="",r=!1;for(let s=(e=e.map((e=>normalizeWindowsPath(e)))).length-1;s>=-1&&!r;s--){const a=s>=0?e[s]:void 0!==q&&"function"==typeof q.cwd?q.cwd().replace(/\\/g,"/"):"/";a&&0!==a.length&&(t=`${a}/${t}`,r=isAbsolute(a))}return t=normalizeString(t,!r),r&&!isAbsolute(t)?`/${t}`:t.length>0?t:"."};function normalizeString(e,t){let r="",s=0,a=-1,c=0,u=null;for(let p=0;p<=e.length;++p){if(p<e.length)u=e[p];else{if("/"===u)break;u="/"}if("/"===u){if(a===p-1||1===c);else if(2===c){if(r.length<2||2!==s||"."!==r[r.length-1]||"."!==r[r.length-2]){if(r.length>2){const e=r.lastIndexOf("/");-1===e?(r="",s=0):(r=r.slice(0,e),s=r.length-1-r.lastIndexOf("/")),a=p,c=0;continue}if(r.length>0){r="",s=0,a=p,c=0;continue}}t&&(r+=r.length>0?"/..":"..",s=2)}else r.length>0?r+=`/${e.slice(a+1,p)}`:r=e.slice(a+1,p),s=p-a-1;a=p,c=0}else"."===u&&-1!==c?++c:c=-1}return r}const isAbsolute=function(e){return Gn.test(e)},toNamespacedPath=function(e){return normalizeWindowsPath(e)},extname=function(e){if(".."===e)return"";const t=Qn.exec(normalizeWindowsPath(e));return t&&t[1]||""},relative=function(e,t){const r=resolve(e).replace(Jn,"$1").split("/"),s=resolve(t).replace(Jn,"$1").split("/");if(":"===s[0][1]&&":"===r[0][1]&&r[0]!==s[0])return s.join("/");const a=[...r];for(const e of a){if(s[0]!==e)break;r.shift(),s.shift()}return[...r.map((()=>"..")),...s].join("/")},dirname=function(e){const t=normalizeWindowsPath(e).replace(/\/$/,"").split("/").slice(0,-1);return 1===t.length&&Yn.test(t[0])&&(t[0]+="/"),t.join("/")||(isAbsolute(e)?"/":".")},format=function(e){const t=e.ext?e.ext.startsWith(".")?e.ext:`.${e.ext}`:"",r=[e.root,e.dir,e.base??(e.name??"")+t].filter(Boolean);return normalizeWindowsPath(e.root?resolve(...r):r.join("/"))},basename=function(e,t){const r=normalizeWindowsPath(e).split("/");let s="";for(let e=r.length-1;e>=0;e--){const t=r[e];if(t){s=t;break}}return t&&s.endsWith(t)?s.slice(0,-t.length):s},parse$2=function(e){const t=Xn.exec(e)?.[0]?.replace(/\\/g,"/")||"",r=basename(e),s=extname(r);return{root:t,dir:dirname(e),base:r,ext:s,name:r.slice(0,r.length-s.length)}},Zn={sep:"/",delimiter:":",basename:basename,dirname:dirname,extname:extname,format:format,isAbsolute:isAbsolute,join:join,normalize:normalize,parse:parse$2,relative:relative,resolve:resolve,toNamespacedPath:toNamespacedPath,posix:void 0,win32:void 0,_makeLong:e=>e,matchesGlob:notImplemented("path.matchesGlob")};Zn.posix=Zn,Zn.win32=Zn;const eo=Zn,to=Zn,ro=Zn._makeLong,no=Zn.matchesGlob,oo=Object.freeze(Object.defineProperty({__proto__:null,_makeLong:ro,basename:basename,default:Zn,delimiter:":",dirname:dirname,extname:extname,format:format,isAbsolute:isAbsolute,join:join,matchesGlob:no,normalize:normalize,parse:parse$2,posix:eo,relative:relative,resolve:resolve,sep:"/",toNamespacedPath:toNamespacedPath,win32:to},Symbol.toStringTag,{value:"Module"})),so=47,io=63,ao=35,co=new Set(["javascript","javascript:"]),lo=new Set(["javascript","javascript:"]),uo=new Set(["http","http:","https","https:","ftp","ftp:","gopher","gopher:","file","file:","ws","ws:","wss","wss:"]),po=/\//g;function fileURLToPath(e,t){const r=t?.windows;if("string"==typeof e)e=new URL(e);else if(!function(e){return Boolean(e?.href&&e.protocol&&void 0===e.auth&&void 0===e.path)}(e))throw new ERR_INVALID_ARG_TYPE("path",["string","URL"],e);if("file:"!==e.protocol)throw new ERR_INVALID_URL_SCHEME("file");return r?function(e){const t=e.hostname;let r=e.pathname;for(let e=0;e<r.length;e++)if("%"===r[e]){const t=32|r.codePointAt(e+2);if("2"===r[e+1]&&102===t||"5"===r[e+1]&&99===t)throw new ERR_INVALID_FILE_URL_PATH(String.raw`must not include encoded \ or / characters`)}if(r=r.replace(po,"\\"),r=decodeURIComponent(r),""!==t)return`\\\\${toUnicode(t)}${r}`;const s=32|String.prototype.codePointAt.call(r,1),a=String.prototype.charAt.call(r,2);if(s<97||s>122||":"!==a)throw new ERR_INVALID_FILE_URL_PATH("must be absolute");return String.prototype.slice.call(r,1)}(e):function(e){if(""!==e.hostname)throw new ERR_INVALID_FILE_URL_HOST("??");const t=e.pathname;for(let e=0;e<t.length;e++)if("%"===t[e]){const r=32|String.prototype.codePointAt.call(t,e+2);if("2"===t[e+1]&&102===r)throw new ERR_INVALID_FILE_URL_PATH("must not include encoded / characters")}return decodeURIComponent(t)}(e)}function urlToHttpOptions(e){const{hostname:t,pathname:r,port:s,username:a,password:c,search:u}=e;return{__proto__:null,...e,protocol:e.protocol,hostname:t&&String.prototype.startsWith.call(t,"[")?String.prototype.slice.call(t,1,-1):t,hash:e.hash,search:u,pathname:r,path:`${r||""}${u||""}`,href:e.href,port:""===s?void 0:Number(s),auth:a||c?`${decodeURIComponent(a)}:${decodeURIComponent(c)}`:void 0}}const fo=/%/g,ho=/\\/g,mo=/\n/g,yo=/\r/g,go=/\t/g,bo=/\?/g,vo=/#/g;function encodePathChars(e,t){const r=t?.windows;return-1!==String.prototype.indexOf.call(e,"%")&&(e=e.replace(fo,"%25")),r||-1===String.prototype.indexOf.call(e,"\\")||(e=e.replace(ho,"%5C")),-1!==String.prototype.indexOf.call(e,"\n")&&(e=e.replace(mo,"%0A")),-1!==String.prototype.indexOf.call(e,"\r")&&(e=e.replace(yo,"%0D")),-1!==String.prototype.indexOf.call(e,"\t")&&(e=e.replace(go,"%09")),e}class Url{auth=null;hash=null;host=null;hostname=null;href=null;path=null;pathname=null;protocol=null;search=null;slashes=null;port=null;query=null;parse(e,t,r){if("string"!=typeof e)throw new ERR_INVALID_ARG_TYPE("url","string",e);let s=!1,a=!1,c=-1,u=-1,p="",d=0;for(let t=0,r=!1,h=!1;t<e.length;++t){const m=e.charCodeAt(t),g=m<33||160===m||65279===m;if(-1===c){if(g)continue;d=c=t}else r?g||(u=-1,r=!1):g&&(u=t,r=!0);if(h)s||m!==ao||(s=!0);else switch(m){case 64:a=!0;break;case ao:s=!0;case io:h=!0;break;case 92:t-d>0&&(p+=e.slice(d,t)),p+="/",d=t+1}}if(-1!==c&&(d===c?p=-1===u?0===c?e:e.slice(c):e.slice(c,u):-1===u&&d<e.length?p+=e.slice(d):-1!==u&&d<u&&(p+=e.slice(d,u))),!r&&!s&&!a){const e=_o.exec(p);if(e)return this.path=p,this.href=p,this.pathname=e[1],e[2]?(this.search=e[2],this.query=t?parse$3(this.search.slice(1)):this.search.slice(1)):t&&(this.search=null,this.query={__proto__:null}),this}const h=So.exec(p);let m,g,v;if(h&&(m=h[0],g=m.toLowerCase(),this.protocol=g,p=p.slice(m.length)),(r||m||Eo.test(p))&&(v=p.charCodeAt(0)===so&&p.charCodeAt(1)===so,!v||m&&lo.has(g)||(p=p.slice(2),this.slashes=!0)),!lo.has(g)&&(v||m&&!uo.has(m))){let t=-1,r=-1,s=-1;for(let e=0;e<p.length;++e){switch(p.charCodeAt(e)){case 9:case 10:case 13:p=p.slice(0,e)+p.slice(e+1),e-=1;break;case 32:case 34:case 37:case 39:case 59:case 60:case 62:case 92:case 94:case 96:case 123:case 124:case 125:-1===s&&(s=e);break;case ao:case so:case io:-1===s&&(s=e),t=e;break;case 64:r=e,s=-1}if(-1!==t)break}c=0,-1!==r&&(this.auth=decodeURIComponent(p.slice(0,r)),c=r+1),-1===s?(this.host=p.slice(c),p=""):(this.host=p.slice(c,s),p=p.slice(s)),this.parseHost(),"string"!=typeof this.hostname&&(this.hostname="");const a=this.hostname,u=isIpv6Hostname(a);if(u||(p=function(e,t,r,s){for(let a=0;a<r.length;++a){const c=r.charCodeAt(a);if(!(c!==so&&92!==c&&c!==ao&&c!==io&&58!==c))return No&&58===c&&(console.warn(`[DeprecationWarning] [unenv] [node:url] DEP0170: The URL ${s} is invalid. Future versions of Node.js will throw an error.`),No=!1),e.hostname=r.slice(0,a),`/${r.slice(a)}${t}`}return t}(this,p,a,e)),this.hostname.length>Ao?this.hostname="":this.hostname=this.hostname.toLowerCase(),""!==this.hostname)if(u){if(Po.test(this.hostname))throw new ERR_INVALID_URL(e)}else if(this.hostname=toASCII(this.hostname),""===this.hostname||Ro.test(this.hostname))throw new ERR_INVALID_URL(e);const d=this.port?":"+this.port:"",h=this.hostname||"";this.host=h+d,u&&(this.hostname=this.hostname.slice(1,-1),"/"!==p[0]&&(p="/"+p))}co.has(g)||(p=function(e){let t="",r=0;for(let s=0;s<e.length;++s){const a=Io[e.charCodeAt(s)];a&&(s>r&&(t+=e.slice(r,s)),t+=a,r=s+1)}if(0===r)return e;r<e.length&&(t+=e.slice(r));return t}(p));let S=-1,w=-1;for(let e=0;e<p.length;++e){const t=p.charCodeAt(e);if(t===ao){this.hash=p.slice(e),w=e;break}t===io&&-1===S&&(S=e)}-1!==S?(-1===w?(this.search=p.slice(S),this.query=p.slice(S+1)):(this.search=p.slice(S,w),this.query=p.slice(S+1,w)),t&&(this.query=parse$3(this.query))):t&&(this.search=null,this.query={__proto__:null});const E=-1!==S&&(-1===w||S<w)?S:w;if(-1===E?p.length>0&&(this.pathname=p):E>0&&(this.pathname=p.slice(0,E)),uo.has(g)&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){const e=this.pathname||"",t=this.search||"";this.path=e+t}return this.href=this.format(),this}format(){let e=this.auth||"";e&&(e=encodeStr(e,Oo,xn),e+="@");let t=this.protocol||"",r=this.pathname||"",s=this.hash||"",a="",c="";this.host?a=e+this.host:this.hostname&&(a=e+(this.hostname.includes(":")&&!isIpv6Hostname(this.hostname)?"["+this.hostname+"]":this.hostname),this.port&&(a+=":"+this.port)),null!==this.query&&"object"==typeof this.query&&(c=function(e,t,r,s){t=t||"&",r=r||"=";let a=qsEscape;s&&"function"==typeof s.encodeURIComponent&&(a=s.encodeURIComponent);const c=a===qsEscape?encodeStringified:encodeStringifiedCustom;if(null!==e&&"object"==typeof e){const s=Object.keys(e),u=s.length;let p="";for(let d=0;d<u;++d){const u=s[d],h=e[u];let m=c(u,a);if(m+=r,Array.isArray(h)){const e=h.length;if(0===e)continue;p&&(p+=t);for(let r=0;r<e;++r)r&&(p+=t),p+=m,p+=c(h[r],a)}else p&&(p+=t),p+=m,p+=c(h,a)}return p}return""}(this.query));let u=this.search||c&&"?"+c||"";t&&58!==t.charCodeAt(t.length-1)&&(t+=":");let p="",d=0;for(let e=0;e<r.length;++e)switch(r.charCodeAt(e)){case ao:e-d>0&&(p+=r.slice(d,e)),p+="%23",d=e+1;break;case io:e-d>0&&(p+=r.slice(d,e)),p+="%3F",d=e+1}return d>0&&(r=d===r.length?p:p+r.slice(d)),(this.slashes||uo.has(t))&&(this.slashes||a?(r&&r.charCodeAt(0)!==so&&(r="/"+r),a="//"+a):t.length>=4&&102===t.charCodeAt(0)&&105===t.charCodeAt(1)&&108===t.charCodeAt(2)&&101===t.charCodeAt(3)&&(a="//")),u=u.replace(/#/g,"%23"),s&&s.charCodeAt(0)!==ao&&(s="#"+s),u&&u.charCodeAt(0)!==io&&(u="?"+u),t+a+r+u+s}resolve(e){return this.resolveObject(urlParse(e,!1,!0)).format()}resolveObject(e){if("string"==typeof e){const t=new Url;t.parse(e,!1,!0),e=t}const t=new Url;if(Object.assign(t,this),t.hash=e.hash,""===e.href)return t.href=t.format(),t;if(e.slashes&&!e.protocol){const r=Object.keys(e).reduce(((t,r)=>("protocol"!==r&&(t[r]=e[r]),t)),{});return Object.assign(t,r),uo.has(t.protocol)&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!uo.has(e.protocol))return Object.assign(t,e),t.href=t.format(),t;if(t.protocol=e.protocol,e.host||/^file:?$/.test(e.protocol)||lo.has(e.protocol))t.pathname=e.pathname;else{const r=(e.pathname||"").split("/");for(;r.length>0&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),t.pathname=r.join("/")}if(t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,t.pathname||t.search){const e=t.pathname||"",r=t.search||"";t.path=e+r}return t.slashes=t.slashes||e.slashes,t.href=t.format(),t}const r=t.pathname&&"/"===t.pathname.charAt(0),s=e.host||e.pathname&&"/"===e.pathname.charAt(0);let a=s||r||t.host&&e.pathname;const c=a;let u=t.pathname&&t.pathname.split("/")||[];const p=e.pathname&&e.pathname.split("/")||[],d=t.protocol&&!uo.has(t.protocol);if(d&&(t.hostname="",t.port=null,t.host&&(""===u[0]?u[0]=t.host:u.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,t.auth=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),a=a&&(""===p[0]||""===u[0])),s)(e.host||""===e.host)&&(t.host!==e.host&&(t.auth=null),t.host=e.host,t.port=e.port),(e.hostname||""===e.hostname)&&(t.hostname!==e.hostname&&(t.auth=null),t.hostname=e.hostname),t.search=e.search,t.query=e.query,u=p;else if(p.length>0)u||(u=[]),u.pop(),u=u.concat(p),t.search=e.search,t.query=e.query;else if(null!==e.search&&void 0!==e.search){if(d){t.hostname=t.host=u.shift();const e=t.host&&t.host.indexOf("@")>0&&t.host.split("@");e&&(t.auth=e.shift(),t.host=t.hostname=e.shift())}return t.search=e.search,t.query=e.query,null===t.pathname&&null===t.search||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(0===u.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;let h=u.at(-1);const m=(t.host||e.host||u.length>1)&&("."===h||".."===h)||""===h;let g=0;for(let e=u.length-1;e>=0;e--)h=u[e],"."===h?spliceOne(u,e):".."===h?(spliceOne(u,e),g++):g&&(spliceOne(u,e),g--);if(!a&&!c)for(;g--;)u.unshift("..");!a||""===u[0]||u[0]&&"/"===u[0].charAt(0)||u.unshift(""),m&&"/"!==u.join("/").slice(-1)&&u.push("");const v=""===u[0]||u[0]&&"/"===u[0].charAt(0);if(d){t.hostname=t.host=v?"":u.length>0?u.shift():"";const e=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@");e&&(t.auth=e.shift(),t.host=t.hostname=e.shift())}return a=a||t.host&&u.length,a&&!v&&u.unshift(""),0===u.length?(t.pathname=null,t.path=null):t.pathname=u.join("/"),null===t.pathname&&null===t.search||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t}parseHost(){let e=this.host;const t=wo.exec(e);if(t){const r=t[0];":"!==r&&(this.port=r.slice(1)),e=e.slice(0,e.length-r.length)}e&&(this.hostname=e)}}const So=/^[\d+.a-z-]+:/i,wo=/:\d*$/,Eo=/^\/\/[^/@]+@[^/@]+/,_o=/^(\/\/?(?!\/)[^\s?]*)(\?\S*)?$/,Ro=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Po=/[\0\t\n\r #%/<>?@\\^|]/,Oo=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]),Io=["","","","","","","","","","%09","%0A","","","%0D","","","","","","","","","","","","","","","","","","","%20","","%22","","","","","%27","","","","","","","","","","","","","","","","","","","","","%3C","","%3E","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","%5C","","%5E","","%60","","","","","","","","","","","","","","","","","","","","","","","","","","","%7B","%7C","%7D"],Ao=255;let To=!1;function urlParse(e,t,r){if(To||(To=!0,console.warn("[DeprecationWarning] [unenv] [node:url] DEP0169: `url.parse()` behavior is not standardized and prone to errors that have security implications. Use the WHATWG URL API instead. CVEs are not issued for `url.parse()` vulnerabilities.")),e instanceof Url)return e;const s=new Url;return s.parse(e,t,r),s}function isIpv6Hostname(e){return 91===String.prototype.charCodeAt.call(e,0)&&93===String.prototype.charCodeAt.call(e,e.length-1)}let No=!0;function urlFormat(e,t){if("string"==typeof e)e=urlParse(e);else{if("object"!=typeof e||null===e)throw new ERR_INVALID_ARG_TYPE("urlObject",["Object","string"],e);if(e instanceof Co){let r=!0,s=!1,a=!0,c=!0;t&&(null!=t.fragment&&(r=Boolean(t.fragment)),null!=t.unicode&&(s=Boolean(t.unicode)),null!=t.search&&(a=Boolean(t.search)),null!=t.auth&&(c=Boolean(t.auth)));const u=new Co(e.href);return r||(u.hash=""),a||(u.search=""),c||(u.username=u.password=""),s?Url.prototype.format.call(u):u.href}}return Url.prototype.format.call(e)}function urlResolve(e,t){return urlParse(e,!1,!0).resolve(t)}function urlResolveObject(e,t){return e?urlParse(e,!1,!0).resolveObject(t):t}function pathToFileURL(e,t){return function(e,t){const r=t?.windows;if(r&&String.prototype.startsWith.call(e,"\\\\")){const t=new URL("file://"),s=String.prototype.startsWith.call(e,"\\\\?\\UNC\\")?8:2,a=String.prototype.indexOf.call(e,"\\",s);if(-1===a)throw new ERR_INVALID_ARG_VALUE("path",e,"Missing UNC resource path");const c=String.prototype.slice.call(e,s,a);return t.hostname=toASCII(c),t.pathname=encodePathChars(e.slice(a).replace(ho,"/"),{windows:r}),t}let s=r?Zn.win32.resolve(e):Zn.posix.resolve(e);const a=String.prototype.charCodeAt.call(e,e.length-1);return(a===so||r&&92===a)&&s.at(-1)!==Zn.sep&&(s+="/"),s=encodePathChars(s,{windows:r}),-1!==String.prototype.indexOf.call(s,"?")&&(s=s.replace(bo,"%3F")),-1!==String.prototype.indexOf.call(s,"#")&&(s=s.replace(vo,"%23")),new URL(`file://${s}`)}(e,t)}const Co=globalThis.URL,xo=globalThis.URLSearchParams,ko=toASCII,Lo=toUnicode,Do={Url:Url,parse:urlParse,resolve:urlResolve,resolveObject:urlResolveObject,format:urlFormat,URL:Co,URLSearchParams:xo,domainToASCII:ko,domainToUnicode:Lo,pathToFileURL:pathToFileURL,fileURLToPath:fileURLToPath,urlToHttpOptions:urlToHttpOptions},zo=Object.freeze(Object.defineProperty({__proto__:null,URL:Co,URLSearchParams:xo,Url:Url,default:Do,domainToASCII:ko,domainToUnicode:Lo,fileURLToPath:fileURLToPath,format:urlFormat,parse:urlParse,pathToFileURL:pathToFileURL,resolve:urlResolve,resolveObject:urlResolveObject,urlToHttpOptions:urlToHttpOptions},Symbol.toStringTag,{value:"Module"}));function findAssetsInViteManifest(e,t,r=new Map,s=[]){if(s.includes(t))return[];const a=r.get(t);if(a)return a;const c=e[t];if(!c)return[];const u=[...c.assets?.filter(Boolean)||[],...c.css?.filter(Boolean)||[]];if(c.imports){s.push(t);for(let t=0,a=c.imports.length;t<a;t++)u.push(...findAssetsInViteManifest(e,c.imports[t],r,s));s.pop()}u.push(c.file);const p=Array.from(new Set(u));return r.set(t,p),p}function createHtmlTagsForAssets(e,t,r){return r.filter((e=>e.endsWith(".css")||e.endsWith(".js")||e.endsWith(".mjs"))).map((r=>({tag:"link",attrs:{href:joinURL(t.config.server.baseURL??"/",e.base,r),key:join$1(t.config.server.baseURL??"",e.base,r),...r.endsWith(".css")?{rel:"stylesheet",fetchPriority:"high"}:{rel:"modulepreload"}}})))}const Mo={};const Bo=[function(e){const t=function(e){return{config:{...e,buildManifest:Rn,routeManifest:Pn},getRouter:t=>e.routers.find((e=>e.name===t))}}(_n);globalThis.app=t},function(e){globalThis.$handle=t=>e.h3App.handler(t)},function(){globalThis.MANIFEST=function(e){const t=new Proxy({},{get(t,r){invariant("string"==typeof r,"Bundler name expected");const s=e.getRouter(r),a=e.config.buildManifest[r];return invariant("static"!==s.type,"manifest not available for static router"),{handler:s.handler,async assets(){let e={};e[s.handler]=await this.inputs[s.handler].assets();for(const t of await(s.internals.routes?.getRoutes())??[])e[t.filePath]=await this.inputs[t.filePath].assets();return e},routes:async()=>await(s.internals.routes?.getRoutes())??[],async json(){let e={};for(const t of Object.keys(this.inputs))e[t]={output:this.inputs[t].output.path,assets:await this.inputs[t].assets()};return e},chunks:new Proxy({},{get(e,t){invariant("string"==typeof t,"Chunk expected");const r=join$1(s.outDir,s.base,t+".mjs");return{import:()=>globalThis.$$chunks[t+".mjs"]?globalThis.$$chunks[t+".mjs"]:import(pathToFileURL(r).href),output:{path:r}}}}),inputs:new Proxy({},{ownKeys:e=>Object.keys(a).filter((e=>a[e].isEntry)).map((e=>e)),getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get(t,r){if(invariant("string"==typeof r,"Input expected"),"server"===s.target){const t=r===s.handler?virtualId(handlerModule(s)):r;return{assets:()=>createHtmlTagsForAssets(s,e,findAssetsInViteManifest(a,t)),output:{path:join$1(s.outDir,s.base,a[t].file)}}}if("browser"===s.target){const t=r!==s.handler||r.endsWith(".html")?r:virtualId(handlerModule(s));return{import:()=>import(joinURL(e.config.server.baseURL??"",s.base,a[t].file)),assets:()=>createHtmlTagsForAssets(s,e,findAssetsInViteManifest(a,t)),output:{path:joinURL(e.config.server.baseURL??"",s.base,a[t].file)}}}}})}}});return t}(globalThis.app)},function(){globalThis.$$chunks=Mo}];var compose=(e,t,r)=>(s,a)=>{let c=-1;return async function dispatch(u){if(u<=c)throw new Error("next() called multiple times");let p;c=u;let d,h=!1;e[u]?(d=e[u][0][0],s.req.routeIndex=u):d=u===e.length&&a||void 0;if(d)try{p=await d(s,(()=>dispatch(u+1)))}catch(e){if(!(e instanceof Error&&t))throw e;s.error=e,p=await t(e,s),h=!0}else!1===s.finalized&&r&&(p=await r(s));p&&(!1===s.finalized||h)&&(s.res=p);return s}(0)},parseBody=async(e,t=Object.create(null))=>{const{all:r=!1,dot:s=!1}=t,a=(e instanceof Uo?e.raw.headers:e.headers).get("Content-Type");return a?.startsWith("multipart/form-data")||a?.startsWith("application/x-www-form-urlencoded")?async function(e,t){const r=await e.formData();if(r)return function(e,t){const r=Object.create(null);e.forEach(((e,s)=>{t.all||s.endsWith("[]")?handleParsingAllValues(r,s,e):r[s]=e})),t.dot&&Object.entries(r).forEach((([e,t])=>{e.includes(".")&&(handleParsingNestedValues(r,e,t),delete r[e])}));return r}(r,t);return{}}(e,{all:r,dot:s}):{}};var handleParsingAllValues=(e,t,r)=>{void 0!==e[t]?Array.isArray(e[t])?e[t].push(r):e[t]=[e[t],r]:e[t]=r},handleParsingNestedValues=(e,t,r)=>{let s=e;const a=t.split(".");a.forEach(((e,t)=>{t===a.length-1?s[e]=r:((!s[e]||"object"!=typeof s[e]||Array.isArray(s[e])||s[e]instanceof File)&&(s[e]=Object.create(null)),s=s[e])}))},splitPath=e=>{const t=e.split("/");return""===t[0]&&t.shift(),t},extractGroupsFromPath=e=>{const t=[];return e=e.replace(/\{[^}]+\}/g,((e,r)=>{const s=`@${r}`;return t.push([s,e]),s})),{groups:t,path:e}},replaceGroupMarks=(e,t)=>{for(let r=t.length-1;r>=0;r--){const[s]=t[r];for(let a=e.length-1;a>=0;a--)if(e[a].includes(s)){e[a]=e[a].replace(s,t[r][1]);break}}return e},$o={},getPattern=(e,t)=>{if("*"===e)return"*";const r=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){const s=`${e}#${t}`;return $o[s]||(r[2]?$o[s]=t&&":"!==t[0]&&"*"!==t[0]?[s,r[1],new RegExp(`^${r[2]}(?=/${t})`)]:[e,r[1],new RegExp(`^${r[2]}$`)]:$o[s]=[e,r[1],!0]),$o[s]}return null},tryDecode=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,(e=>{try{return t(e)}catch{return e}}))}},getPath=e=>{const t=e.url,r=t.indexOf("/",8);let s=r;for(;s<t.length;s++){const e=t.charCodeAt(s);if(37===e){const e=t.indexOf("?",s),c=t.slice(r,-1===e?void 0:e);return a=c.includes("%25")?c.replace(/%25/g,"%2525"):c,tryDecode(a,decodeURI)}if(63===e)break}var a;return t.slice(r,s)},getPathNoStrict=e=>{const t=getPath(e);return t.length>1&&"/"===t.at(-1)?t.slice(0,-1):t},mergePath=(e,t,...r)=>(r.length&&(t=mergePath(t,...r)),`${"/"===e?.[0]?"":"/"}${e}${"/"===t?"":`${"/"===e?.at(-1)?"":"/"}${"/"===t?.[0]?t.slice(1):t}`}`),checkOptionalParameter=e=>{if(63!==e.charCodeAt(e.length-1)||!e.includes(":"))return null;const t=e.split("/"),r=[];let s="";return t.forEach((e=>{if(""===e||/\:/.test(e)){if(/\:/.test(e))if(/\?/.test(e)){0===r.length&&""===s?r.push("/"):r.push(s);const t=e.replace("?","");s+="/"+t,r.push(s)}else s+="/"+e}else s+="/"+e})),r.filter(((e,t,r)=>r.indexOf(e)===t))},_decodeURI=e=>/[%+]/.test(e)?(-1!==e.indexOf("+")&&(e=e.replace(/\+/g," ")),-1!==e.indexOf("%")?qo(e):e):e,_getQueryParam=(e,t,r)=>{let s;if(!r&&t&&!/[%+]/.test(t)){let r=e.indexOf(`?${t}`,8);for(-1===r&&(r=e.indexOf(`&${t}`,8));-1!==r;){const s=e.charCodeAt(r+t.length+1);if(61===s){const s=r+t.length+2,a=e.indexOf("&",s);return _decodeURI(e.slice(s,-1===a?void 0:a))}if(38==s||isNaN(s))return"";r=e.indexOf(`&${t}`,r+1)}if(s=/[%+]/.test(e),!s)return}const a={};s??=/[%+]/.test(e);let c=e.indexOf("?",8);for(;-1!==c;){const t=e.indexOf("&",c+1);let u=e.indexOf("=",c);u>t&&-1!==t&&(u=-1);let p,d=e.slice(c+1,-1===u?-1===t?void 0:t:u);(s&&(d=_decodeURI(d)),c=t,""!==d)&&(-1===u?p="":(p=e.slice(u+1,-1===t?void 0:t),s&&(p=_decodeURI(p))),r?(a[d]&&Array.isArray(a[d])||(a[d]=[]),a[d].push(p)):a[d]??=p)}return t?a[t]:a},jo=_getQueryParam,qo=decodeURIComponent,tryDecodeURIComponent=e=>tryDecode(e,qo),Uo=class{raw;#s;#i;routeIndex=0;path;bodyCache={};constructor(e,t="/",r=[[]]){this.raw=e,this.path=t,this.#i=r,this.#s={}}param(e){return e?this.#a(e):this.#c()}#a(e){const t=this.#i[0][this.routeIndex][1][e],r=this.#l(t);return r?/\%/.test(r)?tryDecodeURIComponent(r):r:void 0}#c(){const e={},t=Object.keys(this.#i[0][this.routeIndex][1]);for(const r of t){const t=this.#l(this.#i[0][this.routeIndex][1][r]);t&&"string"==typeof t&&(e[r]=/\%/.test(t)?tryDecodeURIComponent(t):t)}return e}#l(e){return this.#i[1]?this.#i[1][e]:e}query(e){return jo(this.url,e)}queries(e){return((e,t)=>_getQueryParam(e,t,!0))(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;const t={};return this.raw.headers.forEach(((e,r)=>{t[r]=e})),t}async parseBody(e){return this.bodyCache.parsedBody??=await parseBody(this,e)}#u=e=>{const{bodyCache:t,raw:r}=this,s=t[e];if(s)return s;const a=Object.keys(t)[0];return a?t[a].then((t=>("json"===a&&(t=JSON.stringify(t)),new Response(t)[e]()))):t[e]=r[e]()};json(){return this.#u("json")}text(){return this.#u("text")}arrayBuffer(){return this.#u("arrayBuffer")}blob(){return this.#u("blob")}formData(){return this.#u("formData")}addValidatedData(e,t){this.#s[e]=t}valid(e){return this.#s[e]}get url(){return this.raw.url}get method(){return this.raw.method}get matchedRoutes(){return this.#i[0].map((([[,e]])=>e))}get routePath(){return this.#i[0].map((([[,e]])=>e))[this.routeIndex].path}},Ho=1,resolveCallback=async(e,t,r,s,a)=>{"object"!=typeof e||e instanceof String||(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));const c=e.callbacks;if(!c?.length)return Promise.resolve(e);a?a[0]+=e:a=[e];const u=Promise.all(c.map((e=>e({phase:t,buffer:a,context:s})))).then((e=>Promise.all(e.filter(Boolean).map((e=>resolveCallback(e,t,!1,s,a)))).then((()=>a[0]))));return u},setHeaders=(e,t={})=>{for(const r of Object.keys(t))e.set(r,t[r]);return e},Fo=class{#p;#d;env={};#f;finalized=!1;error;#h=200;#m;#y;#g;#b;#v=!0;#S;#w;#E;#i;#_;constructor(e,t){this.#p=e,t&&(this.#m=t.executionCtx,this.env=t.env,this.#E=t.notFoundHandler,this.#_=t.path,this.#i=t.matchResult)}get req(){return this.#d??=new Uo(this.#p,this.#_,this.#i),this.#d}get event(){if(this.#m&&"respondWith"in this.#m)return this.#m;throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#m)return this.#m;throw Error("This context has no ExecutionContext")}get res(){return this.#v=!1,this.#b||=new Response("404 Not Found",{status:404})}set res(e){if(this.#v=!1,this.#b&&e){e=new Response(e.body,e);for(const[t,r]of this.#b.headers.entries())if("content-type"!==t)if("set-cookie"===t){const t=this.#b.headers.getSetCookie();e.headers.delete("set-cookie");for(const r of t)e.headers.append("set-cookie",r)}else e.headers.set(t,r)}this.#b=e,this.finalized=!0}render=(...e)=>(this.#w??=e=>this.html(e),this.#w(...e));setLayout=e=>this.#S=e;getLayout=()=>this.#S;setRenderer=e=>{this.#w=e};header=(e,t,r)=>{if(this.finalized&&(this.#b=new Response(this.#b.body,this.#b)),void 0===t)return this.#y?this.#y.delete(e):this.#g&&delete this.#g[e.toLocaleLowerCase()],void(this.finalized&&this.res.headers.delete(e));r?.append?(this.#y||(this.#v=!1,this.#y=new Headers(this.#g),this.#g={}),this.#y.append(e,t)):this.#y?this.#y.set(e,t):(this.#g??={},this.#g[e.toLowerCase()]=t),this.finalized&&(r?.append?this.res.headers.append(e,t):this.res.headers.set(e,t))};status=e=>{this.#v=!1,this.#h=e};set=(e,t)=>{this.#f??=new Map,this.#f.set(e,t)};get=e=>this.#f?this.#f.get(e):void 0;get var(){return this.#f?Object.fromEntries(this.#f):{}}#R(e,t,r){if(this.#v&&!r&&!t&&200===this.#h)return new Response(e,{headers:this.#g});if(t&&"number"!=typeof t){const r=new Headers(t.headers);this.#y&&this.#y.forEach(((e,t)=>{"set-cookie"===t?r.append(t,e):r.set(t,e)}));const s=setHeaders(r,this.#g);return new Response(e,{headers:s,status:t.status??this.#h})}const s="number"==typeof t?t:this.#h;this.#g??={},this.#y??=new Headers,setHeaders(this.#y,this.#g),this.#b&&(this.#b.headers.forEach(((e,t)=>{"set-cookie"===t?this.#y?.append(t,e):this.#y?.set(t,e)})),setHeaders(this.#y,this.#g)),r??={};for(const[e,t]of Object.entries(r))if("string"==typeof t)this.#y.set(e,t);else{this.#y.delete(e);for(const r of t)this.#y.append(e,r)}return new Response(e,{status:s,headers:this.#y})}newResponse=(...e)=>this.#R(...e);body=(e,t,r)=>"number"==typeof t?this.#R(e,t,r):this.#R(e,t);text=(e,t,r)=>{if(!this.#g){if(this.#v&&!r&&!t)return new Response(e);this.#g={}}return this.#g["content-type"]="text/plain; charset=UTF-8","number"==typeof t?this.#R(e,t,r):this.#R(e,t)};json=(e,t,r)=>{const s=JSON.stringify(e);return this.#g??={},this.#g["content-type"]="application/json","number"==typeof t?this.#R(s,t,r):this.#R(s,t)};html=(e,t,r)=>(this.#g??={},this.#g["content-type"]="text/html; charset=UTF-8","object"==typeof e?resolveCallback(e,Ho,!1,{}).then((e=>"number"==typeof t?this.#R(e,t,r):this.#R(e,t))):"number"==typeof t?this.#R(e,t,r):this.#R(e,t));redirect=(e,t)=>(this.#y??=new Headers,this.#y.set("Location",String(e)),this.newResponse(null,t??302));notFound=()=>(this.#E??=()=>new Response,this.#E(this))},Vo="ALL",Wo=["get","post","put","delete","options","patch"],Ko="Can not add a route since the matcher is already built.",Go=class extends Error{},notFoundHandler=e=>e.text("404 Not Found",404),errorHandler=(e,t)=>{if("getResponse"in e){const r=e.getResponse();return t.newResponse(r.body,r)}return console.error(e),t.text("Internal Server Error",500)},Yo=class{get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#_="/";routes=[];constructor(e={}){[...Wo,"all"].forEach((e=>{this[e]=(t,...r)=>("string"==typeof t?this.#_=t:this.#P(e,this.#_,t),r.forEach((t=>{this.#P(e,this.#_,t)})),this)})),this.on=(e,t,...r)=>{for(const s of[t].flat()){this.#_=s;for(const t of[e].flat())r.map((e=>{this.#P(t.toUpperCase(),this.#_,e)}))}return this},this.use=(e,...t)=>("string"==typeof e?this.#_=e:(this.#_="*",t.unshift(e)),t.forEach((e=>{this.#P(Vo,this.#_,e)})),this);const{strict:t,...r}=e;Object.assign(this,r),this.getPath=t??1?e.getPath??getPath:getPathNoStrict}#O(){const e=new Yo({router:this.router,getPath:this.getPath});return e.errorHandler=this.errorHandler,e.#E=this.#E,e.routes=this.routes,e}#E=notFoundHandler;errorHandler=errorHandler;route(e,t){const r=this.basePath(e);return t.routes.map((e=>{let s;t.errorHandler===errorHandler?s=e.handler:(s=async(r,s)=>(await compose([],t.errorHandler)(r,(()=>e.handler(r,s)))).res,s.__COMPOSED_HANDLER=e.handler),r.#P(e.method,e.path,s)})),this}basePath(e){const t=this.#O();return t._basePath=mergePath(this._basePath,e),t}onError=e=>(this.errorHandler=e,this);notFound=e=>(this.#E=e,this);mount(e,t,r){let s,a;r&&("function"==typeof r?a=r:(a=r.optionHandler,s=!1===r.replaceRequest?e=>e:r.replaceRequest));const c=a?e=>{const t=a(e);return Array.isArray(t)?t:[t]}:e=>{let t;try{t=e.executionCtx}catch{}return[e.env,t]};s||=(()=>{const t=mergePath(this._basePath,e),r="/"===t?0:t.length;return e=>{const t=new URL(e.url);return t.pathname=t.pathname.slice(r)||"/",new Request(t,e)}})();return this.#P(Vo,mergePath(e,"*"),(async(e,r)=>{const a=await t(s(e.req.raw),...c(e));if(a)return a;await r()})),this}#P(e,t,r){e=e.toUpperCase();const s={path:t=mergePath(this._basePath,t),method:e,handler:r};this.router.add(e,t,[r,s]),this.routes.push(s)}#I(e,t){if(e instanceof Error)return this.errorHandler(e,t);throw e}#A(e,t,r,s){if("HEAD"===s)return(async()=>new Response(null,await this.#A(e,t,r,"GET")))();const a=this.getPath(e,{env:r}),c=this.router.match(s,a),u=new Fo(e,{path:a,matchResult:c,env:r,executionCtx:t,notFoundHandler:this.#E});if(1===c[0].length){let e;try{e=c[0][0][0][0](u,(async()=>{u.res=await this.#E(u)}))}catch(e){return this.#I(e,u)}return e instanceof Promise?e.then((e=>e||(u.finalized?u.res:this.#E(u)))).catch((e=>this.#I(e,u))):e??this.#E(u)}const p=compose(c[0],this.errorHandler,this.#E);return(async()=>{try{const e=await p(u);if(!e.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return e.res}catch(e){return this.#I(e,u)}})()}fetch=(e,...t)=>this.#A(e,t[1],t[0],e.method);request=(e,t,r,s)=>e instanceof Request?this.fetch(t?new Request(e,t):e,r,s):(e=e.toString(),this.fetch(new Request(/^https?:\/\//.test(e)?e:`http://localhost${mergePath("/",e)}`,t),r,s));fire=()=>{addEventListener("fetch",(e=>{e.respondWith(this.#A(e.request,e,void 0,e.request.method))}))}},Jo="[^/]+",Qo=".*",Xo="(?:|/.*)",Zo=Symbol(),es=new Set(".\\+*[^]$()");function compareKey(e,t){return 1===e.length?1===t.length?e<t?-1:1:-1:1===t.length||e===Qo||e===Xo?1:t===Qo||t===Xo?-1:e===Jo?1:t===Jo?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var ts=class{#T;#N;#C=Object.create(null);insert(e,t,r,s,a){if(0===e.length){if(void 0!==this.#T)throw Zo;if(a)return;return void(this.#T=t)}const[c,...u]=e,p="*"===c?0===u.length?["","",Qo]:["","",Jo]:"/*"===c?["","",Xo]:c.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);let d;if(p){const e=p[1];let t=p[2]||Jo;if(e&&p[2]&&(t=t.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(t)))throw Zo;if(d=this.#C[t],!d){if(Object.keys(this.#C).some((e=>e!==Qo&&e!==Xo)))throw Zo;if(a)return;d=this.#C[t]=new ts,""!==e&&(d.#N=s.varIndex++)}a||""===e||r.push([e,d.#N])}else if(d=this.#C[c],!d){if(Object.keys(this.#C).some((e=>e.length>1&&e!==Qo&&e!==Xo)))throw Zo;if(a)return;d=this.#C[c]=new ts}d.insert(u,t,r,s,a)}buildRegExpStr(){const e=Object.keys(this.#C).sort(compareKey).map((e=>{const t=this.#C[e];return("number"==typeof t.#N?`(${e})@${t.#N}`:es.has(e)?`\\${e}`:e)+t.buildRegExpStr()}));return"number"==typeof this.#T&&e.unshift(`#${this.#T}`),0===e.length?"":1===e.length?e[0]:"(?:"+e.join("|")+")"}},rs=class{#o={varIndex:0};#x=new ts;insert(e,t,r){const s=[],a=[];for(let t=0;;){let r=!1;if(e=e.replace(/\{[^}]+\}/g,(e=>{const s=`@\\${t}`;return a[t]=[s,e],t++,r=!0,s})),!r)break}const c=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let e=a.length-1;e>=0;e--){const[t]=a[e];for(let r=c.length-1;r>=0;r--)if(-1!==c[r].indexOf(t)){c[r]=c[r].replace(t,a[e][1]);break}}return this.#x.insert(c,t,s,this.#o,r),s}buildRegExp(){let e=this.#x.buildRegExpStr();if(""===e)return[/^$/,[],[]];let t=0;const r=[],s=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,((e,a,c)=>void 0!==a?(r[++t]=Number(a),"$()"):void 0!==c?(s[Number(c)]=++t,""):"")),[new RegExp(`^${e}`),r,s]}},ns=[],os=[/^$/,[],Object.create(null)],ss=Object.create(null);function buildWildcardRegExp(e){return ss[e]??=new RegExp("*"===e?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,((e,t)=>t?`\\${t}`:"(?:|/.*)"))}$`)}function findMiddleware(e,t){if(e)for(const r of Object.keys(e).sort(((e,t)=>t.length-e.length)))if(buildWildcardRegExp(r).test(t))return[...e[r]]}var is=class{name="RegExpRouter";#k;#L;constructor(){this.#k={[Vo]:Object.create(null)},this.#L={[Vo]:Object.create(null)}}add(e,t,r){const s=this.#k,a=this.#L;if(!s||!a)throw new Error(Ko);s[e]||[s,a].forEach((t=>{t[e]=Object.create(null),Object.keys(t[Vo]).forEach((r=>{t[e][r]=[...t[Vo][r]]}))})),"/*"===t&&(t="*");const c=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){const u=buildWildcardRegExp(t);return e===Vo?Object.keys(s).forEach((e=>{s[e][t]||=findMiddleware(s[e],t)||findMiddleware(s[Vo],t)||[]})):s[e][t]||=findMiddleware(s[e],t)||findMiddleware(s[Vo],t)||[],Object.keys(s).forEach((t=>{e!==Vo&&e!==t||Object.keys(s[t]).forEach((e=>{u.test(e)&&s[t][e].push([r,c])}))})),void Object.keys(a).forEach((t=>{e!==Vo&&e!==t||Object.keys(a[t]).forEach((e=>u.test(e)&&a[t][e].push([r,c])))}))}const u=checkOptionalParameter(t)||[t];for(let t=0,p=u.length;t<p;t++){const d=u[t];Object.keys(a).forEach((u=>{e!==Vo&&e!==u||(a[u][d]||=[...findMiddleware(s[u],d)||findMiddleware(s[Vo],d)||[]],a[u][d].push([r,c-p+t+1]))}))}}match(e,t){ss=Object.create(null);const r=this.#D();return this.match=(e,t)=>{const s=r[e]||r[Vo],a=s[2][t];if(a)return a;const c=t.match(s[0]);if(!c)return[[],ns];const u=c.indexOf("",1);return[s[1][u],c]},this.match(e,t)}#D(){const e=Object.create(null);return Object.keys(this.#L).concat(Object.keys(this.#k)).forEach((t=>{e[t]||=this.#z(t)})),this.#k=this.#L=void 0,e}#z(e){const t=[];let r=e===Vo;return[this.#k,this.#L].forEach((s=>{const a=s[e]?Object.keys(s[e]).map((t=>[t,s[e][t]])):[];0!==a.length?(r||=!0,t.push(...a)):e!==Vo&&t.push(...Object.keys(s[Vo]).map((e=>[e,s[Vo][e]])))})),r?function(e){const t=new rs,r=[];if(0===e.length)return os;const s=e.map((e=>[!/\*|\/:/.test(e[0]),...e])).sort((([e,t],[r,s])=>e?1:r?-1:t.length-s.length)),a=Object.create(null);for(let e=0,c=-1,u=s.length;e<u;e++){const[u,p,d]=s[e];let h;u?a[p]=[d.map((([e])=>[e,Object.create(null)])),ns]:c++;try{h=t.insert(p,c,u)}catch(e){throw e===Zo?new Go(p):e}u||(r[c]=d.map((([e,t])=>{const r=Object.create(null);for(t-=1;t>=0;t--){const[e,s]=h[t];r[e]=s}return[e,r]})))}const[c,u,p]=t.buildRegExp();for(let e=0,t=r.length;e<t;e++)for(let t=0,s=r[e].length;t<s;t++){const s=r[e][t]?.[1];if(!s)continue;const a=Object.keys(s);for(let e=0,t=a.length;e<t;e++)s[a[e]]=p[s[a[e]]]}const d=[];for(const e in u)d[e]=r[u[e]];return[c,d,a]}(t):null}},as=class{name="SmartRouter";#M=[];#L=[];constructor(e){this.#M=e.routers}add(e,t,r){if(!this.#L)throw new Error(Ko);this.#L.push([e,t,r])}match(e,t){if(!this.#L)throw new Error("Fatal error");const r=this.#M,s=this.#L,a=r.length;let c,u=0;for(;u<a;u++){const a=r[u];try{for(let e=0,t=s.length;e<t;e++)a.add(...s[e]);c=a.match(e,t)}catch(e){if(e instanceof Go)continue;throw e}this.match=a.match.bind(a),this.#M=[a],this.#L=void 0;break}if(u===a)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,c}get activeRouter(){if(this.#L||1!==this.#M.length)throw new Error("No active router has been determined yet.");return this.#M[0]}},cs=Object.create(null),ls=class{#B;#C;#$;#j=0;#q=cs;constructor(e,t,r){if(this.#C=r||Object.create(null),this.#B=[],e&&t){const r=Object.create(null);r[e]={handler:t,possibleKeys:[],score:0},this.#B=[r]}this.#$=[]}insert(e,t,r){this.#j=++this.#j;let s=this;const a=(e=>{const{groups:t,path:r}=extractGroupsFromPath(e),s=splitPath(r);return replaceGroupMarks(s,t)})(t),c=[];for(let e=0,t=a.length;e<t;e++){const t=a[e],r=a[e+1],u=getPattern(t,r),p=Array.isArray(u)?u[0]:t;if(Object.keys(s.#C).includes(p)){s=s.#C[p];const e=getPattern(t,r);e&&c.push(e[1])}else s.#C[p]=new ls,u&&(s.#$.push(u),c.push(u[1])),s=s.#C[p]}const u=Object.create(null),p={handler:r,possibleKeys:c.filter(((e,t,r)=>r.indexOf(e)===t)),score:this.#j};return u[e]=p,s.#B.push(u),s}#U(e,t,r,s){const a=[];for(let c=0,u=e.#B.length;c<u;c++){const u=e.#B[c],p=u[t]||u[Vo],d={};if(void 0!==p&&(p.params=Object.create(null),a.push(p),r!==cs||s&&s!==cs))for(let e=0,t=p.possibleKeys.length;e<t;e++){const t=p.possibleKeys[e],a=d[p.score];p.params[t]=s?.[t]&&!a?s[t]:r[t]??s?.[t],d[p.score]=!0}}return a}search(e,t){const r=[];this.#q=cs;let s=[this];const a=splitPath(t),c=[];for(let t=0,u=a.length;t<u;t++){const p=a[t],d=t===u-1,h=[];for(let u=0,m=s.length;u<m;u++){const m=s[u],g=m.#C[p];g&&(g.#q=m.#q,d?(g.#C["*"]&&r.push(...this.#U(g.#C["*"],e,m.#q)),r.push(...this.#U(g,e,m.#q))):h.push(g));for(let s=0,u=m.#$.length;s<u;s++){const u=m.#$[s],g=m.#q===cs?{}:{...m.#q};if("*"===u){const t=m.#C["*"];t&&(r.push(...this.#U(t,e,m.#q)),t.#q=g,h.push(t));continue}if(""===p)continue;const[v,S,w]=u,E=m.#C[v],_=a.slice(t).join("/");if(w instanceof RegExp){const t=w.exec(_);if(t){if(g[S]=t[0],r.push(...this.#U(E,e,m.#q,g)),Object.keys(E.#C).length){E.#q=g;const e=t[0].match(/\//)?.length??0;(c[e]||=[]).push(E)}continue}}(!0===w||w.test(p))&&(g[S]=p,d?(r.push(...this.#U(E,e,g,m.#q)),E.#C["*"]&&r.push(...this.#U(E.#C["*"],e,g,m.#q))):(E.#q=g,h.push(E)))}}s=h.concat(c.shift()??[])}return r.length>1&&r.sort(((e,t)=>e.score-t.score)),[r.map((({handler:e,params:t})=>[e,t]))]}},us=class{name="TrieRouter";#H;constructor(){this.#H=new ls}add(e,t,r){const s=checkOptionalParameter(t);if(s)for(let t=0,a=s.length;t<a;t++)this.#H.insert(e,s[t],r);else this.#H.insert(e,t,r)}match(e,t){return this.#H.search(e,t)}},ps="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromNamespaceIfNotNamed(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")&&1===Object.keys(e).length?e.default:e}var ds={};void 0!==typeof Symbol&&Symbol.asyncIterator||(Symbol.asyncIterator=Symbol.for("Symbol.asyncIterator"));function calculateRetryDelay(e,t){const r=t.retryDelayInMs*Math.pow(2,e),s=Math.min(t.maxRetryDelayInMs,r);var a,c;return{retryAfterInMs:s/2+(a=0,c=s/2,a=Math.ceil(a),c=Math.floor(c),Math.floor(Math.random()*(c-a+1))+a)}}function isObject(e){return!("object"!=typeof e||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}function isError$1(e){if(isObject(e)){const t="string"==typeof e.name,r="string"==typeof e.message;return t&&r}return!1}function stringToUint8Array(e,t){switch(t){case"utf-8":return function(e){return(new TextEncoder).encode(e)}(e);case"base64":return base64ToUint8Array(e);case"base64url":return function(e){const t=e.replace(/-/g,"+").replace(/_/g,"/");return base64ToUint8Array(t)}(e);case"hex":return function(e){const t=new Uint8Array(e.length/2);for(let r=0;r<e.length/2;++r){const s=e[2*r],a=e[2*r+1];if(!fs.has(s)||!fs.has(a))return t.slice(0,r);t[r]=parseInt(`${s}${a}`,16)}return t}(e)}}function base64ToUint8Array(e){return new Uint8Array([...atob(e)].map((e=>e.charCodeAt(0))))}const fs=new Set("0123456789abcdefABCDEF");var hs;const ms="function"==typeof(null===(hs=null===globalThis||void 0===globalThis?void 0:globalThis.crypto)||void 0===hs?void 0:hs.randomUUID)?globalThis.crypto.randomUUID.bind(globalThis.crypto):function(){let e="";for(let t=0;t<32;t++){const r=Math.floor(16*Math.random());e+=12===t?"4":16===t?3&r|8:r.toString(16),7!==t&&11!==t&&15!==t&&19!==t||(e+="-")}return e};function randomUUID$1(){return ms()}var ys,gs,bs,vs;"object"==typeof self&&"function"==typeof(null===self||void 0===self?void 0:self.importScripts)&&("DedicatedWorkerGlobalScope"===(null===(ys=self.constructor)||void 0===ys?void 0:ys.name)||"ServiceWorkerGlobalScope"===(null===(gs=self.constructor)||void 0===gs?void 0:gs.name)||null===(bs=self.constructor)||void 0===bs||bs.name),"undefined"!=typeof Deno&&void 0!==Deno.version&&Deno.version.deno,"undefined"!=typeof Bun&&Bun.version;const Ss=void 0!==globalThis.process&&Boolean(q.version)&&Boolean(null===(vs=q.versions)||void 0===vs?void 0:vs.node),ws="REDACTED",Es=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],_s=["api-version"];class Sanitizer{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:t=[]}={}){e=Es.concat(e),t=_s.concat(t),this.allowedHeaderNames=new Set(e.map((e=>e.toLowerCase()))),this.allowedQueryParameters=new Set(t.map((e=>e.toLowerCase())))}sanitize(e){const t=new Set;return JSON.stringify(e,((e,r)=>{if(r instanceof Error)return Object.assign(Object.assign({},r),{name:r.name,message:r.message});if("headers"===e)return this.sanitizeHeaders(r);if("url"===e)return this.sanitizeUrl(r);if("query"===e)return this.sanitizeQuery(r);if("body"!==e&&"response"!==e&&"operationSpec"!==e){if(Array.isArray(r)||isObject(r)){if(t.has(r))return"[Circular]";t.add(r)}return r}}),2)}sanitizeUrl(e){if("string"!=typeof e||null===e||""===e)return e;const t=new URL(e);if(!t.search)return e;for(const[e]of t.searchParams)this.allowedQueryParameters.has(e.toLowerCase())||t.searchParams.set(e,ws);return t.toString()}sanitizeHeaders(e){const t={};for(const r of Object.keys(e))this.allowedHeaderNames.has(r.toLowerCase())?t[r]=e[r]:t[r]=ws;return t}sanitizeQuery(e){if("object"!=typeof e||null===e)return e;const t={};for(const r of Object.keys(e))this.allowedQueryParameters.has(r.toLowerCase())?t[r]=e[r]:t[r]=ws;return t}}let Rs=class extends Error{constructor(e){super(e),this.name="AbortError"}};function delay$1(e,t){let r;const{abortSignal:s,abortErrorMsg:a}=null!=t?t:{};return function(e,t){const{cleanupBeforeAbort:r,abortSignal:s,abortErrorMsg:a}=null!=t?t:{};return new Promise(((t,c)=>{function rejectOnAbort(){c(new Rs(null!=a?a:"The operation was aborted."))}function removeListeners(){null==s||s.removeEventListener("abort",onAbort)}function onAbort(){null==r||r(),removeListeners(),rejectOnAbort()}if(null==s?void 0:s.aborted)return rejectOnAbort();try{e((e=>{removeListeners(),t(e)}),(e=>{removeListeners(),c(e)}))}catch(e){c(e)}null==s||s.addEventListener("abort",onAbort)}))}((t=>{r=setTimeout(t,e)}),{cleanupBeforeAbort:()=>clearTimeout(r),abortSignal:s,abortErrorMsg:null!=a?a:"The delay was aborted."})}function getErrorMessage(e){if(isError$1(e))return e.message;{let t;try{t="object"==typeof e&&e?JSON.stringify(e):String(e)}catch(e){t="[unable to stringify input]"}return`Unknown error ${t}`}}function isDefined(e){return null!=e}function isObjectWithProperties(e,t){if(!isDefined(e)||"object"!=typeof e)return!1;for(const r of t)if(!objectHasProperty(e,r))return!1;return!0}function objectHasProperty(e,t){return isDefined(e)&&"object"==typeof e&&t in e}function isError(e){return isError$1(e)}const Ps=Ss;const Os=Object.freeze(Object.defineProperty({__proto__:null,AzureKeyCredential:class{get key(){return this._key}constructor(e){if(!e)throw new Error("key must be a non-empty string");this._key=e}update(e){this._key=e}},AzureNamedKeyCredential:class{get key(){return this._key}get name(){return this._name}constructor(e,t){if(!e||!t)throw new TypeError("name and key must be non-empty strings");this._name=e,this._key=t}update(e,t){if(!e||!t)throw new TypeError("newName and newKey must be non-empty strings");this._name=e,this._key=t}},AzureSASCredential:class{get signature(){return this._signature}constructor(e){if(!e)throw new Error("shared access signature must be a non-empty string");this._signature=e}update(e){if(!e)throw new Error("shared access signature must be a non-empty string");this._signature=e}},isKeyCredential:function(e){return isObjectWithProperties(e,["key"])&&"string"==typeof e.key},isNamedKeyCredential:function(e){return isObjectWithProperties(e,["name","key"])&&"string"==typeof e.key&&"string"==typeof e.name},isSASCredential:function(e){return isObjectWithProperties(e,["signature"])&&"string"==typeof e.signature},isTokenCredential:function(e){const t=e;return t&&"function"==typeof t.getToken&&(void 0===t.signRequest||t.getToken.length>0)}},Symbol.toStringTag,{value:"Module"}));var extendStatics=function(e,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},extendStatics(e,t)};function __extends$1(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){return __assign=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},__assign.apply(this,arguments)};function __rest(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]])}return r}function __decorate(e,t,r,s){var a,c=arguments.length,u=c<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,r,s);else for(var p=e.length-1;p>=0;p--)(a=e[p])&&(u=(c<3?a(u):c>3?a(t,r,u):a(t,r))||u);return c>3&&u&&Object.defineProperty(t,r,u),u}function __param(e,t){return function(r,s){t(r,s,e)}}function __esDecorate(e,t,r,s,a,c){function accept(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var u,p=s.kind,d="getter"===p?"get":"setter"===p?"set":"value",h=!t&&e?s.static?e:e.prototype:null,m=t||(h?Object.getOwnPropertyDescriptor(h,s.name):{}),g=!1,v=r.length-1;v>=0;v--){var S={};for(var w in s)S[w]="access"===w?{}:s[w];for(var w in s.access)S.access[w]=s.access[w];S.addInitializer=function(e){if(g)throw new TypeError("Cannot add initializers after decoration has completed");c.push(accept(e||null))};var E=(0,r[v])("accessor"===p?{get:m.get,set:m.set}:m[d],S);if("accessor"===p){if(void 0===E)continue;if(null===E||"object"!=typeof E)throw new TypeError("Object expected");(u=accept(E.get))&&(m.get=u),(u=accept(E.set))&&(m.set=u),(u=accept(E.init))&&a.unshift(u)}else(u=accept(E))&&("field"===p?a.unshift(u):m[d]=u)}h&&Object.defineProperty(h,s.name,m),g=!0}function __runInitializers(e,t,r){for(var s=arguments.length>2,a=0;a<t.length;a++)r=s?t[a].call(e,r):t[a].call(e);return s?r:void 0}function __propKey(e){return"symbol"==typeof e?e:"".concat(e)}function __setFunctionName(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,r,s){return new(r||(r=Promise))((function(a,c){function fulfilled(e){try{step(s.next(e))}catch(e){c(e)}}function rejected(e){try{step(s.throw(e))}catch(e){c(e)}}function step(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())}))}function __generator(e,t){var r,s,a,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=verb(0),u.throw=verb(1),u.return=verb(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function verb(p){return function(d){return function(p){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(c=0)),c;)try{if(r=1,s&&(a=2&p[0]?s.return:p[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,p[1])).done)return a;switch(s=0,a&&(p=[2&p[0],a.value]),p[0]){case 0:case 1:a=p;break;case 4:return c.label++,{value:p[1],done:!1};case 5:c.label++,s=p[1],p=[0];continue;case 7:p=c.ops.pop(),c.trys.pop();continue;default:if(!(a=c.trys,(a=a.length>0&&a[a.length-1])||6!==p[0]&&2!==p[0])){c=0;continue}if(3===p[0]&&(!a||p[1]>a[0]&&p[1]<a[3])){c.label=p[1];break}if(6===p[0]&&c.label<a[1]){c.label=a[1],a=p;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(p);break}a[2]&&c.ops.pop(),c.trys.pop();continue}p=t.call(e,c)}catch(e){p=[6,e],s=0}finally{r=a=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([p,d])}}}var Is=Object.create?function(e,t,r,s){void 0===s&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]};function __exportStar(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Is(t,e,r)}function __values$1(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$5(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var s,a,c=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(s=c.next()).done;)u.push(s.value)}catch(e){a={error:e}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(a)throw a.error}}return u}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$5(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var s=Array(e),a=0;for(t=0;t<r;t++)for(var c=arguments[t],u=0,p=c.length;u<p;u++,a++)s[a]=c[u];return s}function __spreadArray$4(e,t,r){if(r||2===arguments.length)for(var s,a=0,c=t.length;a<c;a++)!s&&a in t||(s||(s=Array.prototype.slice.call(t,0,a)),s[a]=t[a]);return e.concat(s||Array.prototype.slice.call(t))}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,a=r.apply(e,t||[]),c=[];return s=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),verb("next"),verb("throw"),verb("return",(function(e){return function(t){return Promise.resolve(t).then(e,reject)}})),s[Symbol.asyncIterator]=function(){return this},s;function verb(e,t){a[e]&&(s[e]=function(t){return new Promise((function(r,s){c.push([e,t,r,s])>1||resume(e,t)}))},t&&(s[e]=t(s[e])))}function resume(e,t){try{!function(e){e.value instanceof __await?Promise.resolve(e.value.v).then(fulfill,reject):settle(c[0][2],e)}(a[e](t))}catch(e){settle(c[0][3],e)}}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){e(t),c.shift(),c.length&&resume(c[0][0],c[0][1])}}function __asyncDelegator(e){var t,r;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(s,a){t[s]=e[s]?function(t){return(r=!r)?{value:__await(e[s](t)),done:!1}:a?a(t):t}:a}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=__values$1(e),t={},verb("next"),verb("throw"),verb("return"),t[Symbol.asyncIterator]=function(){return this},t);function verb(r){t[r]=e[r]&&function(t){return new Promise((function(s,a){(function(e,t,r,s){Promise.resolve(s).then((function(t){e({value:t,done:r})}),t)})(s,a,(t=e[r](t)).done,t.value)}))}}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var As=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},ownKeys=function(e){return ownKeys=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},ownKeys(e)};function __importStar(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=ownKeys(e),s=0;s<r.length;s++)"default"!==r[s]&&Is(t,e,r[s]);return As(t,e),t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)}function __classPrivateFieldSet(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r}function __classPrivateFieldIn(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function __addDisposableResource(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var s,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(void 0===s){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose],r&&(a=s)}if("function"!=typeof s)throw new TypeError("Object not disposable.");a&&(s=function(){try{a.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:s,async:r})}else r&&e.stack.push({async:!0});return t}var Ts="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var s=new Error(r);return s.name="SuppressedError",s.error=e,s.suppressed=t,s};function __disposeResources(e){function fail(t){e.error=e.hasError?new Ts(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var t,r=0;return function next(){for(;t=e.stack.pop();)try{if(!t.async&&1===r)return r=0,e.stack.push(t),Promise.resolve().then(next);if(t.dispose){var s=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(s).then(next,(function(e){return fail(e),next()}))}else r|=1}catch(e){fail(e)}if(1===r)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function __rewriteRelativeImportExtension(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,(function(e,r,s,a,c){return r?t?".jsx":".js":!s||a&&c?s+a+"."+c.toLowerCase()+"js":e})):e}const Ns={__extends:__extends$1,__assign:__assign,__rest:__rest,__decorate:__decorate,__param:__param,__esDecorate:__esDecorate,__runInitializers:__runInitializers,__propKey:__propKey,__setFunctionName:__setFunctionName,__metadata:__metadata,__awaiter:__awaiter,__generator:__generator,__createBinding:Is,__exportStar:__exportStar,__values:__values$1,__read:__read$5,__spread:__spread,__spreadArrays:__spreadArrays,__spreadArray:__spreadArray$4,__await:__await,__asyncGenerator:__asyncGenerator,__asyncDelegator:__asyncDelegator,__asyncValues:__asyncValues,__makeTemplateObject:__makeTemplateObject,__importStar:__importStar,__importDefault:__importDefault,__classPrivateFieldGet:__classPrivateFieldGet,__classPrivateFieldSet:__classPrivateFieldSet,__classPrivateFieldIn:__classPrivateFieldIn,__addDisposableResource:__addDisposableResource,__disposeResources:__disposeResources,__rewriteRelativeImportExtension:__rewriteRelativeImportExtension},Cs=getDefaultExportFromNamespaceIfNotNamed(Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:__addDisposableResource,get __assign(){return __assign},__asyncDelegator:__asyncDelegator,__asyncGenerator:__asyncGenerator,__asyncValues:__asyncValues,__await:__await,__awaiter:__awaiter,__classPrivateFieldGet:__classPrivateFieldGet,__classPrivateFieldIn:__classPrivateFieldIn,__classPrivateFieldSet:__classPrivateFieldSet,__createBinding:Is,__decorate:__decorate,__disposeResources:__disposeResources,__esDecorate:__esDecorate,__exportStar:__exportStar,__extends:__extends$1,__generator:__generator,__importDefault:__importDefault,__importStar:__importStar,__makeTemplateObject:__makeTemplateObject,__metadata:__metadata,__param:__param,__propKey:__propKey,__read:__read$5,__rest:__rest,__rewriteRelativeImportExtension:__rewriteRelativeImportExtension,__runInitializers:__runInitializers,__setFunctionName:__setFunctionName,__spread:__spread,__spreadArray:__spreadArray$4,__spreadArrays:__spreadArrays,__values:__values$1,default:Ns},Symbol.toStringTag,{value:"Module"})));class AbortError extends Error{constructor(e){super(e),this.name="AbortError"}}let xs;void 0!==q&&q.env;let ks=[],Ls=[];const Ds=[],zs=Object.assign((e=>createDebugger(e)),{enable:enable,enabled:enabled,disable:function(){const e=xs||"";return enable(""),e},log:function(...e){if(e.length>0){const t=String(e[0]);t.includes(":error")?console.error(...e):t.includes(":warning")?console.warn(...e):t.includes(":info")?console.info(...e):(t.includes(":verbose"),console.debug(...e))}}});function enable(e){xs=e,ks=[],Ls=[];const t=/\*/g,r=e.split(",").map((e=>e.trim().replace(t,".*?")));for(const e of r)e.startsWith("-")?Ls.push(new RegExp(`^${e.substr(1)}$`)):ks.push(new RegExp(`^${e}$`));for(const e of Ds)e.enabled=enabled(e.namespace)}function enabled(e){if(e.endsWith("*"))return!0;for(const t of Ls)if(t.test(e))return!1;for(const t of ks)if(t.test(e))return!0;return!1}function createDebugger(e){const t=Object.assign((function(...r){if(!t.enabled)return;r.length>0&&(r[0]=`${e} ${r[0]}`);t.log(...r)}),{enabled:enabled(e),destroy:destroy,log:zs.log,namespace:e,extend:extend});return Ds.push(t),t}function destroy(){const e=Ds.indexOf(this);return e>=0&&(Ds.splice(e,1),!0)}function extend(e){const t=createDebugger(`${this.namespace}:${e}`);return t.log=this.log,t}const Ms=["verbose","info","warning","error"],Bs={verbose:400,info:300,warning:200,error:100};function patchLogMethod(e,t){t.log=(...t)=>{e.log(...t)}}function isTypeSpecRuntimeLogLevel(e){return Ms.includes(e)}function createLoggerContext(e){const t=new Set,r=void 0!==q&&q.env&&q.env[e.logLevelEnvVarName]||void 0;let s;const a=zs(e.namespace);function contextSetLogLevel(e){if(e&&!isTypeSpecRuntimeLogLevel(e))throw new Error(`Unknown log level '${e}'. Acceptable values: ${Ms.join(",")}`);s=e;const r=[];for(const e of t)shouldEnable(e)&&r.push(e.namespace);zs.enable(r.join(","))}function shouldEnable(e){return Boolean(s&&Bs[e.level]<=Bs[s])}function createLogger(e,r){const s=Object.assign(e.extend(r),{level:r});if(patchLogMethod(e,s),shouldEnable(s)){const e=zs.disable();zs.enable(e+","+s.namespace)}return t.add(s),s}return a.log=(...e)=>{zs.log(...e)},r&&(isTypeSpecRuntimeLogLevel(r)?contextSetLogLevel(r):console.error(`${e.logLevelEnvVarName} set to unknown log level '${r}'; logging is not enabled. Acceptable values: ${Ms.join(", ")}.`)),{setLogLevel:contextSetLogLevel,getLogLevel:function(){return s},createClientLogger:function(e){const t=a.extend(e);return patchLogMethod(a,t),{error:createLogger(t,"error"),warning:createLogger(t,"warning"),info:createLogger(t,"info"),verbose:createLogger(t,"verbose")}},logger:a}}const $s=createLoggerContext({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});function createClientLogger$1(e){return $s.createClientLogger(e)}function normalizeName(e){return e.toLowerCase()}class HttpHeadersImpl{constructor(e){if(this._headersMap=new Map,e)for(const t of Object.keys(e))this.set(t,e[t])}set(e,t){this._headersMap.set(normalizeName(e),{name:e,value:String(t).trim()})}get(e){var t;return null===(t=this._headersMap.get(normalizeName(e)))||void 0===t?void 0:t.value}has(e){return this._headersMap.has(normalizeName(e))}delete(e){this._headersMap.delete(normalizeName(e))}toJSON(e={}){const t={};if(e.preserveCase)for(const e of this._headersMap.values())t[e.name]=e.value;else for(const[e,r]of this._headersMap)t[e]=r.value;return t}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return function*(e){for(const t of e.values())yield[t.name,t.value]}(this._headersMap)}}function createHttpHeaders$1(e){return new HttpHeadersImpl(e)}class PipelineRequestImpl{constructor(e){var t,r,s,a,c,u,p;this.url=e.url,this.body=e.body,this.headers=null!==(t=e.headers)&&void 0!==t?t:createHttpHeaders$1(),this.method=null!==(r=e.method)&&void 0!==r?r:"GET",this.timeout=null!==(s=e.timeout)&&void 0!==s?s:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=null!==(a=e.disableKeepAlive)&&void 0!==a&&a,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=null!==(c=e.withCredentials)&&void 0!==c&&c,this.abortSignal=e.abortSignal,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||randomUUID$1(),this.allowInsecureConnection=null!==(u=e.allowInsecureConnection)&&void 0!==u&&u,this.enableBrowserStreams=null!==(p=e.enableBrowserStreams)&&void 0!==p&&p,this.requestOverrides=e.requestOverrides,this.authSchemes=e.authSchemes}}const js=new Set(["Deserialize","Serialize","Retry","Sign"]);class HttpPipeline{constructor(e){var t;this._policies=[],this._policies=null!==(t=null==e?void 0:e.slice(0))&&void 0!==t?t:[],this._orderedPolicies=void 0}addPolicy(e,t={}){if(t.phase&&t.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(t.phase&&!js.has(t.phase))throw new Error(`Invalid phase name: ${t.phase}`);if(t.afterPhase&&!js.has(t.afterPhase))throw new Error(`Invalid afterPhase name: ${t.afterPhase}`);this._policies.push({policy:e,options:t}),this._orderedPolicies=void 0}removePolicy(e){const t=[];return this._policies=this._policies.filter((r=>!(e.name&&r.policy.name===e.name||e.phase&&r.options.phase===e.phase)||(t.push(r.policy),!1))),this._orderedPolicies=void 0,t}sendRequest(e,t){return this.getOrderedPolicies().reduceRight(((e,t)=>r=>t.sendRequest(r,e)),(t=>e.sendRequest(t)))(t)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new HttpPipeline(this._policies)}static create(){return new HttpPipeline}orderPolicies(){const e=[],t=new Map;function createPhase(e){return{name:e,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const r=createPhase("Serialize"),s=createPhase("None"),a=createPhase("Deserialize"),c=createPhase("Retry"),u=createPhase("Sign"),p=[r,s,a,c,u];function getPhase(e){return"Retry"===e?c:"Serialize"===e?r:"Deserialize"===e?a:"Sign"===e?u:s}for(const e of this._policies){const r=e.policy,s=e.options,a=r.name;if(t.has(a))throw new Error("Duplicate policy names not allowed in pipeline");const c={policy:r,dependsOn:new Set,dependants:new Set};s.afterPhase&&(c.afterPhase=getPhase(s.afterPhase),c.afterPhase.hasAfterPolicies=!0),t.set(a,c);getPhase(s.phase).policies.add(c)}for(const e of this._policies){const{policy:r,options:s}=e,a=r.name,c=t.get(a);if(!c)throw new Error(`Missing node for policy ${a}`);if(s.afterPolicies)for(const e of s.afterPolicies){const r=t.get(e);r&&(c.dependsOn.add(r),r.dependants.add(c))}if(s.beforePolicies)for(const e of s.beforePolicies){const r=t.get(e);r&&(r.dependsOn.add(c),c.dependants.add(r))}}function walkPhase(r){r.hasRun=!0;for(const s of r.policies)if((!s.afterPhase||s.afterPhase.hasRun&&!s.afterPhase.policies.size)&&0===s.dependsOn.size){e.push(s.policy);for(const e of s.dependants)e.dependsOn.delete(s);t.delete(s.policy.name),r.policies.delete(s)}}function walkPhases(){for(const e of p){if(walkPhase(e),e.policies.size>0&&e!==s)return void(s.hasRun||walkPhase(s));e.hasAfterPolicies&&walkPhase(s)}}let d=0;for(;t.size>0;){d++;const t=e.length;if(walkPhases(),e.length<=t&&d>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}}const qs=Symbol(),Us=new Sanitizer;let Hs=class RestError extends Error{constructor(e,t={}){super(e),this.name="RestError",this.code=t.code,this.statusCode=t.statusCode,Object.defineProperty(this,"request",{value:t.request,enumerable:!1}),Object.defineProperty(this,"response",{value:t.response,enumerable:!1}),Object.defineProperty(this,qs,{value:()=>`RestError: ${this.message} \n ${Us.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`,enumerable:!1}),Object.setPrototypeOf(this,RestError.prototype)}};function isWebReadableStream(e){return Boolean(e&&"function"==typeof e.getReader&&"function"==typeof e.tee)}Hs.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",Hs.PARSE_ERROR="PARSE_ERROR";class FetchHttpClient{async sendRequest(e){if("https:"!==new URL(e.url).protocol&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);if(e.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");try{return await async function(e){const{abortController:t,abortControllerCleanup:r}=function(e){const t=new AbortController;let r,s;if(e.abortSignal){if(e.abortSignal.aborted)throw new AbortError("The operation was aborted. Request has already been canceled.");s=e=>{"abort"===e.type&&t.abort()},e.abortSignal.addEventListener("abort",s),r=()=>{var t;s&&(null===(t=e.abortSignal)||void 0===t||t.removeEventListener("abort",s))}}e.timeout>0&&setTimeout((()=>{t.abort()}),e.timeout);return{abortController:t,abortControllerCleanup:r}}(e);try{const a=function(e){const t=new Headers;for(const[r,s]of e)t.append(r,s);return t}(e.headers),{streaming:c,body:u}=function(e){const t="function"==typeof e.body?e.body():e.body;if(r=t,Boolean(r&&"function"==typeof r.pipe))throw new Error("Node streams are not supported in browser environment.");var r;return isWebReadableStream(t)?{streaming:!0,body:buildBodyStream(t,{onProgress:e.onUploadProgress})}:{streaming:!1,body:t}}(e),p=Object.assign(Object.assign({body:u,method:e.method,headers:a,signal:t.signal},"credentials"in Request.prototype?{credentials:e.withCredentials?"include":"same-origin"}:{}),"cache"in Request.prototype?{cache:"no-store"}:{});c&&(p.duplex="half");const d=await fetch(e.url,Object.assign(Object.assign({},p),e.requestOverrides));return s=e.body,("function"==typeof Blob||"object"==typeof Blob)&&s instanceof Blob&&e.onUploadProgress&&e.onUploadProgress({loadedBytes:e.body.size}),async function(e,t,r){var s,a;const c=function(e){const t=createHttpHeaders$1();for(const[r,s]of e.headers)t.set(r,s);return t}(e),u={request:t,headers:c,status:e.status},p=isWebReadableStream(e.body)?buildBodyStream(e.body,{onProgress:t.onDownloadProgress,onEnd:r}):e.body;if((null===(s=t.streamResponseStatusCodes)||void 0===s?void 0:s.has(Number.POSITIVE_INFINITY))||(null===(a=t.streamResponseStatusCodes)||void 0===a?void 0:a.has(u.status)))if(t.enableBrowserStreams)u.browserStreamBody=null!=p?p:void 0;else{const e=new Response(p);u.blobBody=e.blob(),null==r||r()}else{const e=new Response(p);u.bodyAsText=await e.text(),null==r||r()}return u}(d,e,r)}catch(e){throw null==r||r(),e}var s}(e)}catch(t){throw function(e,t){var r;return e&&"AbortError"===(null==e?void 0:e.name)?e:new Hs(`Error sending request: ${e.message}`,{code:null!==(r=null==e?void 0:e.code)&&void 0!==r?r:Hs.REQUEST_SEND_ERROR,request:t})}(t,e)}}}function buildBodyStream(e,t={}){let r=0;const{onProgress:s,onEnd:a}=t;if(function(e){return void 0!==e.pipeThrough&&void 0!==self.TransformStream}(e))return e.pipeThrough(new TransformStream({transform(e,t){null!==e?(t.enqueue(e),r+=e.length,s&&s({loadedBytes:r})):t.terminate()},flush(){null==a||a()}}));{const t=e.getReader();return new ReadableStream({async pull(e){var c;const{done:u,value:p}=await t.read();if(u||!p)return null==a||a(),e.close(),void t.releaseLock();r+=null!==(c=null==p?void 0:p.length)&&void 0!==c?c:0,e.enqueue(p),s&&s({loadedBytes:r})},cancel:e=>(null==a||a(),t.cancel(e))})}}function createDefaultHttpClient$1(){return new FetchHttpClient}const Fs=createClientLogger$1("ts-http-runtime"),Vs="logPolicy";const Ws="redirectPolicy",Ks=["GET","HEAD"];function redirectPolicy$1(e={}){const{maxRetries:t=20}=e;return{name:Ws,async sendRequest(e,r){const s=await r(e);return handleRedirect(r,s,t)}}}async function handleRedirect(e,t,r,s=0){const{request:a,status:c,headers:u}=t,p=u.get("location");if(p&&(300===c||301===c&&Ks.includes(a.method)||302===c&&Ks.includes(a.method)||303===c&&"POST"===a.method||307===c)&&s<r){const t=new URL(p,a.url);a.url=t.toString(),303===c&&(a.method="GET",a.headers.delete("Content-Length"),delete a.body),a.headers.delete("Authorization");const u=await e(a);return handleRedirect(e,u,r,s+1)}return t}function delay(e,t,r){return new Promise(((s,a)=>{let c,u;const rejectOnAbort=()=>a(new AbortError((null==r?void 0:r.abortErrorMsg)?null==r?void 0:r.abortErrorMsg:"The operation was aborted.")),removeListeners=()=>{(null==r?void 0:r.abortSignal)&&u&&r.abortSignal.removeEventListener("abort",u)};if(u=()=>(c&&clearTimeout(c),removeListeners(),rejectOnAbort()),(null==r?void 0:r.abortSignal)&&r.abortSignal.aborted)return rejectOnAbort();c=setTimeout((()=>{removeListeners(),s(t)}),e),(null==r?void 0:r.abortSignal)&&r.abortSignal.addEventListener("abort",u)}))}function parseHeaderValueAsNumber(e,t){const r=e.headers.get(t);if(!r)return;const s=Number(r);return Number.isNaN(s)?void 0:s}const Gs="Retry-After",Ys=["retry-after-ms","x-ms-retry-after-ms",Gs];function getRetryAfterInMs(e){if(e&&[429,503].includes(e.status))try{for(const t of Ys){const r=parseHeaderValueAsNumber(e,t);if(0===r||r){return r*(t===Gs?1e3:1)}}const t=e.headers.get(Gs);if(!t)return;const r=Date.parse(t)-Date.now();return Number.isFinite(r)?Math.max(0,r):void 0}catch(e){return}}function throttlingRetryStrategy(){return{name:"throttlingRetryStrategy",retry({response:e}){const t=getRetryAfterInMs(e);return Number.isFinite(t)?{retryAfterInMs:t}:{skipStrategy:!0}}}}function exponentialRetryStrategy(e={}){var t,r;const s=null!==(t=e.retryDelayInMs)&&void 0!==t?t:1e3,a=null!==(r=e.maxRetryDelayInMs)&&void 0!==r?r:64e3;return{name:"exponentialRetryStrategy",retry({retryCount:t,response:r,responseError:c}){const u=function(e){if(!e)return!1;return"ETIMEDOUT"===e.code||"ESOCKETTIMEDOUT"===e.code||"ECONNREFUSED"===e.code||"ECONNRESET"===e.code||"ENOENT"===e.code||"ENOTFOUND"===e.code}(c),p=u&&e.ignoreSystemErrors,d=function(e){return Boolean(e&&void 0!==e.status&&(e.status>=500||408===e.status)&&501!==e.status&&505!==e.status)}(r),h=d&&e.ignoreHttpStatusCodes,m=r&&(function(e){return Number.isFinite(getRetryAfterInMs(e))}(r)||!d);return m||h||p?{skipStrategy:!0}:!c||u||d?calculateRetryDelay(t,{retryDelayInMs:s,maxRetryDelayInMs:a}):{errorToThrow:c}}}}const Js=createClientLogger$1("ts-http-runtime retryPolicy");function retryPolicy$1(e,t={maxRetries:3}){const r=t.logger||Js;return{name:"retryPolicy",async sendRequest(s,a){var c,u;let p,d,h=-1;e:for(;;){h+=1,p=void 0,d=void 0;try{r.info(`Retry ${h}: Attempting to send request`,s.requestId),p=await a(s),r.info(`Retry ${h}: Received a response from request`,s.requestId)}catch(e){if(r.error(`Retry ${h}: Received an error from request`,s.requestId),d=e,!e||"RestError"!==d.name)throw e;p=d.response}if(null===(c=s.abortSignal)||void 0===c?void 0:c.aborted){r.error(`Retry ${h}: Request aborted.`);throw new AbortError}if(h>=(null!==(u=t.maxRetries)&&void 0!==u?u:3)){if(r.info(`Retry ${h}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),d)throw d;if(p)return p;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${h}: Processing ${e.length} retry strategies.`);t:for(const t of e){const e=t.logger||r;e.info(`Retry ${h}: Processing retry strategy ${t.name}.`);const a=t.retry({retryCount:h,response:p,responseError:d});if(a.skipStrategy){e.info(`Retry ${h}: Skipped.`);continue t}const{errorToThrow:c,retryAfterInMs:u,redirectTo:m}=a;if(c)throw e.error(`Retry ${h}: Retry strategy ${t.name} throws error:`,c),c;if(u||0===u){e.info(`Retry ${h}: Retry strategy ${t.name} retries after ${u}`),await delay(u,void 0,{abortSignal:s.abortSignal});continue e}if(m){e.info(`Retry ${h}: Retry strategy ${t.name} redirects to ${m}`),s.url=m;continue e}}if(d)throw r.info("None of the retry strategies could work with the received error. Throwing it."),d;if(p)return r.info("None of the retry strategies could work with the received response. Returning it."),p}}}}const Qs="formDataPolicy";function formDataPolicy$1(){return{name:Qs,async sendRequest(e,t){if(Ss&&"undefined"!=typeof FormData&&e.body instanceof FormData&&(e.formData=function(e){var t;const r={};for(const[s,a]of e.entries())null!==(t=r[s])&&void 0!==t||(r[s]=[]),r[s].push(a);return r}(e.body),e.body=void 0),e.formData){const t=e.headers.get("Content-Type");t&&-1!==t.indexOf("application/x-www-form-urlencoded")?e.body=function(e){const t=new URLSearchParams;for(const[r,s]of Object.entries(e))if(Array.isArray(s))for(const e of s)t.append(r,e.toString());else t.append(r,s.toString());return t.toString()}(e.formData):await async function(e,t){const r=t.headers.get("Content-Type");if(r&&!r.startsWith("multipart/form-data"))return;t.headers.set("Content-Type",null!=r?r:"multipart/form-data");const s=[];for(const[t,r]of Object.entries(e))for(const e of Array.isArray(r)?r:[r])if("string"==typeof e)s.push({headers:createHttpHeaders$1({"Content-Disposition":`form-data; name="${t}"`}),body:stringToUint8Array(e,"utf-8")});else{if(null==e||"object"!=typeof e)throw new Error(`Unexpected value for key ${t}: ${e}. Value should be serialized to string first.`);{const r=e.name||"blob",a=createHttpHeaders$1();a.set("Content-Disposition",`form-data; name="${t}"; filename="${r}"`),a.set("Content-Type",e.type||"application/octet-stream"),s.push({headers:a,body:e})}}t.multipartBody={parts:s}}(e.formData,e),e.formData=void 0}return t(e)}}}const Xs="proxyPolicy is not supported in browser environment";const Zs="agentPolicy";const ei="tlsPolicy";async function toBlobPart(e){if(e instanceof Blob||e instanceof Uint8Array)return e;if(isWebReadableStream(e))return new Response(e).blob();throw new Error("Unsupported source type. Only Blob, Uint8Array, and ReadableStream are supported in browser.")}function encodeHeaders(e){let t="";for(const[r,s]of e)t+=`${r}: ${s}\r\n`;return t}function getLength(e){return e instanceof Uint8Array?e.byteLength:"function"==typeof e.stream?-1===e.size?void 0:e.size:void 0}async function buildRequestBody(e,t,r){const s=[stringToUint8Array(`--${r}`,"utf-8"),...t.flatMap((e=>[stringToUint8Array("\r\n","utf-8"),stringToUint8Array(encodeHeaders(e.headers),"utf-8"),stringToUint8Array("\r\n","utf-8"),e.body,stringToUint8Array(`\r\n--${r}`,"utf-8")])),stringToUint8Array("--\r\n\r\n","utf-8")],a=function(e){let t=0;for(const r of e){const e=getLength(r);if(void 0===e)return;t+=e}return t}(s);a&&e.headers.set("Content-Length",a),e.body=await async function(e){const t=[];for(const r of e)t.push(await toBlobPart("function"==typeof r?r():r));return new Blob(t)}(s)}const ti="multipartPolicy",ri=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function multipartPolicy$1(){return{name:ti,async sendRequest(e,t){var r;if(!e.multipartBody)return t(e);if(e.body)throw new Error("multipartBody and regular body cannot be set at the same time");let s=e.multipartBody.boundary;const a=null!==(r=e.headers.get("Content-Type"))&&void 0!==r?r:"multipart/mixed",c=a.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!c)throw new Error(`Got multipart request body, but content-type header was not multipart: ${a}`);const[,u,p]=c;if(p&&s&&p!==s)throw new Error(`Multipart boundary was specified as ${p} in the header, but got ${s} in the request body`);return null!=s||(s=p),s?function(e){if(e.length>70)throw new Error(`Multipart boundary "${e}" exceeds maximum length of 70 characters`);if(Array.from(e).some((e=>!ri.has(e))))throw new Error(`Multipart boundary "${e}" contains invalid characters`)}(s):s=`----AzSDKFormBoundary${randomUUID$1()}`,e.headers.set("Content-Type",`${u}; boundary=${s}`),await buildRequestBody(e,e.multipartBody.parts,s),e.multipartBody=void 0,t(e)}}}function createEmptyPipeline(){return HttpPipeline.create()}const ni=createLoggerContext({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"}),oi=ni.logger;function createClientLogger(e){return ni.createClientLogger(e)}const si=Object.freeze(Object.defineProperty({__proto__:null,AzureLogger:oi,createClientLogger:createClientLogger,getLogLevel:function(){return ni.getLogLevel()},setLogLevel:function(e){ni.setLogLevel(e)}},Symbol.toStringTag,{value:"Module"})),ii=createClientLogger("core-rest-pipeline");const ai="systemErrorRetryPolicy";const ci="throttlingRetryPolicy";const li=Vs;function logPolicy(e={}){return function(e={}){var t;const r=null!==(t=e.logger)&&void 0!==t?t:Fs.info,s=new Sanitizer({additionalAllowedHeaderNames:e.additionalAllowedHeaderNames,additionalAllowedQueryParameters:e.additionalAllowedQueryParameters});return{name:Vs,async sendRequest(e,t){if(!r.enabled)return t(e);r(`Request: ${s.sanitize(e)}`);const a=await t(e);return r(`Response status code: ${a.status}`),r(`Headers: ${s.sanitize(a.headers)}`),a}}}(Object.assign({logger:ii.info},e))}const ui=Ws;function redirectPolicy(e={}){return redirectPolicy$1(e)}const pi="1.21.0";async function getUserAgentValue(e){const t=new Map;t.set("core-rest-pipeline",pi),await async function(e){const t=globalThis.navigator;let r="unknown";if(null==t?void 0:t.userAgentData){const s=await t.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);r=`${s.architecture}-${s.platform}-${s.platformVersion}`;const a=function(e){const t=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const r of t){const t=e.find((e=>e.brand===r));if(t)return t}}(t.userAgentData.brands);a&&e.set(a.brand,a.version)}else if(null==t?void 0:t.platform){r=t.platform;const s=function(e){const t=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const r of t){const t=e.match(r.regex);if(t)return{brand:r.name,version:t[1]}}}(t.userAgent);s&&e.set(s.brand,s.version)}else"string"==typeof globalThis.EdgeRuntime&&e.set("EdgeRuntime",globalThis.EdgeRuntime);e.set("OS",r)}(t);const r=function(e){const t=[];for(const[r,s]of e){const e=s?`${r}/${s}`:r;t.push(e)}return t.join(" ")}(t);return e?`${e} ${r}`:r}const di="x-ms-useragent",fi="userAgentPolicy";function userAgentPolicy(e={}){const t=getUserAgentValue(e.userAgentPrefix);return{name:fi,sendRequest:async(e,r)=>(e.headers.has(di)||e.headers.set(di,await t),r(e))}}const hi={arrayBuffer:()=>{throw new Error("Not implemented")},bytes:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},mi=Symbol("rawContent");function hasRawContent(e){return"function"==typeof e[mi]}const yi=ti;function multipartPolicy(){const e=multipartPolicy$1();return{name:yi,sendRequest:async(t,r)=>{if(t.multipartBody)for(const e of t.multipartBody.parts)hasRawContent(e.body)&&(e.body=hasRawContent(s=e.body)?s[mi]():s);var s;return e.sendRequest(t,r)}}}function decompressResponsePolicy(){return function(){throw new Error("decompressResponsePolicy is not supported in browser environment")}()}function defaultRetryPolicy(e={}){return function(e={}){var t;return{name:"defaultRetryPolicy",sendRequest:retryPolicy$1([throttlingRetryStrategy(),exponentialRetryStrategy(e)],{maxRetries:null!==(t=e.maxRetries)&&void 0!==t?t:3}).sendRequest}}(e)}const gi=Qs;function formDataPolicy(){return formDataPolicy$1()}function proxyPolicy(e,t){return function(){throw new Error(Xs)}()}const bi="setClientRequestIdPolicy";function setClientRequestIdPolicy(e="x-ms-client-request-id"){return{name:bi,sendRequest:async(t,r)=>(t.headers.has(e)||t.headers.set(e,t.requestId),r(t))}}const vi=Zs;function agentPolicy(e){return function(e){return{name:Zs,sendRequest:async(t,r)=>(t.agent||(t.agent=e),r(t))}}(e)}const Si=ei;function tlsPolicy(e){return function(e){return{name:ei,sendRequest:async(t,r)=>(t.tlsSettings||(t.tlsSettings=e),r(t))}}(e)}const wi={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function createTracingContext(e={}){let t=new TracingContextImpl(e.parentContext);return e.span&&(t=t.setValue(wi.span,e.span)),e.namespace&&(t=t.setValue(wi.namespace,e.namespace)),t}class TracingContextImpl{constructor(e){this._contextMap=e instanceof TracingContextImpl?new Map(e._contextMap):new Map}setValue(e,t){const r=new TracingContextImpl(this);return r._contextMap.set(e,t),r}getValue(e){return this._contextMap.get(e)}deleteValue(e){const t=new TracingContextImpl(this);return t._contextMap.delete(e),t}}const Ei={instrumenterImplementation:void 0};function getInstrumenter(){return Ei.instrumenterImplementation||(Ei.instrumenterImplementation={createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(e,t)=>({span:{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}},tracingContext:createTracingContext({parentContext:t.tracingContext})}),withContext:(e,t,...r)=>t(...r)}),Ei.instrumenterImplementation}const _i=Hs;function isRestError(e){return function(e){return e instanceof Hs||isError$1(e)&&"RestError"===e.name}(e)}const Ri="tracingPolicy";function tracingPolicy(e={}){const t=getUserAgentValue(e.userAgentPrefix),r=new Sanitizer({additionalAllowedQueryParameters:e.additionalAllowedQueryParameters}),s=function(){try{return function(e){const{namespace:t,packageName:r,packageVersion:s}=e;function startSpan(e,a,c){var u;const p=getInstrumenter().startSpan(e,Object.assign(Object.assign({},c),{packageName:r,packageVersion:s,tracingContext:null===(u=null==a?void 0:a.tracingOptions)||void 0===u?void 0:u.tracingContext}));let d=p.tracingContext;const h=p.span;return d.getValue(wi.namespace)||(d=d.setValue(wi.namespace,t)),h.setAttribute("az.namespace",d.getValue(wi.namespace)),{span:h,updatedOptions:Object.assign({},a,{tracingOptions:Object.assign(Object.assign({},null==a?void 0:a.tracingOptions),{tracingContext:d})})}}function withContext(e,t,...r){return getInstrumenter().withContext(e,t,...r)}return{startSpan:startSpan,withSpan:async function(e,t,r,s){const{span:a,updatedOptions:c}=startSpan(e,t,s);try{const e=await withContext(c.tracingOptions.tracingContext,(()=>Promise.resolve(r(c,a))));return a.setStatus({status:"success"}),e}catch(e){throw a.setStatus({status:"error",error:e}),e}finally{a.end()}},withContext:withContext,parseTraceparentHeader:function(e){return getInstrumenter().parseTraceparentHeader(e)},createRequestHeaders:function(e){return getInstrumenter().createRequestHeaders(e)}}}({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:pi})}catch(e){return void ii.warning(`Error when creating the TracingClient: ${getErrorMessage(e)}`)}}();return{name:Ri,async sendRequest(e,a){var c;if(!s)return a(e);const u=await t,p={"http.url":r.sanitizeUrl(e.url),"http.method":e.method,"http.user_agent":u,requestId:e.requestId};u&&(p["http.user_agent"]=u);const{span:d,tracingContext:h}=null!==(c=function(e,t,r){try{const{span:s,updatedOptions:a}=e.startSpan(`HTTP ${t.method}`,{tracingOptions:t.tracingOptions},{spanKind:"client",spanAttributes:r});if(!s.isRecording())return void s.end();const c=e.createRequestHeaders(a.tracingOptions.tracingContext);for(const[e,r]of Object.entries(c))t.headers.set(e,r);return{span:s,tracingContext:a.tracingOptions.tracingContext}}catch(e){return void ii.warning(`Skipping creating a tracing span due to an error: ${getErrorMessage(e)}`)}}(s,e,p))&&void 0!==c?c:{};if(!d||!h)return a(e);try{const t=await s.withContext(h,a,e);return function(e,t){try{e.setAttribute("http.status_code",t.status);const r=t.headers.get("x-ms-request-id");r&&e.setAttribute("serviceRequestId",r),t.status>=400&&e.setStatus({status:"error"}),e.end()}catch(e){ii.warning(`Skipping tracing span processing due to an error: ${getErrorMessage(e)}`)}}(d,t),t}catch(e){throw function(e,t){try{e.setStatus({status:"error",error:isError(t)?t:void 0}),isRestError(t)&&t.statusCode&&e.setAttribute("http.status_code",t.statusCode),e.end()}catch(e){ii.warning(`Skipping tracing span processing due to an error: ${getErrorMessage(e)}`)}}(d,e),e}}}}function wrapAbortSignalLike(e){if(e instanceof AbortSignal)return{abortSignal:e};if(e.aborted)return{abortSignal:AbortSignal.abort(e.reason)};const t=new AbortController;let r=!0;function cleanup(){r&&(e.removeEventListener("abort",listener),r=!1)}function listener(){t.abort(e.reason),cleanup()}return e.addEventListener("abort",listener),{abortSignal:t.signal,cleanup:cleanup}}function createPipelineFromOptions(e){var t;const r=createEmptyPipeline();return Ps&&(e.agent&&r.addPolicy(agentPolicy(e.agent)),e.tlsOptions&&r.addPolicy(tlsPolicy(e.tlsOptions)),r.addPolicy(proxyPolicy(e.proxyOptions)),r.addPolicy(decompressResponsePolicy())),r.addPolicy({name:"wrapAbortSignalLikePolicy",sendRequest:async(e,t)=>{if(!e.abortSignal)return t(e);const{abortSignal:r,cleanup:s}=wrapAbortSignalLike(e.abortSignal);e.abortSignal=r;try{return await t(e)}finally{null==s||s()}}}),r.addPolicy(formDataPolicy(),{beforePolicies:[yi]}),r.addPolicy(userAgentPolicy(e.userAgentOptions)),r.addPolicy(setClientRequestIdPolicy(null===(t=e.telemetryOptions)||void 0===t?void 0:t.clientRequestIdHeaderName)),r.addPolicy(multipartPolicy(),{afterPhase:"Deserialize"}),r.addPolicy(defaultRetryPolicy(e.retryOptions),{phase:"Retry"}),r.addPolicy(tracingPolicy(Object.assign(Object.assign({},e.userAgentOptions),e.loggingOptions)),{afterPhase:"Retry"}),Ps&&r.addPolicy(redirectPolicy(e.redirectOptions),{afterPhase:"Retry"}),r.addPolicy(logPolicy(e.loggingOptions),{afterPhase:"Sign"}),r}function createDefaultHttpClient(){const e=createDefaultHttpClient$1();return{async sendRequest(t){const{abortSignal:r,cleanup:s}=t.abortSignal?wrapAbortSignalLike(t.abortSignal):{};try{return t.abortSignal=r,await e.sendRequest(t)}finally{null==s||s()}}}}function createPipelineRequest(e){return function(e){return new PipelineRequestImpl(e)}(e)}const Pi=ai;const Oi=ci;const Ii=createClientLogger("core-rest-pipeline retryPolicy");const Ai={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function createTokenCycler(e,t){let r,s=null,a=null;const c=Object.assign(Object.assign({},Ai),t),u={get isRefreshing(){return null!==s},get shouldRefresh(){var e;return!u.isRefreshing&&(!!((null==a?void 0:a.refreshAfterTimestamp)&&a.refreshAfterTimestamp<Date.now())||(null!==(e=null==a?void 0:a.expiresOnTimestamp)&&void 0!==e?e:0)-c.refreshWindowInMs<Date.now())},get mustRefresh(){return null===a||a.expiresOnTimestamp-c.forcedRefreshWindowInMs<Date.now()}};function refresh(t,p){var d;if(!u.isRefreshing){s=async function(e,t,r){async function tryGetAccessToken(){if(!(Date.now()<r)){const t=await e();if(null===t)throw new Error("Failed to refresh access token.");return t}try{return await e()}catch(e){return null}}let s=await tryGetAccessToken();for(;null===s;)await delay$1(t),s=await tryGetAccessToken();return s}((()=>e.getToken(t,p)),c.retryIntervalInMs,null!==(d=null==a?void 0:a.expiresOnTimestamp)&&void 0!==d?d:Date.now()).then((e=>(s=null,a=e,r=p.tenantId,a))).catch((e=>{throw s=null,a=null,r=void 0,e}))}return s}return async(e,t)=>{const s=Boolean(t.claims),c=r!==t.tenantId;s&&(a=null);return c||s||u.mustRefresh?refresh(e,t):(u.shouldRefresh&&refresh(e,t),a)}}const Ti="bearerTokenAuthenticationPolicy";async function trySendRequest(e,t){try{return[await t(e),void 0]}catch(e){if(isRestError(e)&&e.response)return[e.response,e];throw e}}async function defaultAuthorizeRequest(e){const{scopes:t,getAccessToken:r,request:s}=e,a={abortSignal:s.abortSignal,tracingOptions:s.tracingOptions,enableCae:!0},c=await r(t,a);c&&e.request.headers.set("Authorization",`Bearer ${c.token}`)}function isChallengeResponse(e){return 401===e.status&&e.headers.has("WWW-Authenticate")}async function authorizeRequestOnCaeChallenge(e,t){var r;const{scopes:s}=e,a=await e.getAccessToken(s,{enableCae:!0,claims:t});return!!a&&(e.request.headers.set("Authorization",`${null!==(r=a.tokenType)&&void 0!==r?r:"Bearer"} ${a.token}`),!0)}function bearerTokenAuthenticationPolicy(e){var t,r,s;const{credential:a,scopes:c,challengeCallbacks:u}=e,p=e.logger||ii,d={authorizeRequest:null!==(r=null===(t=null==u?void 0:u.authorizeRequest)||void 0===t?void 0:t.bind(u))&&void 0!==r?r:defaultAuthorizeRequest,authorizeRequestOnChallenge:null===(s=null==u?void 0:u.authorizeRequestOnChallenge)||void 0===s?void 0:s.bind(u)},h=a?createTokenCycler(a):()=>Promise.resolve(null);return{name:Ti,async sendRequest(e,t){if(!e.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");let r,s,a;if(await d.authorizeRequest({scopes:Array.isArray(c)?c:[c],request:e,getAccessToken:h,logger:p}),[r,s]=await trySendRequest(e,t),isChallengeResponse(r)){let u=getCaeChallengeClaims(r.headers.get("WWW-Authenticate"));if(u){let d;try{d=atob(u)}catch(e){return p.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${u}`),r}a=await authorizeRequestOnCaeChallenge({scopes:Array.isArray(c)?c:[c],response:r,request:e,getAccessToken:h,logger:p},d),a&&([r,s]=await trySendRequest(e,t))}else if(d.authorizeRequestOnChallenge&&(a=await d.authorizeRequestOnChallenge({scopes:Array.isArray(c)?c:[c],request:e,response:r,getAccessToken:h,logger:p}),a&&([r,s]=await trySendRequest(e,t)),isChallengeResponse(r)&&(u=getCaeChallengeClaims(r.headers.get("WWW-Authenticate")),u))){let d;try{d=atob(u)}catch(e){return p.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${u}`),r}a=await authorizeRequestOnCaeChallenge({scopes:Array.isArray(c)?c:[c],response:r,request:e,getAccessToken:h,logger:p},d),a&&([r,s]=await trySendRequest(e,t))}}if(s)throw s;return r}}}function getCaeChallengeClaims(e){var t;if(!e)return;const r=function(e){const t=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,r=/(\w+)="([^"]*)"/g,s=[];let a;for(;null!==(a=t.exec(e));){const e=a[1],t=a[2],c={};let u;for(;null!==(u=r.exec(t));)c[u[1]]=u[2];s.push({scheme:e,params:c})}return s}(e);return null===(t=r.find((e=>"Bearer"===e.scheme&&e.params.claims&&"insufficient_claims"===e.params.error)))||void 0===t?void 0:t.params.claims}const Ni="ndJsonPolicy";const Ci="auxiliaryAuthenticationHeaderPolicy",xi="x-ms-authorization-auxiliary";async function sendAuthorizeRequest(e){var t,r;const{scopes:s,getAccessToken:a,request:c}=e,u={abortSignal:c.abortSignal,tracingOptions:c.tracingOptions};return null!==(r=null===(t=await a(s,u))||void 0===t?void 0:t.token)&&void 0!==r?r:""}const ki=Object.freeze(Object.defineProperty({__proto__:null,RestError:_i,agentPolicy:agentPolicy,agentPolicyName:vi,auxiliaryAuthenticationHeaderPolicy:function(e){const{credentials:t,scopes:r}=e,s=e.logger||ii,a=new WeakMap;return{name:Ci,async sendRequest(e,c){if(!e.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!t||0===t.length)return s.info(`${Ci} header will not be set due to empty credentials.`),c(e);const u=[];for(const s of t){let t=a.get(s);t||(t=createTokenCycler(s),a.set(s,t)),u.push(sendAuthorizeRequest({scopes:Array.isArray(r)?r:[r],request:e,getAccessToken:t}))}const p=(await Promise.all(u)).filter((e=>Boolean(e)));return 0===p.length?(s.warning(`None of the auxiliary tokens are valid. ${xi} header will not be set.`),c(e)):(e.headers.set(xi,p.map((e=>`Bearer ${e}`)).join(", ")),c(e))}}},auxiliaryAuthenticationHeaderPolicyName:Ci,bearerTokenAuthenticationPolicy:bearerTokenAuthenticationPolicy,bearerTokenAuthenticationPolicyName:Ti,createDefaultHttpClient:createDefaultHttpClient,createEmptyPipeline:createEmptyPipeline,createFile:function(e,t,r={}){var s,a,c;return Ps?Object.assign(Object.assign({},hi),{type:null!==(s=r.type)&&void 0!==s?s:"",lastModified:null!==(a=r.lastModified)&&void 0!==a?a:(new Date).getTime(),webkitRelativePath:null!==(c=r.webkitRelativePath)&&void 0!==c?c:"",size:e.byteLength,name:t,arrayBuffer:async()=>e.buffer,stream:()=>new Blob([e]).stream(),[mi]:()=>e}):new File([e],t,r)},createFileFromStream:function(e,t,r={}){var s,a,c,u;return Object.assign(Object.assign({},hi),{type:null!==(s=r.type)&&void 0!==s?s:"",lastModified:null!==(a=r.lastModified)&&void 0!==a?a:(new Date).getTime(),webkitRelativePath:null!==(c=r.webkitRelativePath)&&void 0!==c?c:"",size:null!==(u=r.size)&&void 0!==u?u:-1,name:t,stream:()=>{const t=e();if(r=t,Boolean(r&&"function"==typeof r.pipe))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");var r;return t},[mi]:e})},createHttpHeaders:function(e){return createHttpHeaders$1(e)},createPipelineFromOptions:createPipelineFromOptions,createPipelineRequest:createPipelineRequest,decompressResponsePolicy:decompressResponsePolicy,decompressResponsePolicyName:"decompressResponsePolicy",defaultRetryPolicy:defaultRetryPolicy,exponentialRetryPolicy:function(e={}){return function(e={}){var t;return retryPolicy$1([exponentialRetryStrategy(Object.assign(Object.assign({},e),{ignoreSystemErrors:!0}))],{maxRetries:null!==(t=e.maxRetries)&&void 0!==t?t:3})}(e)},exponentialRetryPolicyName:"exponentialRetryPolicy",formDataPolicy:formDataPolicy,formDataPolicyName:gi,getDefaultProxySettings:function(e){return function(){throw new Error(Xs)}()},isRestError:isRestError,logPolicy:logPolicy,logPolicyName:li,multipartPolicy:multipartPolicy,multipartPolicyName:yi,ndJsonPolicy:function(){return{name:Ni,async sendRequest(e,t){if("string"==typeof e.body&&e.body.startsWith("[")){const t=JSON.parse(e.body);Array.isArray(t)&&(e.body=t.map((e=>JSON.stringify(e)+"\n")).join(""))}return t(e)}}},ndJsonPolicyName:Ni,proxyPolicy:proxyPolicy,proxyPolicyName:"proxyPolicy",redirectPolicy:redirectPolicy,redirectPolicyName:ui,retryPolicy:function(e,t={maxRetries:3}){return retryPolicy$1(e,Object.assign({logger:Ii},t))},setClientRequestIdPolicy:setClientRequestIdPolicy,setClientRequestIdPolicyName:bi,systemErrorRetryPolicy:function(e={}){return function(e={}){var t;return{name:ai,sendRequest:retryPolicy$1([exponentialRetryStrategy(Object.assign(Object.assign({},e),{ignoreHttpStatusCodes:!0}))],{maxRetries:null!==(t=e.maxRetries)&&void 0!==t?t:3}).sendRequest}}(e)},systemErrorRetryPolicyName:Pi,throttlingRetryPolicy:function(e={}){return function(e={}){var t;return{name:ci,sendRequest:retryPolicy$1([throttlingRetryStrategy()],{maxRetries:null!==(t=e.maxRetries)&&void 0!==t?t:3}).sendRequest}}(e)},throttlingRetryPolicyName:Oi,tlsPolicy:tlsPolicy,tlsPolicyName:Si,tracingPolicy:tracingPolicy,tracingPolicyName:Ri,userAgentPolicy:userAgentPolicy,userAgentPolicyName:fi},Symbol.toStringTag,{value:"Module"}));function encodeByteArray(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function decodeString(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}const Li="$",Di="_";const zi=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;const Mi=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function flattenResponse(e,t){var r,s;const a=e.parsedHeaders;if("HEAD"===e.request.method)return Object.assign(Object.assign({},a),{body:e.parsedBody});const c=t&&t.bodyMapper,u=Boolean(null==c?void 0:c.nullable),p=null==c?void 0:c.type.name;if("Stream"===p)return Object.assign(Object.assign({},a),{blobBody:e.blobBody,readableStreamBody:e.readableStreamBody});const d="Composite"===p&&c.type.modelProperties||{},h=Object.keys(d).some((e=>""===d[e].serializedName));if("Sequence"===p||h){const t=null!==(r=e.parsedBody)&&void 0!==r?r:[];for(const r of Object.keys(d))d[r].serializedName&&(t[r]=null===(s=e.parsedBody)||void 0===s?void 0:s[r]);if(a)for(const e of Object.keys(a))t[e]=a[e];return!u||e.parsedBody||a||0!==Object.getOwnPropertyNames(d).length?t:null}return function(e){const t=Object.assign(Object.assign({},e.headers),e.body);return e.hasNullableType&&0===Object.getOwnPropertyNames(t).length?e.shouldWrapBody?{body:null}:null:e.shouldWrapBody?Object.assign(Object.assign({},e.headers),{body:e.body}):t}({body:e.parsedBody,headers:a,hasNullableType:u,shouldWrapBody:(m=e.parsedBody,g=p,"Composite"!==g&&"Dictionary"!==g&&("string"==typeof m||"number"==typeof m||"boolean"==typeof m||null!==(null==g?void 0:g.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i))||null==m))});var m,g}class SerializerImpl{constructor(e={},t=!1){this.modelMappers=e,this.isXML=t}validateConstraints(e,t,r){const failValidation=(e,s)=>{throw new Error(`"${r}" with value "${t}" should satisfy the constraint "${e}": ${s}.`)};if(e.constraints&&null!=t){const{ExclusiveMaximum:r,ExclusiveMinimum:s,InclusiveMaximum:a,InclusiveMinimum:c,MaxItems:u,MaxLength:p,MinItems:d,MinLength:h,MultipleOf:m,Pattern:g,UniqueItems:v}=e.constraints;if(void 0!==r&&t>=r&&failValidation("ExclusiveMaximum",r),void 0!==s&&t<=s&&failValidation("ExclusiveMinimum",s),void 0!==a&&t>a&&failValidation("InclusiveMaximum",a),void 0!==c&&t<c&&failValidation("InclusiveMinimum",c),void 0!==u&&t.length>u&&failValidation("MaxItems",u),void 0!==p&&t.length>p&&failValidation("MaxLength",p),void 0!==d&&t.length<d&&failValidation("MinItems",d),void 0!==h&&t.length<h&&failValidation("MinLength",h),void 0!==m&&t%m!==0&&failValidation("MultipleOf",m),g){const e="string"==typeof g?new RegExp(g):g;"string"==typeof t&&null!==t.match(e)||failValidation("Pattern",g)}v&&t.some(((e,t,r)=>r.indexOf(e)!==t))&&failValidation("UniqueItems",v)}}serialize(e,t,r,s={xml:{}}){var a,c,u;const p={xml:{rootName:null!==(a=s.xml.rootName)&&void 0!==a?a:"",includeRoot:null!==(c=s.xml.includeRoot)&&void 0!==c&&c,xmlCharKey:null!==(u=s.xml.xmlCharKey)&&void 0!==u?u:Di}};let d={};const h=e.type.name;r||(r=e.serializedName),null!==h.match(/^Sequence$/i)&&(d=[]),e.isConstant&&(t=e.defaultValue);const{required:m,nullable:g}=e;if(m&&g&&void 0===t)throw new Error(`${r} cannot be undefined.`);if(m&&!g&&null==t)throw new Error(`${r} cannot be null or undefined.`);if(!m&&!1===g&&null===t)throw new Error(`${r} cannot be null.`);if(null==t)d=t;else if(null!==h.match(/^any$/i))d=t;else if(null!==h.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i))d=function(e,t,r){if(null!=r)if(null!==e.match(/^Number$/i)){if("number"!=typeof r)throw new Error(`${t} with value ${r} must be of type number.`)}else if(null!==e.match(/^String$/i)){if("string"!=typeof r.valueOf())throw new Error(`${t} with value "${r}" must be of type string.`)}else if(null!==e.match(/^Uuid$/i)){if("string"!=typeof r.valueOf()||(s=r,!Mi.test(s)))throw new Error(`${t} with value "${r}" must be of type string and a valid uuid.`)}else if(null!==e.match(/^Boolean$/i)){if("boolean"!=typeof r)throw new Error(`${t} with value ${r} must be of type boolean.`)}else if(null!==e.match(/^Stream$/i)){const e=typeof r;if(!("string"===e||"function"==typeof r.pipe||"function"==typeof r.tee||r instanceof ArrayBuffer||ArrayBuffer.isView(r)||("function"==typeof Blob||"object"==typeof Blob)&&r instanceof Blob||"function"===e))throw new Error(`${t} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}var s;return r}(h,r,t);else if(null!==h.match(/^Enum$/i)){d=function(e,t,r){if(!t)throw new Error(`Please provide a set of allowedValues to validate ${e} as an Enum Type.`);if(!t.some((e=>"string"==typeof e.valueOf()?e.toLowerCase()===r.toLowerCase():e===r)))throw new Error(`${r} is not a valid value for ${e}. The valid values are: ${JSON.stringify(t)}.`);return r}(r,e.type.allowedValues,t)}else null!==h.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?d=function(e,t,r){if(null!=t)if(null!==e.match(/^Date$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString().substring(0,10):new Date(t).toISOString().substring(0,10)}else if(null!==e.match(/^DateTime$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString():new Date(t).toISOString()}else if(null!==e.match(/^DateTimeRfc1123$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in RFC-1123 format.`);t=t instanceof Date?t.toUTCString():new Date(t).toUTCString()}else if(null!==e.match(/^UnixTime$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);t=function(e){if(!e)return;"string"==typeof e.valueOf()&&(e=new Date(e));return Math.floor(e.getTime()/1e3)}(t)}else if(null!==e.match(/^TimeSpan$/i)&&!function(e){return zi.test(e)}(t))throw new Error(`${r} must be a string in ISO 8601 format. Instead was "${t}".`);return t}(h,t,r):null!==h.match(/^ByteArray$/i)?d=function(e,t){if(null!=t){if(!(t instanceof Uint8Array))throw new Error(`${e} must be of type Uint8Array.`);t=encodeByteArray(t)}return t}(r,t):null!==h.match(/^Base64Url$/i)?d=function(e,t){if(null!=t){if(!(t instanceof Uint8Array))throw new Error(`${e} must be of type Uint8Array.`);t=function(e){if(!e)return;if(!(e instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(e,t){let r=e.length;for(;r-1>=0&&e[r-1]===t;)--r;return e.substr(0,r)}(encodeByteArray(e),"=").replace(/\+/g,"-").replace(/\//g,"_")}(t)}return t}(r,t):null!==h.match(/^Sequence$/i)?d=function(e,t,r,s,a,c){var u;if(!Array.isArray(r))throw new Error(`${s} must be of type Array.`);let p=t.type.element;if(!p||"object"!=typeof p)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${s}.`);"Composite"===p.type.name&&p.type.className&&(p=null!==(u=e.modelMappers[p.type.className])&&void 0!==u?u:p);const d=[];for(let t=0;t<r.length;t++){const u=e.serialize(p,r[t],s,c);if(a&&p.xmlNamespace){const e=p.xmlNamespacePrefix?`xmlns:${p.xmlNamespacePrefix}`:"xmlns";"Composite"===p.type.name?(d[t]=Object.assign({},u),d[t][Li]={[e]:p.xmlNamespace}):(d[t]={},d[t][c.xml.xmlCharKey]=u,d[t][Li]={[e]:p.xmlNamespace})}else d[t]=u}return d}(this,e,t,r,Boolean(this.isXML),p):null!==h.match(/^Dictionary$/i)?d=function(e,t,r,s,a,c){if("object"!=typeof r)throw new Error(`${s} must be of type object.`);const u=t.type.value;if(!u||"object"!=typeof u)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${s}.`);const p={};for(const t of Object.keys(r)){const d=e.serialize(u,r[t],s,c);p[t]=getXmlObjectValue(u,d,a,c)}if(a&&t.xmlNamespace){const e=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns",r=p;return r[Li]={[e]:t.xmlNamespace},r}return p}(this,e,t,r,Boolean(this.isXML),p):null!==h.match(/^Composite$/i)&&(d=function(e,t,r,s,a,c){getPolymorphicDiscriminatorRecursively(e,t)&&(t=getPolymorphicMapper(e,t,r,"clientName"));if(null!=r){const u={},p=resolveModelProperties(e,t,s);for(const d of Object.keys(p)){const h=p[d];if(h.readOnly)continue;let m,g=u;if(e.isXML)m=h.xmlIsWrapped?h.xmlName:h.xmlElementName||h.xmlName;else{const e=splitSerializeName(h.serializedName);m=e.pop();for(const t of e){const e=g[t];null==e&&(void 0!==r[d]&&null!==r[d]||void 0!==h.defaultValue)&&(g[t]={}),g=g[t]}}if(null!=g){if(a&&t.xmlNamespace){const e=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns";g[Li]=Object.assign(Object.assign({},g[Li]),{[e]:t.xmlNamespace})}const u=""!==h.serializedName?s+"."+h.serializedName:s;let p=r[d];const v=getPolymorphicDiscriminatorRecursively(e,t);v&&v.clientName===d&&null==p&&(p=t.serializedName);const S=e.serialize(h,p,u,c);if(void 0!==S&&null!=m){const e=getXmlObjectValue(h,S,a,c);a&&h.xmlIsAttribute?(g[Li]=g[Li]||{},g[Li][m]=S):a&&h.xmlIsWrapped?g[m]={[h.xmlElementName]:e}:g[m]=e}}}const d=function(e,t,r){const s=t.type.additionalProperties;if(!s&&t.type.className){const s=resolveReferencedMapper(e,t,r);return null==s?void 0:s.type.additionalProperties}return s}(e,t,s);if(d){const t=Object.keys(p);for(const a in r){t.every((e=>e!==a))&&(u[a]=e.serialize(d,r[a],s+'["'+a+'"]',c))}}return u}return r}(this,e,t,r,Boolean(this.isXML),p));return d}deserialize(e,t,r,s={xml:{}}){var a,c,u,p;const d={xml:{rootName:null!==(a=s.xml.rootName)&&void 0!==a?a:"",includeRoot:null!==(c=s.xml.includeRoot)&&void 0!==c&&c,xmlCharKey:null!==(u=s.xml.xmlCharKey)&&void 0!==u?u:Di},ignoreUnknownProperties:null!==(p=s.ignoreUnknownProperties)&&void 0!==p&&p};if(null==t)return this.isXML&&"Sequence"===e.type.name&&!e.xmlIsWrapped&&(t=[]),void 0!==e.defaultValue&&(t=e.defaultValue),t;let h;const m=e.type.name;if(r||(r=e.serializedName),null!==m.match(/^Composite$/i))h=function(e,t,r,s,a){var c,u;const p=null!==(c=a.xml.xmlCharKey)&&void 0!==c?c:Di;getPolymorphicDiscriminatorRecursively(e,t)&&(t=getPolymorphicMapper(e,t,r,"serializedName"));const d=resolveModelProperties(e,t,s);let h={};const m=[];for(const c of Object.keys(d)){const g=d[c],v=splitSerializeName(d[c].serializedName);m.push(v[0]);const{serializedName:S,xmlName:w,xmlElementName:E}=g;let _=s;""!==S&&void 0!==S&&(_=s+"."+S);const R=g.headerCollectionPrefix;if(R){const t={};for(const s of Object.keys(r))s.startsWith(R)&&(t[s.substring(R.length)]=e.deserialize(g.type.value,r[s],_,a)),m.push(s);h[c]=t}else if(e.isXML)if(g.xmlIsAttribute&&r[Li])h[c]=e.deserialize(g,r[Li][w],_,a);else if(g.xmlIsMsText)void 0!==r[p]?h[c]=r[p]:"string"==typeof r&&(h[c]=r);else{const t=E||w||S;if(g.xmlIsWrapped){const t=r[w],s=null!==(u=null==t?void 0:t[E])&&void 0!==u?u:[];h[c]=e.deserialize(g,s,_,a),m.push(w)}else{const s=r[t];h[c]=e.deserialize(g,s,_,a),m.push(t)}}else{let s,u=r,p=0;for(const e of v){if(!u)break;p++,u=u[e]}null===u&&p<v.length&&(u=void 0),s=u;const m=t.type.polymorphicDiscriminator;let S;if(m&&c===m.clientName&&null==s&&(s=t.serializedName),Array.isArray(r[c])&&""===d[c].serializedName){s=r[c];const t=e.deserialize(g,s,_,a);for(const[e,r]of Object.entries(h))Object.prototype.hasOwnProperty.call(t,e)||(t[e]=r);h=t}else void 0===s&&void 0===g.defaultValue||(S=e.deserialize(g,s,_,a),h[c]=S)}}const g=t.type.additionalProperties;if(g){const isAdditionalProperty=e=>{for(const t in d){if(splitSerializeName(d[t].serializedName)[0]===e)return!1}return!0};for(const t in r)isAdditionalProperty(t)&&(h[t]=e.deserialize(g,r[t],s+'["'+t+'"]',a))}else if(r&&!a.ignoreUnknownProperties)for(const e of Object.keys(r))void 0!==h[e]||m.includes(e)||isSpecialXmlProperty(e,a)||(h[e]=r[e]);return h}(this,e,t,r,d);else{if(this.isXML){const e=d.xml.xmlCharKey;void 0!==t[Li]&&void 0!==t[e]&&(t=t[e])}null!==m.match(/^Number$/i)?(h=parseFloat(t),isNaN(h)&&(h=t)):null!==m.match(/^Boolean$/i)?h="true"===t||"false"!==t&&t:null!==m.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?h=t:null!==m.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?h=new Date(t):null!==m.match(/^UnixTime$/i)?h=function(e){if(!e)return;return new Date(1e3*e)}(t):null!==m.match(/^ByteArray$/i)?h=decodeString(t):null!==m.match(/^Base64Url$/i)?h=function(e){if(!e)return;if(e&&"string"!=typeof e.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return decodeString(e=e.replace(/-/g,"+").replace(/_/g,"/"))}(t):null!==m.match(/^Sequence$/i)?h=function(e,t,r,s,a){var c;let u=t.type.element;if(!u||"object"!=typeof u)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${s}`);if(r){Array.isArray(r)||(r=[r]),"Composite"===u.type.name&&u.type.className&&(u=null!==(c=e.modelMappers[u.type.className])&&void 0!==c?c:u);const t=[];for(let c=0;c<r.length;c++)t[c]=e.deserialize(u,r[c],`${s}[${c}]`,a);return t}return r}(this,e,t,r,d):null!==m.match(/^Dictionary$/i)&&(h=function(e,t,r,s,a){const c=t.type.value;if(!c||"object"!=typeof c)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${s}`);if(r){const t={};for(const u of Object.keys(r))t[u]=e.deserialize(c,r[u],s,a);return t}return r}(this,e,t,r,d))}return e.isConstant&&(h=e.defaultValue),h}}function splitSerializeName(e){const t=[];let r="";if(e){const s=e.split(".");for(const e of s)"\\"===e.charAt(e.length-1)?r+=e.substr(0,e.length-1)+".":(r+=e,t.push(r),r="")}return t}function resolveReferencedMapper(e,t,r){const s=t.type.className;if(!s)throw new Error(`Class name for model "${r}" is not provided in the mapper "${JSON.stringify(t,void 0,2)}".`);return e.modelMappers[s]}function resolveModelProperties(e,t,r){let s=t.type.modelProperties;if(!s){const a=resolveReferencedMapper(e,t,r);if(!a)throw new Error(`mapper() cannot be null or undefined for model "${t.type.className}".`);if(s=null==a?void 0:a.type.modelProperties,!s)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(a)}" of type "${t.type.className}" for object "${r}".`)}return s}function getXmlObjectValue(e,t,r,s){if(!r||!e.xmlNamespace)return t;const a=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns",c={[a]:e.xmlNamespace};if(["Composite"].includes(e.type.name)){if(t[Li])return t;{const e=Object.assign({},t);return e[Li]=c,e}}const u={};return u[s.xml.xmlCharKey]=t,u[Li]=c,u}function isSpecialXmlProperty(e,t){return[Li,t.xml.xmlCharKey].includes(e)}function getPolymorphicMapper(e,t,r,s){var a;const c=getPolymorphicDiscriminatorRecursively(e,t);if(c){let u=c[s];if(u){"serializedName"===s&&(u=u.replace(/\\/gi,""));const c=r[u],p=null!==(a=t.type.uberParent)&&void 0!==a?a:t.type.className;if("string"==typeof c&&p){const r=function(e,t,r){const s=[r];for(;s.length;){const r=s.shift(),a=t===r?t:r+"."+t;if(Object.prototype.hasOwnProperty.call(e,a))return e[a];for(const[t,a]of Object.entries(e))t.startsWith(r+".")&&a.type.uberParent===r&&a.type.className&&s.push(a.type.className)}}(e.modelMappers.discriminators,c,p);r&&(t=r)}}}return t}function getPolymorphicDiscriminatorRecursively(e,t){return t.type.polymorphicDiscriminator||getPolymorphicDiscriminatorSafely(e,t.type.uberParent)||getPolymorphicDiscriminatorSafely(e,t.type.className)}function getPolymorphicDiscriminatorSafely(e,t){return t&&e.modelMappers[t]&&e.modelMappers[t].type.polymorphicDiscriminator}const Bi={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"},$i={operationRequestMap:new WeakMap};function getOperationArgumentValueFromParameter(e,t,r){let s=t.parameterPath;const a=t.mapper;let c;if("string"==typeof s&&(s=[s]),Array.isArray(s)){if(s.length>0)if(a.isConstant)c=a.defaultValue;else{let t=getPropertyFromParameterPath(e,s);!t.propertyFound&&r&&(t=getPropertyFromParameterPath(r,s));let u=!1;t.propertyFound||(u=a.required||"options"===s[0]&&2===s.length),c=u?a.defaultValue:t.propertyValue}}else{a.required&&(c={});for(const t in s){const u=a.type.modelProperties[t],p=getOperationArgumentValueFromParameter(e,{parameterPath:s[t],mapper:u},r);void 0!==p&&(c||(c={}),c[t]=p)}}return c}function getPropertyFromParameterPath(e,t){const r={propertyFound:!1};let s=0;for(;s<t.length;++s){const r=t[s];if(!e||!(r in e))break;e=e[r]}return s===t.length&&(r.propertyValue=e,r.propertyFound=!0),r}const ji=Symbol.for("@azure/core-client original request");function getOperationRequestInfo(e){if(function(e){return ji in e}(e))return getOperationRequestInfo(e[ji]);let t=$i.operationRequestMap.get(e);return t||(t={},$i.operationRequestMap.set(e,t)),t}const qi=["application/json","text/json"],Ui=["application/xml","application/atom+xml"],Hi="deserializationPolicy";function deserializationPolicy(e={}){var t,r,s,a,c,u,p;const d=null!==(r=null===(t=e.expectedContentTypes)||void 0===t?void 0:t.json)&&void 0!==r?r:qi,h=null!==(a=null===(s=e.expectedContentTypes)||void 0===s?void 0:s.xml)&&void 0!==a?a:Ui,m=e.parseXML,g=e.serializerOptions,v={xml:{rootName:null!==(c=null==g?void 0:g.xml.rootName)&&void 0!==c?c:"",includeRoot:null!==(u=null==g?void 0:g.xml.includeRoot)&&void 0!==u&&u,xmlCharKey:null!==(p=null==g?void 0:g.xml.xmlCharKey)&&void 0!==p?p:Di}};return{name:Hi,async sendRequest(e,t){const r=await t(e);return async function(e,t,r,s,a){const c=await async function(e,t,r,s,a){var c;if(!(null===(c=r.request.streamResponseStatusCodes)||void 0===c?void 0:c.has(r.status))&&r.bodyAsText){const c=r.bodyAsText,u=r.headers.get("Content-Type")||"",p=u?u.split(";").map((e=>e.toLowerCase())):[];try{if(0===p.length||p.some((t=>-1!==e.indexOf(t))))return r.parsedBody=JSON.parse(c),r;if(p.some((e=>-1!==t.indexOf(e)))){if(!a)throw new Error("Parsing XML not supported.");const e=await a(c,s.xml);return r.parsedBody=e,r}}catch(e){const t=`Error "${e}" occurred while parsing the response body - ${r.bodyAsText}.`,s=e.code||_i.PARSE_ERROR;throw new _i(t,{code:s,statusCode:r.status,request:r.request,response:r})}}return r}(e,t,r,s,a);if(!function(e){const t=e.request,r=getOperationRequestInfo(t),s=null==r?void 0:r.shouldDeserialize;let a;a=void 0===s||("boolean"==typeof s?s:s(e));return a}(c))return c;const u=getOperationRequestInfo(c.request),p=null==u?void 0:u.operationSpec;if(!p||!p.responses)return c;const d=function(e){let t;const r=e.request,s=getOperationRequestInfo(r),a=null==s?void 0:s.operationSpec;a&&(t=(null==s?void 0:s.operationResponseGetter)?null==s?void 0:s.operationResponseGetter(a,e):a.responses[e.status]);return t}(c),{error:h,shouldReturnResponse:m}=function(e,t,r,s){var a,c,u,p,d;const h=200<=e.status&&e.status<300,m=function(e){const t=Object.keys(e.responses);return 0===t.length||1===t.length&&"default"===t[0]}(t)?h:!!r;if(m){if(!r)return{error:null,shouldReturnResponse:!1};if(!r.isError)return{error:null,shouldReturnResponse:!1}}const g=null!=r?r:t.responses.default,v=(null===(a=e.request.streamResponseStatusCodes)||void 0===a?void 0:a.has(e.status))?`Unexpected status code: ${e.status}`:e.bodyAsText,S=new _i(v,{statusCode:e.status,request:e.request,response:e});if(!(g||(null===(u=null===(c=e.parsedBody)||void 0===c?void 0:c.error)||void 0===u?void 0:u.code)&&(null===(d=null===(p=e.parsedBody)||void 0===p?void 0:p.error)||void 0===d?void 0:d.message)))throw S;const w=null==g?void 0:g.bodyMapper,E=null==g?void 0:g.headersMapper;try{if(e.parsedBody){const r=e.parsedBody;let a;if(w){let e=r;if(t.isXML&&w.type.name===Bi.Sequence){e=[];const t=w.xmlElementName;"object"==typeof r&&t&&(e=r[t])}a=t.serializer.deserialize(w,e,"error.response.parsedBody",s)}const c=r.error||a||r;S.code=c.code,c.message&&(S.message=c.message),w&&(S.response.parsedBody=a)}e.headers&&E&&(S.response.parsedHeaders=t.serializer.deserialize(E,e.headers.toJSON(),"operationRes.parsedHeaders"))}catch(t){S.message=`Error "${t.message}" occurred in deserializing the responseBody - "${e.bodyAsText}" for the default response.`}return{error:S,shouldReturnResponse:!1}}(c,p,d,s);if(h)throw h;if(m)return c;if(d){if(d.bodyMapper){let e=c.parsedBody;p.isXML&&d.bodyMapper.type.name===Bi.Sequence&&(e="object"==typeof e?e[d.bodyMapper.xmlElementName]:[]);try{c.parsedBody=p.serializer.deserialize(d.bodyMapper,e,"operationRes.parsedBody",s)}catch(e){throw new _i(`Error ${e} occurred in deserializing the responseBody - ${c.bodyAsText}`,{statusCode:c.status,request:c.request,response:c})}}else"HEAD"===p.httpMethod&&(c.parsedBody=r.status>=200&&r.status<300);d.headersMapper&&(c.parsedHeaders=p.serializer.deserialize(d.headersMapper,c.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return c}(d,h,r,v,m)}}}function getPathStringFromParameter(e){const{parameterPath:t,mapper:r}=e;let s;return s="string"==typeof t?t:Array.isArray(t)?t.join("."):r.serializedName,s}const Fi="serializationPolicy";function serializationPolicy(e={}){const t=e.stringifyXML;return{name:Fi,async sendRequest(e,r){const s=getOperationRequestInfo(e),a=null==s?void 0:s.operationSpec,c=null==s?void 0:s.operationArguments;return a&&c&&(function(e,t,r){var s,a;if(r.headerParameters)for(const s of r.headerParameters){let a=getOperationArgumentValueFromParameter(t,s);if(null!=a||s.mapper.required){a=r.serializer.serialize(s.mapper,a,getPathStringFromParameter(s));const t=s.mapper.headerCollectionPrefix;if(t)for(const r of Object.keys(a))e.headers.set(t+r,a[r]);else e.headers.set(s.mapper.serializedName||getPathStringFromParameter(s),a)}}const c=null===(a=null===(s=t.options)||void 0===s?void 0:s.requestOptions)||void 0===a?void 0:a.customHeaders;if(c)for(const t of Object.keys(c))e.headers.set(t,c[t])}(e,c,a),function(e,t,r,s=function(){throw new Error("XML serialization unsupported!")}){var a,c,u,p,d;const h=null===(a=t.options)||void 0===a?void 0:a.serializerOptions,m={xml:{rootName:null!==(c=null==h?void 0:h.xml.rootName)&&void 0!==c?c:"",includeRoot:null!==(u=null==h?void 0:h.xml.includeRoot)&&void 0!==u&&u,xmlCharKey:null!==(p=null==h?void 0:h.xml.xmlCharKey)&&void 0!==p?p:Di}},g=m.xml.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){e.body=getOperationArgumentValueFromParameter(t,r.requestBody);const a=r.requestBody.mapper,{required:c,serializedName:u,xmlName:p,xmlElementName:h,xmlNamespace:v,xmlNamespacePrefix:S,nullable:w}=a,E=a.type.name;try{if(void 0!==e.body&&null!==e.body||w&&null===e.body||c){const t=getPathStringFromParameter(r.requestBody);e.body=r.serializer.serialize(a,e.body,t,m);const c=E===Bi.Stream;if(r.isXML){const t=S?`xmlns:${S}`:"xmlns",r=function(e,t,r,s,a){if(e&&!["Composite","Sequence","Dictionary"].includes(r)){const r={};return r[a.xml.xmlCharKey]=s,r[Li]={[t]:e},r}return s}(v,t,E,e.body,m);E===Bi.Sequence?e.body=s(function(e,t,r,s){Array.isArray(e)||(e=[e]);if(!r||!s)return{[t]:e};const a={[t]:e};return a[Li]={[r]:s},a}(r,h||p||u,t,v),{rootName:p||u,xmlCharKey:g}):c||(e.body=s(r,{rootName:p||u,xmlCharKey:g}))}else{if(E===Bi.String&&((null===(d=r.contentType)||void 0===d?void 0:d.match("text/plain"))||"text"===r.mediaType))return;c||(e.body=JSON.stringify(e.body))}}}catch(e){throw new Error(`Error "${e.message}" occurred in serializing the payload - ${JSON.stringify(u,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0){e.formData={};for(const s of r.formDataParameters){const a=getOperationArgumentValueFromParameter(t,s);if(null!=a){const t=s.mapper.serializedName||getPathStringFromParameter(s);e.formData[t]=r.serializer.serialize(s.mapper,a,getPathStringFromParameter(s),m)}}}}(e,c,a,t)),r(e)}}}function createClientPipeline(e={}){const t=createPipelineFromOptions(null!=e?e:{});return e.credentialOptions&&t.addPolicy(bearerTokenAuthenticationPolicy({credential:e.credentialOptions.credential,scopes:e.credentialOptions.credentialScopes})),t.addPolicy(serializationPolicy(e.serializationOptions),{phase:"Serialize"}),t.addPolicy(deserializationPolicy(e.deserializationOptions),{phase:"Deserialize"}),t}let Vi;const Wi={CSV:",",SSV:" ",Multi:"Multi",TSV:"\t",Pipes:"|"};function getRequestUrl(e,t,r,s){const a=function(e,t,r){var s;const a=new Map;if(null===(s=e.urlParameters)||void 0===s?void 0:s.length)for(const s of e.urlParameters){let c=getOperationArgumentValueFromParameter(t,s,r);const u=getPathStringFromParameter(s);c=e.serializer.serialize(s.mapper,c,u),s.skipEncoding||(c=encodeURIComponent(c)),a.set(`{${s.mapper.serializedName||u}}`,c)}return a}(t,r,s);let c=!1,u=replaceAll(e,a);if(t.path){let e=replaceAll(t.path,a);"/{nextLink}"===t.path&&e.startsWith("/")&&(e=e.substring(1)),!function(e){return e.includes("://")}(e)?u=function(e,t){if(!t)return e;const r=new URL(e);let s=r.pathname;s.endsWith("/")||(s=`${s}/`);t.startsWith("/")&&(t=t.substring(1));const a=t.indexOf("?");if(-1!==a){const e=t.substring(0,a),c=t.substring(a+1);s+=e,c&&(r.search=r.search?`${r.search}&${c}`:c)}else s+=t;return r.pathname=s,r.toString()}(u,e):(u=e,c=!0)}const{queryParams:p,sequenceParams:d}=function(e,t,r){var s;const a=new Map,c=new Set;if(null===(s=e.queryParameters)||void 0===s?void 0:s.length)for(const s of e.queryParameters){"Sequence"===s.mapper.type.name&&s.mapper.serializedName&&c.add(s.mapper.serializedName);let u=getOperationArgumentValueFromParameter(t,s,r);if(null!=u||s.mapper.required){u=e.serializer.serialize(s.mapper,u,getPathStringFromParameter(s));const t=s.collectionFormat?Wi[s.collectionFormat]:"";if(Array.isArray(u)&&(u=u.map((e=>null==e?"":e))),"Multi"===s.collectionFormat&&0===u.length)continue;!Array.isArray(u)||"SSV"!==s.collectionFormat&&"TSV"!==s.collectionFormat||(u=u.join(t)),s.skipEncoding||(u=Array.isArray(u)?u.map((e=>encodeURIComponent(e))):encodeURIComponent(u)),!Array.isArray(u)||"CSV"!==s.collectionFormat&&"Pipes"!==s.collectionFormat||(u=u.join(t)),a.set(s.mapper.serializedName||getPathStringFromParameter(s),u)}}return{queryParams:a,sequenceParams:c}}(t,r,s);return u=function(e,t,r,s=!1){if(0===t.size)return e;const a=new URL(e),c=function(e){const t=new Map;if(!e||"?"!==e[0])return t;const r=(e=e.slice(1)).split("&");for(const e of r){const[r,s]=e.split("=",2),a=t.get(r);a?Array.isArray(a)?a.push(s):t.set(r,[a,s]):t.set(r,s)}return t}(a.search);for(const[e,a]of t){const t=c.get(e);if(Array.isArray(t))if(Array.isArray(a)){t.push(...a);const r=new Set(t);c.set(e,Array.from(r))}else t.push(a);else t?(Array.isArray(a)?a.unshift(t):r.has(e)&&c.set(e,[t,a]),s||c.set(e,a)):c.set(e,a)}const u=[];for(const[e,t]of c)if("string"==typeof t)u.push(`${e}=${t}`);else if(Array.isArray(t))for(const r of t)u.push(`${e}=${r}`);else u.push(`${e}=${t}`);return a.search=u.length?`?${u.join("&")}`:"",a.toString()}(u,p,d,c),u}function replaceAll(e,t){let r=e;for(const[e,s]of t)r=r.split(e).join(s);return r}const Ki=createClientLogger("core-client");const Gi="/.default",Yi={AUTHORIZATION:"authorization"};const Ji=Object.freeze(Object.defineProperty({__proto__:null,MapperTypeNames:Bi,ServiceClient:class{constructor(e={}){var t,r;if(this._requestContentType=e.requestContentType,this._endpoint=null!==(t=e.endpoint)&&void 0!==t?t:e.baseUri,e.baseUri&&Ki.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||(Vi||(Vi=createDefaultHttpClient()),Vi),this.pipeline=e.pipeline||function(e){const t=function(e){if(e.credentialScopes)return e.credentialScopes;if(e.endpoint)return`${e.endpoint}/.default`;if(e.baseUri)return`${e.baseUri}/.default`;if(e.credential&&!e.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy");return}(e),r=e.credential&&t?{credentialScopes:t,credential:e.credential}:void 0;return createClientPipeline(Object.assign(Object.assign({},e),{credentialOptions:r}))}(e),null===(r=e.additionalPolicies)||void 0===r?void 0:r.length)for(const{policy:t,position:r}of e.additionalPolicies){const e="perRetry"===r?"Sign":void 0;this.pipeline.addPolicy(t,{afterPhase:e})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,t){const r=t.baseUrl||this._endpoint;if(!r)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const s=createPipelineRequest({url:getRequestUrl(r,t,e,this)});s.method=t.httpMethod;const a=getOperationRequestInfo(s);a.operationSpec=t,a.operationArguments=e;const c=t.contentType||this._requestContentType;c&&t.requestBody&&s.headers.set("Content-Type",c);const u=e.options;if(u){const e=u.requestOptions;e&&(e.timeout&&(s.timeout=e.timeout),e.onUploadProgress&&(s.onUploadProgress=e.onUploadProgress),e.onDownloadProgress&&(s.onDownloadProgress=e.onDownloadProgress),void 0!==e.shouldDeserialize&&(a.shouldDeserialize=e.shouldDeserialize),e.allowInsecureConnection&&(s.allowInsecureConnection=!0)),u.abortSignal&&(s.abortSignal=u.abortSignal),u.tracingOptions&&(s.tracingOptions=u.tracingOptions)}this._allowInsecureConnection&&(s.allowInsecureConnection=!0),void 0===s.streamResponseStatusCodes&&(s.streamResponseStatusCodes=function(e){const t=new Set;for(const r in e.responses){const s=e.responses[r];s.bodyMapper&&s.bodyMapper.type.name===Bi.Stream&&t.add(Number(r))}return t}(t));try{const e=await this.sendRequest(s),r=flattenResponse(e,t.responses[e.status]);return(null==u?void 0:u.onResponse)&&u.onResponse(e,r),r}catch(e){if("object"==typeof e&&(null==e?void 0:e.response)){const r=e.response,s=flattenResponse(r,t.responses[e.statusCode]||t.responses.default);e.details=s,(null==u?void 0:u.onResponse)&&u.onResponse(r,s,e)}throw e}}},XML_ATTRKEY:Li,XML_CHARKEY:Di,authorizeRequestOnClaimChallenge:async function(e){var t;const{scopes:r,response:s}=e,a=e.logger||Ki,c=s.headers.get("WWW-Authenticate");if(!c)return a.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;const u=function(e){return`, ${e.trim()}`.split(", Bearer ").filter((e=>e)).map((e=>`${e.trim()}, `.split('", ').filter((e=>e)).map((e=>(([e,t])=>({[e]:t}))(e.trim().split('="')))).reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})))}(c)||[],p=u.find((e=>e.claims));if(!p)return a.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;const d=await e.getAccessToken(p.scope?[p.scope]:r,{claims:(h=p.claims,atob(h))});var h;return!!d&&(e.request.headers.set("Authorization",`${null!==(t=d.tokenType)&&void 0!==t?t:"Bearer"} ${d.token}`),!0)},authorizeRequestOnTenantChallenge:async e=>{var t;const r={abortSignal:(s=e.request).abortSignal,requestOptions:{timeout:s.timeout},tracingOptions:s.tracingOptions};var s;const a=function(e){const t=e.headers.get("WWW-Authenticate");if(401===e.status&&t)return t;return}(e.response);if(a){const s=function(e){const t=e.slice(7),r=`${t.trim()} `.split(" ").filter((e=>e));return r.map((e=>(([e,t])=>({[e]:t}))(e.trim().split("=")))).reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})}(a),c=function(e,t){if(!t.resource_id)return e.scopes;const r=new URL(t.resource_id);r.pathname=Gi;let s=r.toString();"https://disk.azure.com/.default"===s&&(s="https://disk.azure.com//.default");return[s]}(e,s),u=function(e){const t=new URL(e.authorization_uri),r=t.pathname.split("/")[1];if(r&&(s=r,/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(s)))return r;var s;return}(s);if(!u)return!1;const p=await e.getAccessToken(c,Object.assign(Object.assign({},r),{tenantId:u}));return!!p&&(e.request.headers.set(Yi.AUTHORIZATION,`${null!==(t=p.tokenType)&&void 0!==t?t:"Bearer"} ${p.token}`),!0)}return!1},createClientPipeline:createClientPipeline,createSerializer:function(e={},t=!1){return new SerializerImpl(e,t)},deserializationPolicy:deserializationPolicy,deserializationPolicyName:Hi,serializationPolicy:serializationPolicy,serializationPolicyName:Fi},Symbol.toStringTag,{value:"Module"})),Qi=getDefaultExportFromNamespaceIfNotNamed(zo);var Xi={},Zi="object"==typeof globalThis?globalThis:Ur,ea="1.9.0",ta=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;var ra=function(e){var t=new Set([e]),r=new Set,s=e.match(ta);if(!s)return function(){return!1};var a=+s[1],c=+s[2],u=+s[3];if(null!=s[4])return function(t){return t===e};function _reject(e){return r.add(e),!1}function _accept(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var s=e.match(ta);if(!s)return _reject(e);var p=+s[1],d=+s[2],h=+s[3];return null!=s[4]||a!==p?_reject(e):0===a?c===d&&u<=h?_accept(e):_reject(e):c<=d?_accept(e):_reject(e)}}(ea),na=ea.split(".")[0],oa=Symbol.for("opentelemetry.js.api."+na),sa=Zi;function registerGlobal(e,t,r,s){var a;void 0===s&&(s=!1);var c=sa[oa]=null!==(a=sa[oa])&&void 0!==a?a:{version:ea};if(!s&&c[e]){var u=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(u.stack||u.message),!1}if(c.version!==ea){u=new Error("@opentelemetry/api: Registration of version v"+c.version+" for "+e+" does not match previously registered API v"+ea);return r.error(u.stack||u.message),!1}return c[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+ea+"."),!0}function getGlobal(e){var t,r,s=null===(t=sa[oa])||void 0===t?void 0:t.version;if(s&&ra(s))return null===(r=sa[oa])||void 0===r?void 0:r[e]}function unregisterGlobal(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+ea+".");var r=sa[oa];r&&delete r[e]}var ia,__read$4=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var s,a,c=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(s=c.next()).done;)u.push(s.value)}catch(e){a={error:e}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(a)throw a.error}}return u},__spreadArray$3=function(e,t,r){if(r||2===arguments.length)for(var s,a=0,c=t.length;a<c;a++)!s&&a in t||(s||(s=Array.prototype.slice.call(t,0,a)),s[a]=t[a]);return e.concat(s||Array.prototype.slice.call(t))},aa=function(){function DiagComponentLogger(e){this._namespace=e.namespace||"DiagComponentLogger"}return DiagComponentLogger.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return logProxy("debug",this._namespace,e)},DiagComponentLogger.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return logProxy("error",this._namespace,e)},DiagComponentLogger.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return logProxy("info",this._namespace,e)},DiagComponentLogger.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return logProxy("warn",this._namespace,e)},DiagComponentLogger.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return logProxy("verbose",this._namespace,e)},DiagComponentLogger}();function logProxy(e,t,r){var s=getGlobal("diag");if(s)return r.unshift(t),s[e].apply(s,__spreadArray$3([],__read$4(r),!1))}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(ia||(ia={}));var __read$3=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var s,a,c=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(s=c.next()).done;)u.push(s.value)}catch(e){a={error:e}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(a)throw a.error}}return u},__spreadArray$2=function(e,t,r){if(r||2===arguments.length)for(var s,a=0,c=t.length;a<c;a++)!s&&a in t||(s||(s=Array.prototype.slice.call(t,0,a)),s[a]=t[a]);return e.concat(s||Array.prototype.slice.call(t))},ca=function(){function DiagAPI(){function _logProxy(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var s=getGlobal("diag");if(s)return s[e].apply(s,__spreadArray$2([],__read$3(t),!1))}}var e=this;e.setLogger=function(t,r){var s,a,c;if(void 0===r&&(r={logLevel:ia.INFO}),t===e){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return e.error(null!==(s=u.stack)&&void 0!==s?s:u.message),!1}"number"==typeof r&&(r={logLevel:r});var p=getGlobal("diag"),d=function(e,t){function _filterFunc(r,s){var a=t[r];return"function"==typeof a&&e>=s?a.bind(t):function(){}}return e<ia.NONE?e=ia.NONE:e>ia.ALL&&(e=ia.ALL),t=t||{},{error:_filterFunc("error",ia.ERROR),warn:_filterFunc("warn",ia.WARN),info:_filterFunc("info",ia.INFO),debug:_filterFunc("debug",ia.DEBUG),verbose:_filterFunc("verbose",ia.VERBOSE)}}(null!==(a=r.logLevel)&&void 0!==a?a:ia.INFO,t);if(p&&!r.suppressOverrideMessage){var h=null!==(c=(new Error).stack)&&void 0!==c?c:"<failed to generate stacktrace>";p.warn("Current logger will be overwritten from "+h),d.warn("Current logger will overwrite one already registered from "+h)}return registerGlobal("diag",d,e,!0)},e.disable=function(){unregisterGlobal("diag",e)},e.createComponentLogger=function(e){return new aa(e)},e.verbose=_logProxy("verbose"),e.debug=_logProxy("debug"),e.info=_logProxy("info"),e.warn=_logProxy("warn"),e.error=_logProxy("error")}return DiagAPI.instance=function(){return this._instance||(this._instance=new DiagAPI),this._instance},DiagAPI}(),__read$2=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var s,a,c=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(s=c.next()).done;)u.push(s.value)}catch(e){a={error:e}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(a)throw a.error}}return u},__values=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},la=function(){function BaggageImpl(e){this._entries=e?new Map(e):new Map}return BaggageImpl.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},BaggageImpl.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){var t=__read$2(e,2);return[t[0],t[1]]}))},BaggageImpl.prototype.setEntry=function(e,t){var r=new BaggageImpl(this._entries);return r._entries.set(e,t),r},BaggageImpl.prototype.removeEntry=function(e){var t=new BaggageImpl(this._entries);return t._entries.delete(e),t},BaggageImpl.prototype.removeEntries=function(){for(var e,t,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var a=new BaggageImpl(this._entries);try{for(var c=__values(r),u=c.next();!u.done;u=c.next()){var p=u.value;a._entries.delete(p)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}return a},BaggageImpl.prototype.clear=function(){return new BaggageImpl},BaggageImpl}(),ua=Symbol("BaggageEntryMetadata"),pa=ca.instance();function createBaggage(e){return void 0===e&&(e={}),new la(new Map(Object.entries(e)))}function createContextKey(e){return Symbol.for(e)}var da,fa=function BaseContext(e){var t=this;t._currentContext=e?new Map(e):new Map,t.getValue=function(e){return t._currentContext.get(e)},t.setValue=function(e,r){var s=new BaseContext(t._currentContext);return s._currentContext.set(e,r),s},t.deleteValue=function(e){var r=new BaseContext(t._currentContext);return r._currentContext.delete(e),r}},ha=new fa,ma=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],DiagConsoleLogger=function(){function _consoleFunc(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(console){var s=console[e];if("function"!=typeof s&&(s=console.log),"function"==typeof s)return s.apply(console,t)}}}for(var e=0;e<ma.length;e++)this[ma[e].n]=_consoleFunc(ma[e].c)},ya=function(){var extendStatics=function(e,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},extendStatics(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),ga=function(){function NoopMeter(){}return NoopMeter.prototype.createGauge=function(e,t){return Aa},NoopMeter.prototype.createHistogram=function(e,t){return Ta},NoopMeter.prototype.createCounter=function(e,t){return Ia},NoopMeter.prototype.createUpDownCounter=function(e,t){return Na},NoopMeter.prototype.createObservableGauge=function(e,t){return xa},NoopMeter.prototype.createObservableCounter=function(e,t){return Ca},NoopMeter.prototype.createObservableUpDownCounter=function(e,t){return ka},NoopMeter.prototype.addBatchObservableCallback=function(e,t){},NoopMeter.prototype.removeBatchObservableCallback=function(e){},NoopMeter}(),NoopMetric=function(){},ba=function(e){function NoopCounterMetric(){return null!==e&&e.apply(this,arguments)||this}return ya(NoopCounterMetric,e),NoopCounterMetric.prototype.add=function(e,t){},NoopCounterMetric}(NoopMetric),va=function(e){function NoopUpDownCounterMetric(){return null!==e&&e.apply(this,arguments)||this}return ya(NoopUpDownCounterMetric,e),NoopUpDownCounterMetric.prototype.add=function(e,t){},NoopUpDownCounterMetric}(NoopMetric),Sa=function(e){function NoopGaugeMetric(){return null!==e&&e.apply(this,arguments)||this}return ya(NoopGaugeMetric,e),NoopGaugeMetric.prototype.record=function(e,t){},NoopGaugeMetric}(NoopMetric),wa=function(e){function NoopHistogramMetric(){return null!==e&&e.apply(this,arguments)||this}return ya(NoopHistogramMetric,e),NoopHistogramMetric.prototype.record=function(e,t){},NoopHistogramMetric}(NoopMetric),Ea=function(){function NoopObservableMetric(){}return NoopObservableMetric.prototype.addCallback=function(e){},NoopObservableMetric.prototype.removeCallback=function(e){},NoopObservableMetric}(),_a=function(e){function NoopObservableCounterMetric(){return null!==e&&e.apply(this,arguments)||this}return ya(NoopObservableCounterMetric,e),NoopObservableCounterMetric}(Ea),Ra=function(e){function NoopObservableGaugeMetric(){return null!==e&&e.apply(this,arguments)||this}return ya(NoopObservableGaugeMetric,e),NoopObservableGaugeMetric}(Ea),Pa=function(e){function NoopObservableUpDownCounterMetric(){return null!==e&&e.apply(this,arguments)||this}return ya(NoopObservableUpDownCounterMetric,e),NoopObservableUpDownCounterMetric}(Ea),Oa=new ga,Ia=new ba,Aa=new Sa,Ta=new wa,Na=new va,Ca=new _a,xa=new Ra,ka=new Pa;!function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(da||(da={}));var La,Da={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},za={set:function(e,t,r){null!=e&&(e[t]=r)}},__read$1=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var s,a,c=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(s=c.next()).done;)u.push(s.value)}catch(e){a={error:e}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(a)throw a.error}}return u},__spreadArray$1=function(e,t,r){if(r||2===arguments.length)for(var s,a=0,c=t.length;a<c;a++)!s&&a in t||(s||(s=Array.prototype.slice.call(t,0,a)),s[a]=t[a]);return e.concat(s||Array.prototype.slice.call(t))},Ma=function(){function NoopContextManager(){}return NoopContextManager.prototype.active=function(){return ha},NoopContextManager.prototype.with=function(e,t,r){for(var s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];return t.call.apply(t,__spreadArray$1([r],__read$1(s),!1))},NoopContextManager.prototype.bind=function(e,t){return t},NoopContextManager.prototype.enable=function(){return this},NoopContextManager.prototype.disable=function(){return this},NoopContextManager}(),__read=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var s,a,c=r.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(s=c.next()).done;)u.push(s.value)}catch(e){a={error:e}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(a)throw a.error}}return u},__spreadArray=function(e,t,r){if(r||2===arguments.length)for(var s,a=0,c=t.length;a<c;a++)!s&&a in t||(s||(s=Array.prototype.slice.call(t,0,a)),s[a]=t[a]);return e.concat(s||Array.prototype.slice.call(t))},Ba="context",$a=new Ma,ja=function(){function ContextAPI(){}return ContextAPI.getInstance=function(){return this._instance||(this._instance=new ContextAPI),this._instance},ContextAPI.prototype.setGlobalContextManager=function(e){return registerGlobal(Ba,e,ca.instance())},ContextAPI.prototype.active=function(){return this._getContextManager().active()},ContextAPI.prototype.with=function(e,t,r){for(var s,a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];return(s=this._getContextManager()).with.apply(s,__spreadArray([e,t,r],__read(a),!1))},ContextAPI.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},ContextAPI.prototype._getContextManager=function(){return getGlobal(Ba)||$a},ContextAPI.prototype.disable=function(){this._getContextManager().disable(),unregisterGlobal(Ba,ca.instance())},ContextAPI}();!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(La||(La={}));var qa="0000000000000000",Ua="00000000000000000000000000000000",Ha={traceId:Ua,spanId:qa,traceFlags:La.NONE},Fa=function(){function NonRecordingSpan(e){void 0===e&&(e=Ha),this._spanContext=e}return NonRecordingSpan.prototype.spanContext=function(){return this._spanContext},NonRecordingSpan.prototype.setAttribute=function(e,t){return this},NonRecordingSpan.prototype.setAttributes=function(e){return this},NonRecordingSpan.prototype.addEvent=function(e,t){return this},NonRecordingSpan.prototype.addLink=function(e){return this},NonRecordingSpan.prototype.addLinks=function(e){return this},NonRecordingSpan.prototype.setStatus=function(e){return this},NonRecordingSpan.prototype.updateName=function(e){return this},NonRecordingSpan.prototype.end=function(e){},NonRecordingSpan.prototype.isRecording=function(){return!1},NonRecordingSpan.prototype.recordException=function(e,t){},NonRecordingSpan}(),Va=createContextKey("OpenTelemetry Context Key SPAN");function getSpan(e){return e.getValue(Va)||void 0}function getActiveSpan(){return getSpan(ja.getInstance().active())}function setSpan(e,t){return e.setValue(Va,t)}function deleteSpan(e){return e.deleteValue(Va)}function setSpanContext(e,t){return setSpan(e,new Fa(t))}function getSpanContext(e){var t;return null===(t=getSpan(e))||void 0===t?void 0:t.spanContext()}var Wa=/^([0-9a-f]{32})$/i,Ka=/^[0-9a-f]{16}$/i;function isValidTraceId(e){return Wa.test(e)&&e!==Ua}function isValidSpanId(e){return Ka.test(e)&&e!==qa}function isSpanContextValid(e){return isValidTraceId(e.traceId)&&isValidSpanId(e.spanId)}function wrapSpanContext(e){return new Fa(e)}var Ga=ja.getInstance(),Ya=function(){function NoopTracer(){}return NoopTracer.prototype.startSpan=function(e,t,r){if(void 0===r&&(r=Ga.active()),Boolean(null==t?void 0:t.root))return new Fa;var s,a=r&&getSpanContext(r);return"object"==typeof(s=a)&&"string"==typeof s.spanId&&"string"==typeof s.traceId&&"number"==typeof s.traceFlags&&isSpanContextValid(a)?new Fa(a):new Fa},NoopTracer.prototype.startActiveSpan=function(e,t,r,s){var a,c,u;if(!(arguments.length<2)){2===arguments.length?u=t:3===arguments.length?(a=t,u=r):(a=t,c=r,u=s);var p=null!=c?c:Ga.active(),d=this.startSpan(e,a,p),h=setSpan(p,d);return Ga.with(h,u,void 0,d)}},NoopTracer}();var Ja,Qa,Xa,Za=new Ya,ec=function(){function ProxyTracer(e,t,r,s){this._provider=e,this.name=t,this.version=r,this.options=s}return ProxyTracer.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},ProxyTracer.prototype.startActiveSpan=function(e,t,r,s){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},ProxyTracer.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):Za},ProxyTracer}(),tc=new(function(){function NoopTracerProvider(){}return NoopTracerProvider.prototype.getTracer=function(e,t,r){return new Ya},NoopTracerProvider}()),rc=function(){function ProxyTracerProvider(){}return ProxyTracerProvider.prototype.getTracer=function(e,t,r){var s;return null!==(s=this.getDelegateTracer(e,t,r))&&void 0!==s?s:new ec(this,e,t,r)},ProxyTracerProvider.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:tc},ProxyTracerProvider.prototype.setDelegate=function(e){this._delegate=e},ProxyTracerProvider.prototype.getDelegateTracer=function(e,t,r){var s;return null===(s=this._delegate)||void 0===s?void 0:s.getTracer(e,t,r)},ProxyTracerProvider}();!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(Ja||(Ja={})),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(Qa||(Qa={})),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(Xa||(Xa={}));var nc="[_0-9a-z-*/]",oc=new RegExp("^(?:"+("[a-z]"+nc+"{0,255}")+"|"+("[a-z0-9]"+nc+"{0,240}@[a-z]"+nc+"{0,13}")+")$"),sc=/^[ -~]{0,255}[!-~]$/,ic=/,|=/;var ac=function(){function TraceStateImpl(e){this._internalState=new Map,e&&this._parse(e)}return TraceStateImpl.prototype.set=function(e,t){var r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r},TraceStateImpl.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},TraceStateImpl.prototype.get=function(e){return this._internalState.get(e)},TraceStateImpl.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,r){return t.push(r+"="+e.get(r)),t}),[]).join(",")},TraceStateImpl.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var r=t.trim(),s=r.indexOf("=");if(-1!==s){var a=r.slice(0,s),c=r.slice(s+1,t.length);(function(e){return oc.test(e)})(a)&&function(e){return sc.test(e)&&!ic.test(e)}(c)&&e.set(a,c)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},TraceStateImpl.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},TraceStateImpl.prototype._clone=function(){var e=new TraceStateImpl;return e._internalState=new Map(this._internalState),e},TraceStateImpl}();var cc=ja.getInstance(),lc=ca.instance(),uc=new(function(){function NoopMeterProvider(){}return NoopMeterProvider.prototype.getMeter=function(e,t,r){return Oa},NoopMeterProvider}()),pc="metrics",dc=function(){function MetricsAPI(){}return MetricsAPI.getInstance=function(){return this._instance||(this._instance=new MetricsAPI),this._instance},MetricsAPI.prototype.setGlobalMeterProvider=function(e){return registerGlobal(pc,e,ca.instance())},MetricsAPI.prototype.getMeterProvider=function(){return getGlobal(pc)||uc},MetricsAPI.prototype.getMeter=function(e,t,r){return this.getMeterProvider().getMeter(e,t,r)},MetricsAPI.prototype.disable=function(){unregisterGlobal(pc,ca.instance())},MetricsAPI}(),fc=dc.getInstance(),hc=function(){function NoopTextMapPropagator(){}return NoopTextMapPropagator.prototype.inject=function(e,t){},NoopTextMapPropagator.prototype.extract=function(e,t){return e},NoopTextMapPropagator.prototype.fields=function(){return[]},NoopTextMapPropagator}(),mc=createContextKey("OpenTelemetry Baggage Key");function getBaggage(e){return e.getValue(mc)||void 0}function getActiveBaggage(){return getBaggage(ja.getInstance().active())}function setBaggage(e,t){return e.setValue(mc,t)}function deleteBaggage(e){return e.deleteValue(mc)}var yc="propagation",gc=new hc,bc=function(){function PropagationAPI(){this.createBaggage=createBaggage,this.getBaggage=getBaggage,this.getActiveBaggage=getActiveBaggage,this.setBaggage=setBaggage,this.deleteBaggage=deleteBaggage}return PropagationAPI.getInstance=function(){return this._instance||(this._instance=new PropagationAPI),this._instance},PropagationAPI.prototype.setGlobalPropagator=function(e){return registerGlobal(yc,e,ca.instance())},PropagationAPI.prototype.inject=function(e,t,r){return void 0===r&&(r=za),this._getGlobalPropagator().inject(e,t,r)},PropagationAPI.prototype.extract=function(e,t,r){return void 0===r&&(r=Da),this._getGlobalPropagator().extract(e,t,r)},PropagationAPI.prototype.fields=function(){return this._getGlobalPropagator().fields()},PropagationAPI.prototype.disable=function(){unregisterGlobal(yc,ca.instance())},PropagationAPI.prototype._getGlobalPropagator=function(){return getGlobal(yc)||gc},PropagationAPI}(),vc=bc.getInstance(),Sc="trace",wc=function(){function TraceAPI(){this._proxyTracerProvider=new rc,this.wrapSpanContext=wrapSpanContext,this.isSpanContextValid=isSpanContextValid,this.deleteSpan=deleteSpan,this.getSpan=getSpan,this.getActiveSpan=getActiveSpan,this.getSpanContext=getSpanContext,this.setSpan=setSpan,this.setSpanContext=setSpanContext}return TraceAPI.getInstance=function(){return this._instance||(this._instance=new TraceAPI),this._instance},TraceAPI.prototype.setGlobalTracerProvider=function(e){var t=registerGlobal(Sc,this._proxyTracerProvider,ca.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},TraceAPI.prototype.getTracerProvider=function(){return getGlobal(Sc)||this._proxyTracerProvider},TraceAPI.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},TraceAPI.prototype.disable=function(){unregisterGlobal(Sc,ca.instance()),this._proxyTracerProvider=new rc},TraceAPI}(),Ec=wc.getInstance();const _c={context:cc,diag:lc,metrics:fc,propagation:vc,trace:Ec},Rc=Object.freeze(Object.defineProperty({__proto__:null,DiagConsoleLogger:DiagConsoleLogger,get DiagLogLevel(){return ia},INVALID_SPANID:qa,INVALID_SPAN_CONTEXT:Ha,INVALID_TRACEID:Ua,ProxyTracer:ec,ProxyTracerProvider:rc,ROOT_CONTEXT:ha,get SamplingDecision(){return Ja},get SpanKind(){return Qa},get SpanStatusCode(){return Xa},get TraceFlags(){return La},get ValueType(){return da},baggageEntryMetadataFromString:function(e){return"string"!=typeof e&&(pa.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:ua,toString:function(){return e}}},context:cc,createContextKey:createContextKey,createNoopMeter:function(){return Oa},createTraceState:function(e){return new ac(e)},default:_c,defaultTextMapGetter:Da,defaultTextMapSetter:za,diag:lc,isSpanContextValid:isSpanContextValid,isValidSpanId:isValidSpanId,isValidTraceId:isValidTraceId,metrics:fc,propagation:vc,trace:Ec},Symbol.toStringTag,{value:"Module"}));!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Rc;class NoOpSpan{spanContext(){return{spanId:"",traceId:"",traceFlags:0}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}recordException(e,t){}}class NoOpTracer{startSpan(e,t){return new NoOpSpan}getCurrentSpan(){return new NoOpSpan}withSpan(e,t){return t()}bind(e,t){return e}}const r=Symbol.for("@azure/core-tracing.tracerCache4");let s,a;function loadTracerCache(){const e=ps;e[r]||(e[r]={tracer:void 0}),s=e[r]}function getCache(){return s||loadTracerCache(),s}function getTracer(){const e=getCache();return e.tracer?e.tracer:(a||(a=new NoOpTracer),a)}function setSpan(e,r){return t.trace.setSpan(e,r)}function getSpanContext(e){return t.trace.getSpanContext(e)}!function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(e.SpanKind||(e.SpanKind={}));const c=t.context;!function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(e.SpanStatusCode||(e.SpanStatusCode={}));class TestSpan extends NoOpSpan{constructor(t,r,s,a,c,u=Date.now()){super(),this._tracer=t,this.name=r,this.kind=a,this.startTime=u,this.parentSpanId=c,this.status={code:e.SpanStatusCode.OK},this.endCalled=!1,this._context=s,this.attributes={}}tracer(){return this._tracer}spanContext(){return this._context}end(e){this.endCalled=!0}setStatus(e){return this.status=e,this}isRecording(){return!0}setAttribute(e,t){return this.attributes[e]=t,this}setAttributes(e){for(const t of Object.keys(e))this.attributes[t]=e[t];return this}}e.NoOpSpan=NoOpSpan,e.NoOpTracer=NoOpTracer,e.TestSpan=TestSpan,e.TestTracer=class extends NoOpTracer{constructor(){super(...arguments),this.traceIdCounter=0,this.spanIdCounter=0,this.rootSpans=[],this.knownSpans=[]}getNextTraceId(){return this.traceIdCounter++,String(this.traceIdCounter)}getNextSpanId(){return this.spanIdCounter++,String(this.spanIdCounter)}getRootSpans(){return this.rootSpans}getKnownSpans(){return this.knownSpans}getActiveSpans(){return this.knownSpans.filter((e=>!e.endCalled))}getSpanGraph(e){const t=this.knownSpans.filter((t=>t.spanContext().traceId===e)),r=[],s=new Map;for(const e of t){const t=e.spanContext().spanId,a={name:e.name,children:[]};if(s.set(t,a),e.parentSpanId){const t=s.get(e.parentSpanId);if(!t)throw new Error(`Span with name ${a.name} has an unknown parentSpan with id ${e.parentSpanId}`);t.children.push(a)}else r.push(a)}return{roots:r}}startSpan(t,r,s){const a=getSpanContext(s||c.active());let u,p=!1;a&&a.traceId?u=a.traceId:(u=this.getNextTraceId(),p=!0);const d={traceId:u,spanId:this.getNextSpanId(),traceFlags:0},h=new TestSpan(this,t,d,(null==r?void 0:r.kind)||e.SpanKind.INTERNAL,a?a.spanId:void 0,null==r?void 0:r.startTime);return this.knownSpans.push(h),p&&this.rootSpans.push(h),h}},e.context=c,e.createSpanFunction=function(t){return function(r,s){const a=getTracer(),u=(null==s?void 0:s.tracingOptions)||{},p=Object.assign({kind:e.SpanKind.INTERNAL},u.spanOptions),d=t.packagePrefix?`${t.packagePrefix}.${r}`:r,h=a.startSpan(d,p,u.tracingContext);t.namespace&&h.setAttribute("az.namespace",t.namespace);let m=u.spanOptions||{};h.isRecording()&&t.namespace&&(m=Object.assign(Object.assign({},u.spanOptions),{attributes:Object.assign(Object.assign({},p.attributes),{"az.namespace":t.namespace})}));const g=Object.assign(Object.assign({},u),{spanOptions:m,tracingContext:setSpan(u.tracingContext||c.active(),h)});return{span:h,updatedOptions:Object.assign(Object.assign({},s),{tracingOptions:g})}}},e.extractSpanContextFromTraceParentHeader=function(e){const t=e.split("-");if(4!==t.length)return;const[r,s,a,c]=t;if("00"!==r)return;return{spanId:a,traceId:s,traceFlags:parseInt(c,16)}},e.getSpan=function(e){return t.trace.getSpan(e)},e.getSpanContext=getSpanContext,e.getTraceParentHeader=function(e){const t=[];if(e.traceId||t.push("traceId"),e.spanId||t.push("spanId"),t.length)return;const r=(e.traceFlags||0).toString(16),s=1===r.length?`0${r}`:r;return`00-${e.traceId}-${e.spanId}-${s}`},e.getTracer=getTracer,e.setSpan=setSpan,e.setSpanContext=function(e,r){return t.trace.setSpanContext(e,r)},e.setTracer=function(e){getCache().tracer=e}}(Xi);const Pc=createClientLogger("core-lro"),Oc=2e3,Ic=["succeeded","canceled","failed"];function deserializeState(e){try{return JSON.parse(e).state}catch(t){throw new Error(`Unable to deserialize input state: ${e}`)}}function setStateError(e){const{state:t,stateProxy:r,isOperationError:s}=e;return e=>{throw s(e)&&(r.setError(t,e),r.setFailed(t)),e}}function appendReadableErrorMessage(e,t){let r=e;return"."!==r.slice(-1)&&(r+="."),r+" "+t}function processOperationStatus(e){const{state:t,stateProxy:r,status:s,isDone:a,processResult:c,getError:u,response:p,setErrorAsResult:d}=e;switch(s){case"succeeded":r.setSucceeded(t);break;case"failed":{const e=null==u?void 0:u(p);let s="";if(e){const{code:t,message:r}=function(e){let t=e.message,r=e.code,s=e;for(;s.innererror;)s=s.innererror,r=s.code,t=appendReadableErrorMessage(t,s.message);return{code:r,message:t}}(e);s=`. ${t}. ${r}`}const a=`The long-running operation has failed${s}`;r.setError(t,new Error(a)),r.setFailed(t),Pc.warning(a);break}case"canceled":r.setCanceled(t)}((null==a?void 0:a(p,t))||void 0===a&&["succeeded","canceled"].concat(d?[]:["failed"]).includes(s))&&r.setResult(t,function(e){const{processResult:t,response:r,state:s}=e;return t?t(r,s):r}({response:p,state:t,processResult:c}))}async function initOperation(e){const{init:t,stateProxy:r,processResult:s,getOperationStatus:a,withOperationLocation:c,setErrorAsResult:u}=e,{operationLocation:p,resourceLocation:d,metadata:h,response:m}=await t();p&&(null==c||c(p,!1));const g={metadata:h,operationLocation:p,resourceLocation:d};Pc.verbose("LRO: Operation description:",g);const v=r.initState(g);return processOperationStatus({state:v,status:a({response:m,state:v,operationLocation:p}),stateProxy:r,response:m,setErrorAsResult:u,processResult:s}),v}async function pollOperation(e){const{poll:t,state:r,stateProxy:s,options:a,getOperationStatus:c,getResourceLocation:u,getOperationLocation:p,isOperationError:d,withOperationLocation:h,getPollingInterval:m,processResult:g,getError:v,updateState:S,setDelay:w,isDone:E,setErrorAsResult:_}=e,{operationLocation:R}=r.config;if(void 0!==R){const{response:e,status:P}=await async function(e){const{poll:t,state:r,stateProxy:s,operationLocation:a,getOperationStatus:c,getResourceLocation:u,isOperationError:p,options:d}=e,h=await t(a,d).catch(setStateError({state:r,stateProxy:s,isOperationError:p})),m=c(h,r);if(Pc.verbose(`LRO: Status:\n\tPolling from: ${r.config.operationLocation}\n\tOperation status: ${m}\n\tPolling status: ${Ic.includes(m)?"Stopped":"Running"}`),"succeeded"===m){const e=u(h,r);if(void 0!==e)return{response:await t(e).catch(setStateError({state:r,stateProxy:s,isOperationError:p})),status:m}}return{response:h,status:m}}({poll:t,getOperationStatus:c,state:r,stateProxy:s,operationLocation:R,getResourceLocation:u,isOperationError:d,options:a});if(processOperationStatus({status:P,response:e,state:r,stateProxy:s,isDone:E,processResult:g,getError:v,setErrorAsResult:_}),!Ic.includes(P)){const t=null==m?void 0:m(e);t&&w(t);const s=null==p?void 0:p(e,r);if(void 0!==s){const e=R!==s;r.config.operationLocation=s,null==h||h(s,e)}else null==h||h(R,!1)}null==S||S(r,e)}}function getOperationLocationPollingUrl(e){const{azureAsyncOperation:t,operationLocation:r}=e;return null!=r?r:t}function getLocationHeader(e){return e.headers.location}function getOperationLocationHeader(e){return e.headers["operation-location"]}function getAzureAsyncOperationHeader(e){return e.headers["azure-asyncoperation"]}function findResourceLocation(e){var t;const{location:r,requestMethod:s,requestPath:a,resourceLocationConfig:c}=e;switch(s){case"PUT":return a;case"DELETE":return;case"PATCH":return null!==(t=getDefault())&&void 0!==t?t:a;default:return getDefault()}function getDefault(){switch(c){case"azure-async-operation":return;case"original-uri":return a;default:return r}}}function inferLroMode(e){const{rawResponse:t,requestMethod:r,requestPath:s,resourceLocationConfig:a}=e,c=getOperationLocationPollingUrl({operationLocation:getOperationLocationHeader(t),azureAsyncOperation:getAzureAsyncOperationHeader(t)}),u=getLocationHeader(t),p=null==r?void 0:r.toLocaleUpperCase();return void 0!==c?{mode:"OperationLocation",operationLocation:c,resourceLocation:findResourceLocation({requestMethod:p,location:u,requestPath:s,resourceLocationConfig:a})}:void 0!==u?{mode:"ResourceLocation",operationLocation:u}:"PUT"===p&&s?{mode:"Body",operationLocation:s}:void 0}function transformStatus(e){const{status:t,statusCode:r}=e;if("string"!=typeof t&&void 0!==t)throw new Error(`Polling was unsuccessful. Expected status to have a string value or no value but it has instead: ${t}. This doesn't necessarily indicate the operation has failed. Check your Azure subscription or resource status for more information.`);switch(null==t?void 0:t.toLocaleLowerCase()){case void 0:return toOperationStatus(r);case"succeeded":return"succeeded";case"failed":return"failed";case"running":case"accepted":case"started":case"canceling":case"cancelling":return"running";case"canceled":case"cancelled":return"canceled";default:return Pc.verbose(`LRO: unrecognized operation status: ${t}`),t}}function toOperationStatus(e){return 202===e?"running":e<300?"succeeded":"failed"}function parseRetryAfter({rawResponse:e}){const t=e.headers["retry-after"];if(void 0!==t){const e=parseInt(t);return isNaN(e)?function(e){const t=Math.floor((new Date).getTime()),r=e.getTime();if(t<r)return r-t;return}(new Date(t)):1e3*e}}function getErrorFromResponse(e){const t=accessBodyProperty(e,"error");if(t){if(t.code&&t.message)return t;Pc.warning("The long-running operation failed but the error property in the response's body doesn't contain code or message")}else Pc.warning("The long-running operation failed but there is no error property in the response's body")}function getStatusFromInitialResponse(e){const{response:t,state:r,operationLocation:s}=e;const a=function(){var e;switch(null===(e=r.config.metadata)||void 0===e?void 0:e.mode){case void 0:return toOperationStatus(t.rawResponse.statusCode);case"Body":return getOperationStatus(t,r);default:return"running"}}();return"running"===a&&void 0===s?"succeeded":a}function getOperationLocation({rawResponse:e},t){var r;switch(null===(r=t.config.metadata)||void 0===r?void 0:r.mode){case"OperationLocation":return getOperationLocationPollingUrl({operationLocation:getOperationLocationHeader(e),azureAsyncOperation:getAzureAsyncOperationHeader(e)});case"ResourceLocation":return getLocationHeader(e);default:return}}function getOperationStatus({rawResponse:e},t){var r;const s=null===(r=t.config.metadata)||void 0===r?void 0:r.mode;switch(s){case"OperationLocation":return function(e){var t;const{status:r}=null!==(t=e.body)&&void 0!==t?t:{};return transformStatus({status:r,statusCode:e.statusCode})}(e);case"ResourceLocation":return toOperationStatus(e.statusCode);case"Body":return function(e){var t,r;const{properties:s,provisioningState:a}=null!==(t=e.body)&&void 0!==t?t:{};return transformStatus({status:null!==(r=null==s?void 0:s.provisioningState)&&void 0!==r?r:a,statusCode:e.statusCode})}(e);default:throw new Error(`Internal error: Unexpected operation mode: ${s}`)}}function accessBodyProperty({flatResponse:e,rawResponse:t},r){var s,a;return null!==(s=null==e?void 0:e[r])&&void 0!==s?s:null===(a=t.body)||void 0===a?void 0:a[r]}function getResourceLocation(e,t){const r=accessBodyProperty(e,"resourceLocation");return r&&"string"==typeof r&&(t.config.resourceLocation=r),t.config.resourceLocation}function isOperationError(e){return"RestError"===e.name}function buildCreatePoller(e){const{getOperationLocation:t,getStatusFromInitialResponse:r,getStatusFromPollResponse:s,isOperationError:a,getResourceLocation:c,getPollingInterval:u,getError:p,resolveOnUnsuccessful:d}=e;return async({init:e,poll:h},m)=>{const{processResult:g,updateState:v,withOperationLocation:S,intervalInMs:w=Oc,restoreFrom:E}=m||{},_={initState:e=>({status:"running",config:e}),setCanceled:e=>e.status="canceled",setError:(e,t)=>e.error=t,setResult:(e,t)=>e.result=t,setRunning:e=>e.status="running",setSucceeded:e=>e.status="succeeded",setFailed:e=>e.status="failed",getError:e=>e.error,getResult:e=>e.result,isCanceled:e=>"canceled"===e.status,isFailed:e=>"failed"===e.status,isRunning:e=>"running"===e.status,isSucceeded:e=>"succeeded"===e.status},R=S?(()=>{let e=!1;return(t,r)=>{r?S(t):e||S(t),e=!0}})():void 0,P=E?deserializeState(E):await initOperation({init:e,stateProxy:_,processResult:g,getOperationStatus:r,withOperationLocation:R,setErrorAsResult:!d});let O;const I=new AbortController,N=new Map,C="Operation was canceled";let x=w;const L={getOperationState:()=>P,getResult:()=>P.result,isDone:()=>["succeeded","failed","canceled"].includes(P.status),isStopped:()=>void 0===O,stopPolling:()=>{I.abort()},toString:()=>JSON.stringify({state:P}),onProgress:e=>{const t=Symbol();return N.set(t,e),()=>N.delete(t)},pollUntilDone:e=>null!=O?O:O=(async()=>{const{abortSignal:t}=e||{};function abortListener(){I.abort()}const r=I.signal;(null==t?void 0:t.aborted)?I.abort():r.aborted||null==t||t.addEventListener("abort",abortListener,{once:!0});try{if(!L.isDone())for(await L.poll({abortSignal:r});!L.isDone();)await delay$1(x,{abortSignal:r}),await L.poll({abortSignal:r})}finally{null==t||t.removeEventListener("abort",abortListener)}if(d)return L.getResult();switch(P.status){case"succeeded":return L.getResult();case"canceled":throw new Error(C);case"failed":throw P.error;case"notStarted":case"running":throw new Error("Polling completed without succeeding or failing")}})().finally((()=>{O=void 0})),async poll(e){if(d){if(L.isDone())return}else switch(P.status){case"succeeded":return;case"canceled":throw new Error(C);case"failed":throw P.error}if(await pollOperation({poll:h,state:P,stateProxy:_,getOperationLocation:t,isOperationError:a,withOperationLocation:R,getPollingInterval:u,getOperationStatus:s,getResourceLocation:c,processResult:g,getError:p,updateState:v,options:e,setDelay:e=>{x=e},setErrorAsResult:!d}),await(async()=>N.forEach((e=>e(P))))(),!d)switch(P.status){case"canceled":throw new Error(C);case"failed":throw P.error}}};return L}}class GenericPollOperation{constructor(e,t,r,s,a,c,u){this.state=e,this.lro=t,this.setErrorAsResult=r,this.lroResourceLocationConfig=s,this.processResult=a,this.updateState=c,this.isDone=u}setPollerConfig(e){this.pollerConfig=e}async update(e){var t;const r={initState:e=>({config:e,isStarted:!0}),setCanceled:e=>e.isCancelled=!0,setError:(e,t)=>e.error=t,setResult:(e,t)=>e.result=t,setRunning:e=>e.isStarted=!0,setSucceeded:e=>e.isCompleted=!0,setFailed:()=>{},getError:e=>e.error,getResult:e=>e.result,isCanceled:e=>!!e.isCancelled,isFailed:e=>!!e.error,isRunning:e=>!!e.isStarted,isSucceeded:e=>Boolean(e.isCompleted&&!e.isCancelled&&!e.error)};this.state.isStarted||(this.state=Object.assign(Object.assign({},this.state),await async function(e){const{stateProxy:t,resourceLocationConfig:r,processResult:s,lro:a,setErrorAsResult:c}=e;return initOperation({init:async()=>{const e=await a.sendInitialRequest(),t=inferLroMode({rawResponse:e.rawResponse,requestPath:a.requestPath,requestMethod:a.requestMethod,resourceLocationConfig:r});return Object.assign({response:e,operationLocation:null==t?void 0:t.operationLocation,resourceLocation:null==t?void 0:t.resourceLocation},(null==t?void 0:t.mode)?{metadata:{mode:t.mode}}:{})},stateProxy:t,processResult:s?({flatResponse:e},t)=>s(e,t):({flatResponse:e})=>e,getOperationStatus:getStatusFromInitialResponse,setErrorAsResult:c})}({lro:this.lro,stateProxy:r,resourceLocationConfig:this.lroResourceLocationConfig,processResult:this.processResult,setErrorAsResult:this.setErrorAsResult})));const s=this.updateState;return this.isDone,this.state.isCompleted||void 0!==this.state.error||await async function(e){const{lro:t,stateProxy:r,options:s,processResult:a,updateState:c,setDelay:u,state:p,setErrorAsResult:d}=e;return pollOperation({state:p,stateProxy:r,setDelay:u,processResult:a?({flatResponse:e},t)=>a(e,t):({flatResponse:e})=>e,getError:getErrorFromResponse,updateState:c,getPollingInterval:parseRetryAfter,getOperationLocation:getOperationLocation,getOperationStatus:getOperationStatus,isOperationError:isOperationError,getResourceLocation:getResourceLocation,options:s,poll:async(e,r)=>t.sendPollRequest(e,r),setErrorAsResult:d})}({lro:this.lro,state:this.state,stateProxy:r,processResult:this.processResult,updateState:s?(e,{rawResponse:t})=>s(e,t):void 0,options:e,setDelay:e=>{this.pollerConfig.intervalInMs=e},setErrorAsResult:this.setErrorAsResult}),null===(t=null==e?void 0:e.fireProgress)||void 0===t||t.call(e,this.state),this}async cancel(){return Pc.error("`cancelOperation` is deprecated because it wasn't implemented"),this}toString(){return JSON.stringify({state:this.state})}}class PollerStoppedError extends Error{constructor(e){super(e),this.name="PollerStoppedError",Object.setPrototypeOf(this,PollerStoppedError.prototype)}}class PollerCancelledError extends Error{constructor(e){super(e),this.name="PollerCancelledError",Object.setPrototypeOf(this,PollerCancelledError.prototype)}}class Poller{constructor(e){this.resolveOnUnsuccessful=!1,this.stopped=!0,this.pollProgressCallbacks=[],this.operation=e,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),this.promise.catch((()=>{}))}async startPolling(e={}){for(this.stopped&&(this.stopped=!1);!this.isStopped()&&!this.isDone();)await this.poll(e),await this.delay()}async pollOnce(e={}){this.isDone()||(this.operation=await this.operation.update({abortSignal:e.abortSignal,fireProgress:this.fireProgress.bind(this)})),this.processUpdatedState()}fireProgress(e){for(const t of this.pollProgressCallbacks)t(e)}async cancelOnce(e={}){this.operation=await this.operation.cancel(e)}poll(e={}){if(!this.pollOncePromise){this.pollOncePromise=this.pollOnce(e);const clearPollOncePromise=()=>{this.pollOncePromise=void 0};this.pollOncePromise.then(clearPollOncePromise,clearPollOncePromise).catch(this.reject)}return this.pollOncePromise}processUpdatedState(){if(this.operation.state.error&&(this.stopped=!0,!this.resolveOnUnsuccessful))throw this.reject(this.operation.state.error),this.operation.state.error;if(this.operation.state.isCancelled&&(this.stopped=!0,!this.resolveOnUnsuccessful)){const e=new PollerCancelledError("Operation was canceled");throw this.reject(e),e}this.isDone()&&this.resolve&&this.resolve(this.getResult())}async pollUntilDone(e={}){return this.stopped&&this.startPolling(e).catch(this.reject),this.processUpdatedState(),this.promise}onProgress(e){return this.pollProgressCallbacks.push(e),()=>{this.pollProgressCallbacks=this.pollProgressCallbacks.filter((t=>t!==e))}}isDone(){const e=this.operation.state;return Boolean(e.isCompleted||e.isCancelled||e.error)}stopPolling(){this.stopped||(this.stopped=!0,this.reject&&this.reject(new PollerStoppedError("This poller is already stopped")))}isStopped(){return this.stopped}cancelOperation(e={}){if(this.cancelPromise){if(e.abortSignal)throw new Error("A cancel request is currently pending")}else this.cancelPromise=this.cancelOnce(e);return this.cancelPromise}getOperationState(){return this.operation.state}getResult(){return this.operation.state.result}toString(){return this.operation.toString()}}const Ac=Object.freeze(Object.defineProperty({__proto__:null,LroEngine:class extends Poller{constructor(e,t){const{intervalInMs:r=Oc,resumeFrom:s,resolveOnUnsuccessful:a=!1,isDone:c,lroResourceLocationConfig:u,processResult:p,updateState:d}=t||{},h=s?deserializeState(s):{},m=new GenericPollOperation(h,e,!a,u,p,d,c);super(m),this.resolveOnUnsuccessful=a,this.config={intervalInMs:r},m.setPollerConfig(this.config)}delay(){return new Promise((e=>setTimeout((()=>e()),this.config.intervalInMs)))}},Poller:Poller,PollerCancelledError:PollerCancelledError,PollerStoppedError:PollerStoppedError,createHttpPoller:async function(e,t){const{resourceLocationConfig:r,intervalInMs:s,processResult:a,restoreFrom:c,updateState:u,withOperationLocation:p,resolveOnUnsuccessful:d=!1}=t||{};return buildCreatePoller({getStatusFromInitialResponse:getStatusFromInitialResponse,getStatusFromPollResponse:getOperationStatus,isOperationError:isOperationError,getOperationLocation:getOperationLocation,getResourceLocation:getResourceLocation,getPollingInterval:parseRetryAfter,getError:getErrorFromResponse,resolveOnUnsuccessful:d})({init:async()=>{const t=await e.sendInitialRequest(),s=inferLroMode({rawResponse:t.rawResponse,requestPath:e.requestPath,requestMethod:e.requestMethod,resourceLocationConfig:r});return Object.assign({response:t,operationLocation:null==s?void 0:s.operationLocation,resourceLocation:null==s?void 0:s.resourceLocation},(null==s?void 0:s.mode)?{metadata:{mode:s.mode}}:{})},poll:e.sendPollRequest},{intervalInMs:s,withOperationLocation:p,restoreFrom:c,updateState:u,processResult:a?({flatResponse:e},t)=>a(e,t):({flatResponse:e})=>e})}},Symbol.toStringTag,{value:"Module"}));!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Os,r=Cs,s=ki,a=Ji,c=si,u=Qi,p=Xi,d=Ac;const h={type:{name:"Composite",className:"JobDescriptor",modelProperties:{displayName:{serializedName:"displayName",type:{name:"String"}}}}},m={type:{name:"Composite",className:"AnalysisInput",modelProperties:{analysisInput:{serializedName:"analysisInput",type:{name:"Composite",className:"MultiLanguageBatchInput"}}}}},g={type:{name:"Composite",className:"MultiLanguageBatchInput",modelProperties:{documents:{serializedName:"documents",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"TextDocumentInput"}}}}}}},v={type:{name:"Composite",className:"JobManifest",modelProperties:{tasks:{serializedName:"tasks",type:{name:"Composite",className:"JobManifestTasks"}}}}},S={type:{name:"Composite",className:"ErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"TextAnalyticsError"}}}}},w={type:{name:"Composite",className:"JobMetadata",modelProperties:{createdDateTime:{serializedName:"createdDateTime",required:!0,type:{name:"DateTime"}},expirationDateTime:{serializedName:"expirationDateTime",type:{name:"DateTime"}},jobId:{serializedName:"jobId",required:!0,type:{name:"Uuid"}},lastUpdateDateTime:{serializedName:"lastUpdateDateTime",required:!0,type:{name:"DateTime"}},status:{serializedName:"status",required:!0,type:{name:"Enum",allowedValues:["notStarted","running","succeeded","failed","rejected","cancelled","cancelling"]}}}}},E={type:{name:"Composite",className:"AnalyzeJobDisplayName",modelProperties:{displayName:{serializedName:"displayName",type:{name:"String"}}}}},_={type:{name:"Composite",className:"TasksState",modelProperties:{tasks:{serializedName:"tasks",type:{name:"Composite",className:"TasksStateTasks"}}}}},R={type:{name:"Composite",className:"TaskState",modelProperties:{lastUpdateDateTime:{serializedName:"lastUpdateDateTime",required:!0,type:{name:"DateTime"}},status:{serializedName:"status",required:!0,type:{name:"Enum",allowedValues:["notStarted","running","succeeded","failed","rejected","cancelled","cancelling"]}}}}},P={type:{name:"Composite",className:"EntitiesTaskResult",modelProperties:{results:{serializedName:"results",type:{name:"Composite",className:"EntitiesResult"}}}}},O={type:{name:"Composite",className:"EntitiesResult",modelProperties:{documents:{serializedName:"documents",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DocumentEntities"}}}},errors:{serializedName:"errors",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DocumentError"}}}},statistics:{serializedName:"statistics",type:{name:"Composite",className:"TextDocumentBatchStatistics"}},modelVersion:{serializedName:"modelVersion",required:!0,type:{name:"String"}}}}},I={type:{name:"Composite",className:"PiiTaskResult",modelProperties:{results:{serializedName:"results",type:{name:"Composite",className:"PiiResult"}}}}},N={type:{name:"Composite",className:"PiiResult",modelProperties:{documents:{serializedName:"documents",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"PiiDocumentEntities"}}}},errors:{serializedName:"errors",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DocumentError"}}}},statistics:{serializedName:"statistics",type:{name:"Composite",className:"TextDocumentBatchStatistics"}},modelVersion:{serializedName:"modelVersion",required:!0,type:{name:"String"}}}}},C={type:{name:"Composite",className:"KeyPhraseTaskResult",modelProperties:{results:{serializedName:"results",type:{name:"Composite",className:"KeyPhraseResult"}}}}},x={type:{name:"Composite",className:"KeyPhraseResult",modelProperties:{documents:{serializedName:"documents",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DocumentKeyPhrases"}}}},errors:{serializedName:"errors",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DocumentError"}}}},statistics:{serializedName:"statistics",type:{name:"Composite",className:"TextDocumentBatchStatistics"}},modelVersion:{serializedName:"modelVersion",required:!0,type:{name:"String"}}}}},L={type:{name:"Composite",className:"EntityLinkingTaskResult",modelProperties:{results:{serializedName:"results",type:{name:"Composite",className:"EntityLinkingResult"}}}}},D={type:{name:"Composite",className:"EntityLinkingResult",modelProperties:{documents:{serializedName:"documents",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DocumentLinkedEntities"}}}},errors:{serializedName:"errors",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DocumentError"}}}},statistics:{serializedName:"statistics",type:{name:"Composite",className:"TextDocumentBatchStatistics"}},modelVersion:{serializedName:"modelVersion",required:!0,type:{name:"String"}}}}},z={type:{name:"Composite",className:"SentimentTaskResult",modelProperties:{results:{serializedName:"results",type:{name:"Composite",className:"SentimentResponse"}}}}},M={type:{name:"Composite",className:"SentimentResponse",modelProperties:{documents:{serializedName:"documents",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DocumentSentiment"}}}},errors:{serializedName:"errors",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DocumentError"}}}},statistics:{serializedName:"statistics",type:{name:"Composite",className:"TextDocumentBatchStatistics"}},modelVersion:{serializedName:"modelVersion",required:!0,type:{name:"String"}}}}},B={type:{name:"Composite",className:"AnalyzeJobErrorsAndStatistics",modelProperties:{errors:{serializedName:"errors",type:{name:"Sequence",element:{type:{name:"Composite",className:"TextAnalyticsError"}}}},statistics:{serializedName:"statistics",type:{name:"Composite",className:"TextDocumentBatchStatistics"}}}}},$={type:{name:"Composite",className:"Pagination",modelProperties:{nextLink:{serializedName:"@nextLink",type:{name:"String"}}}}},j={type:{name:"Composite",className:"HealthcareTaskResult",modelProperties:{results:{serializedName:"results",type:{name:"Composite",className:"HealthcareResult"}},errors:{serializedName:"errors",type:{name:"Sequence",element:{type:{name:"Composite",className:"TextAnalyticsError"}}}}}}},q={type:{name:"Composite",className:"HealthcareEntityProperties",modelProperties:{text:{serializedName:"text",required:!0,type:{name:"String"}},category:{serializedName:"category",required:!0,type:{name:"String"}},subcategory:{serializedName:"subcategory",type:{name:"String"}},offset:{serializedName:"offset",required:!0,type:{name:"Number"}},length:{serializedName:"length",required:!0,type:{name:"Number"}},confidenceScore:{serializedName:"confidenceScore",required:!0,type:{name:"Number"}}}}},H={type:{name:"Composite",className:"HealthcareLinkingProperties",modelProperties:{assertion:{serializedName:"assertion",type:{name:"Composite",className:"HealthcareAssertion"}},name:{serializedName:"name",type:{name:"String"}},links:{serializedName:"links",type:{name:"Sequence",element:{type:{name:"Composite",className:"HealthcareEntityLink"}}}}}}},F={type:{name:"Composite",className:"LanguageBatchInput",modelProperties:{documents:{serializedName:"documents",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DetectLanguageInput"}}}}}}},V={type:{name:"Composite",className:"LanguageResult",modelProperties:{documents:{serializedName:"documents",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DocumentLanguage"}}}},errors:{serializedName:"errors",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DocumentError"}}}},statistics:{serializedName:"statistics",type:{name:"Composite",className:"TextDocumentBatchStatistics"}},modelVersion:{serializedName:"modelVersion",required:!0,type:{name:"String"}}}}},W={type:{name:"Composite",className:"AnalyzeBatchInput",modelProperties:Object.assign(Object.assign(Object.assign({},h.type.modelProperties),m.type.modelProperties),v.type.modelProperties)}},K={type:{name:"Composite",className:"AnalyzeJobMetadata",modelProperties:Object.assign(Object.assign({},w.type.modelProperties),E.type.modelProperties)}},G={type:{name:"Composite",className:"HealthcareJobState",modelProperties:Object.assign(Object.assign(Object.assign({},w.type.modelProperties),j.type.modelProperties),$.type.modelProperties)}},Y={type:{name:"Composite",className:"AnalyzeJobState",modelProperties:Object.assign(Object.assign(Object.assign(Object.assign({},K.type.modelProperties),_.type.modelProperties),B.type.modelProperties),$.type.modelProperties)}},J={type:{name:"Composite",className:"TasksStateTasksEntityRecognitionTasksItem",modelProperties:Object.assign(Object.assign({},R.type.modelProperties),P.type.modelProperties)}},Q={type:{name:"Composite",className:"TasksStateTasksEntityRecognitionPiiTasksItem",modelProperties:Object.assign(Object.assign({},R.type.modelProperties),I.type.modelProperties)}},X={type:{name:"Composite",className:"TasksStateTasksKeyPhraseExtractionTasksItem",modelProperties:Object.assign(Object.assign({},R.type.modelProperties),C.type.modelProperties)}},Z={type:{name:"Composite",className:"TasksStateTasksEntityLinkingTasksItem",modelProperties:Object.assign(Object.assign({},R.type.modelProperties),L.type.modelProperties)}},ee={type:{name:"Composite",className:"TasksStateTasksSentimentAnalysisTasksItem",modelProperties:Object.assign(Object.assign({},R.type.modelProperties),z.type.modelProperties)}},te={type:{name:"Composite",className:"HealthcareEntity",modelProperties:Object.assign(Object.assign({},q.type.modelProperties),H.type.modelProperties)}},re={type:{name:"Composite",className:"GeneratedClientAnalyzeHeaders",modelProperties:{operationLocation:{serializedName:"operation-location",type:{name:"String"}}}}},ne={type:{name:"Composite",className:"GeneratedClientCancelHealthJobHeaders",modelProperties:{operationLocation:{serializedName:"operation-location",type:{name:"String"}}}}},oe={type:{name:"Composite",className:"GeneratedClientHealthHeaders",modelProperties:{operationLocation:{serializedName:"operation-location",type:{name:"String"}}}}};var se=Object.freeze({__proto__:null,JobDescriptor:h,AnalysisInput:m,MultiLanguageBatchInput:g,TextDocumentInput:{type:{name:"Composite",className:"TextDocumentInput",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},text:{serializedName:"text",required:!0,type:{name:"String"}},language:{serializedName:"language",type:{name:"String"}}}}},JobManifest:v,JobManifestTasks:{type:{name:"Composite",className:"JobManifestTasks",modelProperties:{entityRecognitionTasks:{serializedName:"entityRecognitionTasks",type:{name:"Sequence",element:{type:{name:"Composite",className:"EntitiesTask"}}}},entityRecognitionPiiTasks:{serializedName:"entityRecognitionPiiTasks",type:{name:"Sequence",element:{type:{name:"Composite",className:"PiiTask"}}}},keyPhraseExtractionTasks:{serializedName:"keyPhraseExtractionTasks",type:{name:"Sequence",element:{type:{name:"Composite",className:"KeyPhrasesTask"}}}},entityLinkingTasks:{serializedName:"entityLinkingTasks",type:{name:"Sequence",element:{type:{name:"Composite",className:"EntityLinkingTask"}}}},sentimentAnalysisTasks:{serializedName:"sentimentAnalysisTasks",type:{name:"Sequence",element:{type:{name:"Composite",className:"SentimentAnalysisTask"}}}}}}},EntitiesTask:{type:{name:"Composite",className:"EntitiesTask",modelProperties:{parameters:{serializedName:"parameters",type:{name:"Composite",className:"EntitiesTaskParameters"}}}}},EntitiesTaskParameters:{type:{name:"Composite",className:"EntitiesTaskParameters",modelProperties:{modelVersion:{defaultValue:"latest",serializedName:"model-version",type:{name:"String"}},loggingOptOut:{serializedName:"loggingOptOut",type:{name:"Boolean"}},stringIndexType:{serializedName:"stringIndexType",type:{name:"String"}}}}},PiiTask:{type:{name:"Composite",className:"PiiTask",modelProperties:{parameters:{serializedName:"parameters",type:{name:"Composite",className:"PiiTaskParameters"}}}}},PiiTaskParameters:{type:{name:"Composite",className:"PiiTaskParameters",modelProperties:{domain:{defaultValue:"none",serializedName:"domain",type:{name:"String"}},modelVersion:{defaultValue:"latest",serializedName:"model-version",type:{name:"String"}},loggingOptOut:{defaultValue:!0,serializedName:"loggingOptOut",type:{name:"Boolean"}},piiCategories:{constraints:{UniqueItems:!0},serializedName:"piiCategories",type:{name:"Sequence",element:{type:{name:"String"}}}},stringIndexType:{serializedName:"stringIndexType",type:{name:"String"}}}}},KeyPhrasesTask:{type:{name:"Composite",className:"KeyPhrasesTask",modelProperties:{parameters:{serializedName:"parameters",type:{name:"Composite",className:"KeyPhrasesTaskParameters"}}}}},KeyPhrasesTaskParameters:{type:{name:"Composite",className:"KeyPhrasesTaskParameters",modelProperties:{modelVersion:{defaultValue:"latest",serializedName:"model-version",type:{name:"String"}},loggingOptOut:{serializedName:"loggingOptOut",type:{name:"Boolean"}}}}},EntityLinkingTask:{type:{name:"Composite",className:"EntityLinkingTask",modelProperties:{parameters:{serializedName:"parameters",type:{name:"Composite",className:"EntityLinkingTaskParameters"}}}}},EntityLinkingTaskParameters:{type:{name:"Composite",className:"EntityLinkingTaskParameters",modelProperties:{modelVersion:{defaultValue:"latest",serializedName:"model-version",type:{name:"String"}},loggingOptOut:{serializedName:"loggingOptOut",type:{name:"Boolean"}},stringIndexType:{serializedName:"stringIndexType",type:{name:"String"}}}}},SentimentAnalysisTask:{type:{name:"Composite",className:"SentimentAnalysisTask",modelProperties:{parameters:{serializedName:"parameters",type:{name:"Composite",className:"SentimentAnalysisTaskParameters"}}}}},SentimentAnalysisTaskParameters:{type:{name:"Composite",className:"SentimentAnalysisTaskParameters",modelProperties:{modelVersion:{defaultValue:"latest",serializedName:"model-version",type:{name:"String"}},loggingOptOut:{serializedName:"loggingOptOut",type:{name:"Boolean"}},opinionMining:{serializedName:"opinionMining",type:{name:"Boolean"}},stringIndexType:{serializedName:"stringIndexType",type:{name:"String"}}}}},ErrorResponse:S,TextAnalyticsError:{type:{name:"Composite",className:"TextAnalyticsError",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},target:{serializedName:"target",type:{name:"String"}},innererror:{serializedName:"innererror",type:{name:"Composite",className:"InnerError"}},details:{serializedName:"details",type:{name:"Sequence",element:{type:{name:"Composite",className:"TextAnalyticsError"}}}}}}},InnerError:{type:{name:"Composite",className:"InnerError",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},details:{serializedName:"details",type:{name:"Dictionary",value:{type:{name:"String"}}}},target:{serializedName:"target",type:{name:"String"}},innererror:{serializedName:"innererror",type:{name:"Composite",className:"InnerError"}}}}},JobMetadata:w,AnalyzeJobDisplayName:E,TasksState:_,TasksStateTasks:{type:{name:"Composite",className:"TasksStateTasks",modelProperties:{completed:{serializedName:"completed",required:!0,type:{name:"Number"}},failed:{serializedName:"failed",required:!0,type:{name:"Number"}},inProgress:{serializedName:"inProgress",required:!0,type:{name:"Number"}},total:{serializedName:"total",required:!0,type:{name:"Number"}},entityRecognitionTasks:{serializedName:"entityRecognitionTasks",type:{name:"Sequence",element:{type:{name:"Composite",className:"TasksStateTasksEntityRecognitionTasksItem"}}}},entityRecognitionPiiTasks:{serializedName:"entityRecognitionPiiTasks",type:{name:"Sequence",element:{type:{name:"Composite",className:"TasksStateTasksEntityRecognitionPiiTasksItem"}}}},keyPhraseExtractionTasks:{serializedName:"keyPhraseExtractionTasks",type:{name:"Sequence",element:{type:{name:"Composite",className:"TasksStateTasksKeyPhraseExtractionTasksItem"}}}},entityLinkingTasks:{serializedName:"entityLinkingTasks",type:{name:"Sequence",element:{type:{name:"Composite",className:"TasksStateTasksEntityLinkingTasksItem"}}}},sentimentAnalysisTasks:{serializedName:"sentimentAnalysisTasks",type:{name:"Sequence",element:{type:{name:"Composite",className:"TasksStateTasksSentimentAnalysisTasksItem"}}}}}}},TaskState:R,EntitiesTaskResult:P,EntitiesResult:O,DocumentEntities:{type:{name:"Composite",className:"DocumentEntities",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},entities:{serializedName:"entities",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"Entity"}}}},warnings:{serializedName:"warnings",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"TextAnalyticsWarning"}}}},statistics:{serializedName:"statistics",type:{name:"Composite",className:"TextDocumentStatistics"}}}}},Entity:{type:{name:"Composite",className:"Entity",modelProperties:{text:{serializedName:"text",required:!0,type:{name:"String"}},category:{serializedName:"category",required:!0,type:{name:"String"}},subCategory:{serializedName:"subcategory",type:{name:"String"}},offset:{serializedName:"offset",required:!0,type:{name:"Number"}},length:{serializedName:"length",required:!0,type:{name:"Number"}},confidenceScore:{serializedName:"confidenceScore",required:!0,type:{name:"Number"}}}}},TextAnalyticsWarning:{type:{name:"Composite",className:"TextAnalyticsWarning",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}}}}},TextDocumentStatistics:{type:{name:"Composite",className:"TextDocumentStatistics",modelProperties:{characterCount:{serializedName:"charactersCount",required:!0,type:{name:"Number"}},transactionCount:{serializedName:"transactionsCount",required:!0,type:{name:"Number"}}}}},DocumentError:{type:{name:"Composite",className:"DocumentError",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},error:{serializedName:"error",type:{name:"Composite",className:"TextAnalyticsError"}}}}},TextDocumentBatchStatistics:{type:{name:"Composite",className:"TextDocumentBatchStatistics",modelProperties:{documentCount:{serializedName:"documentsCount",required:!0,type:{name:"Number"}},validDocumentCount:{serializedName:"validDocumentsCount",required:!0,type:{name:"Number"}},erroneousDocumentCount:{serializedName:"erroneousDocumentsCount",required:!0,type:{name:"Number"}},transactionCount:{serializedName:"transactionsCount",required:!0,type:{name:"Number"}}}}},PiiTaskResult:I,PiiResult:N,PiiDocumentEntities:{type:{name:"Composite",className:"PiiDocumentEntities",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},redactedText:{serializedName:"redactedText",required:!0,type:{name:"String"}},entities:{serializedName:"entities",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"Entity"}}}},warnings:{serializedName:"warnings",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"TextAnalyticsWarning"}}}},statistics:{serializedName:"statistics",type:{name:"Composite",className:"TextDocumentStatistics"}}}}},KeyPhraseTaskResult:C,KeyPhraseResult:x,DocumentKeyPhrases:{type:{name:"Composite",className:"DocumentKeyPhrases",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},keyPhrases:{serializedName:"keyPhrases",required:!0,type:{name:"Sequence",element:{type:{name:"String"}}}},warnings:{serializedName:"warnings",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"TextAnalyticsWarning"}}}},statistics:{serializedName:"statistics",type:{name:"Composite",className:"TextDocumentStatistics"}}}}},EntityLinkingTaskResult:L,EntityLinkingResult:D,DocumentLinkedEntities:{type:{name:"Composite",className:"DocumentLinkedEntities",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},entities:{serializedName:"entities",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"LinkedEntity"}}}},warnings:{serializedName:"warnings",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"TextAnalyticsWarning"}}}},statistics:{serializedName:"statistics",type:{name:"Composite",className:"TextDocumentStatistics"}}}}},LinkedEntity:{type:{name:"Composite",className:"LinkedEntity",modelProperties:{name:{serializedName:"name",required:!0,type:{name:"String"}},matches:{serializedName:"matches",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"Match"}}}},language:{serializedName:"language",required:!0,type:{name:"String"}},dataSourceEntityId:{serializedName:"id",type:{name:"String"}},url:{serializedName:"url",required:!0,type:{name:"String"}},dataSource:{serializedName:"dataSource",required:!0,type:{name:"String"}},bingEntitySearchApiId:{serializedName:"bingId",type:{name:"String"}}}}},Match:{type:{name:"Composite",className:"Match",modelProperties:{confidenceScore:{serializedName:"confidenceScore",required:!0,type:{name:"Number"}},text:{serializedName:"text",required:!0,type:{name:"String"}},offset:{serializedName:"offset",required:!0,type:{name:"Number"}},length:{serializedName:"length",required:!0,type:{name:"Number"}}}}},SentimentTaskResult:z,SentimentResponse:M,DocumentSentiment:{type:{name:"Composite",className:"DocumentSentiment",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},sentiment:{serializedName:"sentiment",required:!0,type:{name:"Enum",allowedValues:["positive","neutral","negative","mixed"]}},statistics:{serializedName:"statistics",type:{name:"Composite",className:"TextDocumentStatistics"}},confidenceScores:{serializedName:"confidenceScores",type:{name:"Composite",className:"SentimentConfidenceScores"}},sentenceSentiments:{serializedName:"sentences",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"SentenceSentiment"}}}},warnings:{serializedName:"warnings",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"TextAnalyticsWarning"}}}}}}},SentimentConfidenceScores:{type:{name:"Composite",className:"SentimentConfidenceScores",modelProperties:{positive:{serializedName:"positive",required:!0,type:{name:"Number"}},neutral:{serializedName:"neutral",required:!0,type:{name:"Number"}},negative:{serializedName:"negative",required:!0,type:{name:"Number"}}}}},SentenceSentiment:{type:{name:"Composite",className:"SentenceSentiment",modelProperties:{text:{serializedName:"text",required:!0,type:{name:"String"}},sentiment:{serializedName:"sentiment",required:!0,type:{name:"Enum",allowedValues:["positive","neutral","negative"]}},confidenceScores:{serializedName:"confidenceScores",type:{name:"Composite",className:"SentimentConfidenceScores"}},offset:{serializedName:"offset",required:!0,type:{name:"Number"}},length:{serializedName:"length",required:!0,type:{name:"Number"}},targets:{serializedName:"targets",type:{name:"Sequence",element:{type:{name:"Composite",className:"SentenceTarget"}}}},assessments:{serializedName:"assessments",type:{name:"Sequence",element:{type:{name:"Composite",className:"SentenceAssessment"}}}}}}},SentenceTarget:{type:{name:"Composite",className:"SentenceTarget",modelProperties:{sentiment:{serializedName:"sentiment",required:!0,type:{name:"Enum",allowedValues:["positive","mixed","negative"]}},confidenceScores:{serializedName:"confidenceScores",type:{name:"Composite",className:"TargetConfidenceScoreLabel"}},offset:{serializedName:"offset",required:!0,type:{name:"Number"}},length:{serializedName:"length",required:!0,type:{name:"Number"}},text:{serializedName:"text",required:!0,type:{name:"String"}},relations:{serializedName:"relations",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"TargetRelation"}}}}}}},TargetConfidenceScoreLabel:{type:{name:"Composite",className:"TargetConfidenceScoreLabel",modelProperties:{positive:{serializedName:"positive",required:!0,type:{name:"Number"}},negative:{serializedName:"negative",required:!0,type:{name:"Number"}}}}},TargetRelation:{type:{name:"Composite",className:"TargetRelation",modelProperties:{relationType:{serializedName:"relationType",required:!0,type:{name:"Enum",allowedValues:["assessment","target"]}},ref:{serializedName:"ref",required:!0,type:{name:"String"}}}}},SentenceAssessment:{type:{name:"Composite",className:"SentenceAssessment",modelProperties:{sentiment:{serializedName:"sentiment",required:!0,type:{name:"Enum",allowedValues:["positive","mixed","negative"]}},confidenceScores:{serializedName:"confidenceScores",type:{name:"Composite",className:"TargetConfidenceScoreLabel"}},offset:{serializedName:"offset",required:!0,type:{name:"Number"}},length:{serializedName:"length",required:!0,type:{name:"Number"}},text:{serializedName:"text",required:!0,type:{name:"String"}},isNegated:{serializedName:"isNegated",required:!0,type:{name:"Boolean"}}}}},AnalyzeJobErrorsAndStatistics:B,Pagination:$,HealthcareTaskResult:j,HealthcareResult:{type:{name:"Composite",className:"HealthcareResult",modelProperties:{documents:{serializedName:"documents",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DocumentHealthcareEntities"}}}},errors:{serializedName:"errors",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"DocumentError"}}}},statistics:{serializedName:"statistics",type:{name:"Composite",className:"TextDocumentBatchStatistics"}},modelVersion:{serializedName:"modelVersion",required:!0,type:{name:"String"}}}}},DocumentHealthcareEntities:{type:{name:"Composite",className:"DocumentHealthcareEntities",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},entities:{serializedName:"entities",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"HealthcareEntity"}}}},relations:{serializedName:"relations",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"HealthcareRelation"}}}},warnings:{serializedName:"warnings",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"TextAnalyticsWarning"}}}},statistics:{serializedName:"statistics",type:{name:"Composite",className:"TextDocumentStatistics"}}}}},HealthcareEntityProperties:q,HealthcareLinkingProperties:H,HealthcareAssertion:{type:{name:"Composite",className:"HealthcareAssertion",modelProperties:{conditionality:{serializedName:"conditionality",type:{name:"Enum",allowedValues:["hypothetical","conditional"]}},certainty:{serializedName:"certainty",type:{name:"Enum",allowedValues:["positive","positivePossible","neutralPossible","negativePossible","negative"]}},association:{serializedName:"association",type:{name:"Enum",allowedValues:["subject","other"]}}}}},HealthcareEntityLink:{type:{name:"Composite",className:"HealthcareEntityLink",modelProperties:{dataSource:{serializedName:"dataSource",required:!0,type:{name:"String"}},id:{serializedName:"id",required:!0,type:{name:"String"}}}}},HealthcareRelation:{type:{name:"Composite",className:"HealthcareRelation",modelProperties:{relationType:{serializedName:"relationType",required:!0,type:{name:"String"}},entities:{serializedName:"entities",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"HealthcareRelationEntity"}}}}}}},HealthcareRelationEntity:{type:{name:"Composite",className:"HealthcareRelationEntity",modelProperties:{ref:{serializedName:"ref",required:!0,type:{name:"String"}},role:{serializedName:"role",required:!0,type:{name:"String"}}}}},LanguageBatchInput:F,DetectLanguageInput:{type:{name:"Composite",className:"DetectLanguageInput",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},text:{serializedName:"text",required:!0,type:{name:"String"}},countryHint:{serializedName:"countryHint",type:{name:"String"}}}}},LanguageResult:V,DocumentLanguage:{type:{name:"Composite",className:"DocumentLanguage",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},detectedLanguage:{serializedName:"detectedLanguage",type:{name:"Composite",className:"DetectedLanguage"}},warnings:{serializedName:"warnings",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"TextAnalyticsWarning"}}}},statistics:{serializedName:"statistics",type:{name:"Composite",className:"TextDocumentStatistics"}}}}},DetectedLanguage:{type:{name:"Composite",className:"DetectedLanguage",modelProperties:{name:{serializedName:"name",required:!0,type:{name:"String"}},iso6391Name:{serializedName:"iso6391Name",required:!0,type:{name:"String"}},confidenceScore:{serializedName:"confidenceScore",required:!0,type:{name:"Number"}}}}},AnalyzeBatchInput:W,AnalyzeJobMetadata:K,HealthcareJobState:G,AnalyzeJobState:Y,TasksStateTasksEntityRecognitionTasksItem:J,TasksStateTasksEntityRecognitionPiiTasksItem:Q,TasksStateTasksKeyPhraseExtractionTasksItem:X,TasksStateTasksEntityLinkingTasksItem:Z,TasksStateTasksSentimentAnalysisTasksItem:ee,HealthcareEntity:te,GeneratedClientAnalyzeHeaders:re,GeneratedClientCancelHealthJobHeaders:ne,GeneratedClientHealthHeaders:oe});const ie={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},ae={parameterPath:["options","body"],mapper:W},ce={parameterPath:"accept",mapper:{defaultValue:"application/json, text/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},le={parameterPath:"endpoint",mapper:{serializedName:"Endpoint",required:!0,type:{name:"String"}},skipEncoding:!0},ue={parameterPath:"apiVersion",mapper:{defaultValue:"v3.1",isConstant:!0,serializedName:"ApiVersion",type:{name:"String"}},skipEncoding:!0},pe={parameterPath:["options","includeStatistics"],mapper:{serializedName:"showStats",type:{name:"Boolean"}}},de={parameterPath:["options","top"],mapper:{defaultValue:20,constraints:{InclusiveMaximum:50,InclusiveMinimum:1},serializedName:"$top",type:{name:"Number"}}},fe={parameterPath:["options","skip"],mapper:{constraints:{InclusiveMinimum:0},serializedName:"$skip",type:{name:"Number"}}},he={parameterPath:"jobId",mapper:{serializedName:"jobId",required:!0,type:{name:"Uuid"}}},me={parameterPath:"input",mapper:g},ye={parameterPath:["options","modelVersion"],mapper:{serializedName:"model-version",type:{name:"String"}}},ge={parameterPath:["options","stringIndexType"],mapper:{serializedName:"stringIndexType",type:{name:"String"}}},be={parameterPath:["options","loggingOptOut"],mapper:{serializedName:"loggingOptOut",type:{name:"Boolean"}}},ve={parameterPath:"input",mapper:F};class GeneratedClientContext extends a.ServiceClient{constructor(e,t){if(void 0===e)throw new Error("'endpoint' cannot be null");t||(t={});const r="azsdk-js-ai-text-analytics/5.1.0",s=t.userAgentOptions&&t.userAgentOptions.userAgentPrefix?`${t.userAgentOptions.userAgentPrefix} ${r}`:`${r}`;super(Object.assign(Object.assign(Object.assign({},{requestContentType:"application/json; charset=utf-8"}),t),{userAgentOptions:{userAgentPrefix:s},baseUri:t.endpoint||"{Endpoint}/text/analytics/{ApiVersion}"})),this.endpoint=e,this.apiVersion=t.apiVersion||"v3.1"}}class GeneratedClient extends GeneratedClientContext{constructor(e,t){super(e,t)}analyze(e){return this.sendOperationRequest({options:e},we)}analyzeStatus(e,t){return this.sendOperationRequest({jobId:e,options:t},Ee)}healthStatus(e,t){return this.sendOperationRequest({jobId:e,options:t},_e)}cancelHealthJob(e,t){return this.sendOperationRequest({jobId:e,options:t},Re)}health(e,t){return this.sendOperationRequest({input:e,options:t},Pe)}entitiesRecognitionGeneral(e,t){return this.sendOperationRequest({input:e,options:t},Oe)}entitiesRecognitionPii(e,t){return this.sendOperationRequest({input:e,options:t},Ie)}entitiesLinking(e,t){return this.sendOperationRequest({input:e,options:t},Ae)}keyPhrases(e,t){return this.sendOperationRequest({input:e,options:t},Te)}languages(e,t){return this.sendOperationRequest({input:e,options:t},Ne)}sentiment(e,t){return this.sendOperationRequest({input:e,options:t},Ce)}}const Se=a.createSerializer(se,!1),we={path:"/analyze",httpMethod:"POST",responses:{202:{headersMapper:re},default:{bodyMapper:S}},requestBody:ae,urlParameters:[le,ue],headerParameters:[ie,ce],mediaType:"json",serializer:Se},Ee={path:"/analyze/jobs/{jobId}",httpMethod:"GET",responses:{200:{bodyMapper:Y},default:{bodyMapper:S}},queryParameters:[pe,de,fe],urlParameters:[le,ue,{parameterPath:"jobId",mapper:{serializedName:"jobId",required:!0,type:{name:"String"}}}],headerParameters:[ce],serializer:Se},_e={path:"/entities/health/jobs/{jobId}",httpMethod:"GET",responses:{200:{bodyMapper:G},default:{bodyMapper:S}},queryParameters:[pe,de,fe],urlParameters:[le,ue,he],headerParameters:[ce],serializer:Se},Re={path:"/entities/health/jobs/{jobId}",httpMethod:"DELETE",responses:{202:{headersMapper:ne},default:{bodyMapper:S}},urlParameters:[le,ue,he],headerParameters:[ce],serializer:Se},Pe={path:"/entities/health/jobs",httpMethod:"POST",responses:{202:{headersMapper:oe},default:{bodyMapper:S}},requestBody:me,queryParameters:[ye,ge,be],urlParameters:[le,ue],headerParameters:[ie,ce],mediaType:"json",serializer:Se},Oe={path:"/entities/recognition/general",httpMethod:"POST",responses:{200:{bodyMapper:O},default:{bodyMapper:S}},requestBody:me,queryParameters:[pe,ye,ge,be],urlParameters:[le,ue],headerParameters:[ie,ce],mediaType:"json",serializer:Se},Ie={path:"/entities/recognition/pii",httpMethod:"POST",responses:{200:{bodyMapper:N},default:{bodyMapper:S}},requestBody:me,queryParameters:[pe,ye,ge,be,{parameterPath:["options","domain"],mapper:{serializedName:"domain",type:{name:"String"}}},{parameterPath:["options","piiCategories"],mapper:{constraints:{UniqueItems:!0},serializedName:"piiCategories",type:{name:"Sequence",element:{type:{name:"String"}}}},collectionFormat:"CSV"}],urlParameters:[le,ue],headerParameters:[ie,ce],mediaType:"json",serializer:Se},Ae={path:"/entities/linking",httpMethod:"POST",responses:{200:{bodyMapper:D},default:{bodyMapper:S}},requestBody:me,queryParameters:[pe,ye,ge,be],urlParameters:[le,ue],headerParameters:[ie,ce],mediaType:"json",serializer:Se},Te={path:"/keyPhrases",httpMethod:"POST",responses:{200:{bodyMapper:x},default:{bodyMapper:S}},requestBody:me,queryParameters:[pe,ye,be],urlParameters:[le,ue],headerParameters:[ie,ce],mediaType:"json",serializer:Se},Ne={path:"/languages",httpMethod:"POST",responses:{200:{bodyMapper:V},default:{bodyMapper:S}},requestBody:ve,queryParameters:[pe,ye,be],urlParameters:[le,ue],headerParameters:[ie,ce],mediaType:"json",serializer:Se},Ce={path:"/sentiment",httpMethod:"POST",responses:{200:{bodyMapper:M},default:{bodyMapper:S}},requestBody:me,queryParameters:[pe,ye,ge,be,{parameterPath:["options","opinionMining"],mapper:{serializedName:"opinionMining",type:{name:"Boolean"}}}],urlParameters:[le,ue],headerParameters:[ie,ce],mediaType:"json",serializer:Se},xe=c.createClientLogger("ai-text-analytics");function parseHealthcareEntityIndex(e){const t=new RegExp(/#\/results\/documents\/(\d+)\/entities\/(\d+)/).exec(e);if(null!==t)return parseInt(t[2]);throw new Error(`Pointer "${e}" is not a valid healthcare entity pointer`)}const ke="Utf16CodeUnit";function setStrEncodingParam(e){return Object.assign(Object.assign({},e),{stringIndexType:e.stringIndexType||ke})}function setStrEncodingParamValue(e){return e||ke}function setOpinionMining(e){return Object.assign(Object.assign({},e),{opinionMining:e.includeOpinionMining})}function setCategoriesFilter(e){return Object.assign(Object.assign({},e),{piiCategories:e.categoriesFilter})}function addParamsToTask(e){const{actionName:t}=e;return{parameters:r.__rest(e,["actionName"]),taskName:t}}function nextLinkToTopAndSkip(e){const t=new u.URL(e),r=new u.URLSearchParams(t.searchParams);let s,a;if(!r.has("$top"))throw new Error(`nextLink URL does not have the $top param: ${e}`);if(s=parseInt(r.get("$top")),!r.has("$skip"))throw new Error(`nextLink URL does not have the $skip param: ${e}`);return a=parseInt(r.get("$skip")),{skip:a,top:s}}function getOperationId(e){const t=e.lastIndexOf("/");return e.substring(t+1)}function handleInvalidDocumentBatch(e){var t,r,a,c,u,p,d,h;const m=e,g=null===(c=null===(a=null===(r=null===(t=m.response)||void 0===t?void 0:t.parsedBody)||void 0===r?void 0:r.error)||void 0===a?void 0:a.innererror)||void 0===c?void 0:c.code,v=null===(h=null===(d=null===(p=null===(u=m.response)||void 0===u?void 0:u.parsedBody)||void 0===p?void 0:p.error)||void 0===d?void 0:d.innererror)||void 0===h?void 0:h.message;return v?"InvalidDocumentBatch"===g?new s.RestError(v,{code:g,statusCode:m.statusCode}):e:(xe.warning(`The error coming from the service does not follow the expected structure: ${e}`),e)}function delay(e){return new Promise((t=>setTimeout((()=>t()),e)))}function compose(e,t){return r=>t(e(r))}function intoTextAnalyticsError(e){return void 0!==e.innererror?intoTextAnalyticsError(e.innererror):{code:e.code,message:e.message,target:e.target}}function makeTextAnalyticsSuccessResult(e,t,r){return{id:e,statistics:r,warnings:t}}function makeTextAnalyticsErrorResult(e,t){return{id:e,error:intoTextAnalyticsError(t)}}function processAndCombineSuccessfulAndErroneousDocuments(e,t,r,s){const a=t.documents.map(r).concat(t.errors.map((e=>s(e.id,e.error))));return function(e,t){const r=new Map;for(const e of t)r.set(e.id,e);if(t.length!==e.length){const r=t.length>e.length?"more":"fewer";xe.warning(`The service returned ${r} responses than inputs. Some errors may be treated as fatal.`)}const s=[];for(const t of e){const e=r.get(t.id);e&&s.push(e)}return s}(e,a)}function combineSuccessfulAndErroneousDocumentsWithStatisticsAndModelVersion(e,t,r,s){const a=processAndCombineSuccessfulAndErroneousDocuments(e,t,r,s);return Object.assign(a,{statistics:t.statistics,modelVersion:t.modelVersion})}function makeDetectLanguageResult(e){const{id:t,warnings:r,statistics:s,detectedLanguage:a}=e;return Object.assign(Object.assign({},makeTextAnalyticsSuccessResult(t,r,s)),{primaryLanguage:a})}function makeDetectLanguageErrorResult(e,t){return makeTextAnalyticsErrorResult(e,t)}function makeRecognizeCategorizedEntitiesResult(e){const{entities:t,statistics:r,warnings:s,id:a}=e;return Object.assign(Object.assign({},makeTextAnalyticsSuccessResult(a,s,r)),{entities:t})}function makeRecognizeCategorizedEntitiesErrorResult(e,t){return makeTextAnalyticsErrorResult(e,t)}function makeRecognizeCategorizedEntitiesResultArray(e,t){return combineSuccessfulAndErroneousDocumentsWithStatisticsAndModelVersion(e,t,makeRecognizeCategorizedEntitiesResult,makeRecognizeCategorizedEntitiesErrorResult)}function makeAnalyzeSentimentResult(e){const{id:t,sentiment:r,confidenceScores:s,sentenceSentiments:a,warnings:c,statistics:u}=e;return Object.assign(Object.assign({},makeTextAnalyticsSuccessResult(t,c,u)),{sentiment:r,confidenceScores:s,sentences:a.map((t=>function(e,t){return{confidenceScores:e.confidenceScores,sentiment:e.sentiment,text:e.text,offset:e.offset,length:e.length,opinions:e.targets?e.targets.map((e=>({target:{confidenceScores:e.confidenceScores,sentiment:e.sentiment,text:e.text,offset:e.offset,length:e.length},assessments:e.relations.filter((e=>"assessment"===e.relationType)).map((e=>function(e,t){var r,s;const a=e.ref,c=function(e){const t=new RegExp(/#\/documents\/(\d+)\/sentences\/(\d+)\/assessments\/(\d+)/).exec(e);if(null!==t)return{document:parseInt(t[1]),sentence:parseInt(t[2]),assessment:parseInt(t[3])};throw new Error(`Pointer "${e}" is not a valid Assessment pointer`)}(a),u=null===(s=null===(r=t.sentenceSentiments)||void 0===r?void 0:r[c.sentence].assessments)||void 0===s?void 0:s[c.assessment];if(void 0!==u)return u;throw new Error(`Pointer "${a}" is not a valid Assessment pointer`)}(e,t)))}))):[]}}(t,e)))})}function makeAnalyzeSentimentErrorResult(e,t){return makeTextAnalyticsErrorResult(e,t)}function makeAnalyzeSentimentResultArray(e,t){return combineSuccessfulAndErroneousDocumentsWithStatisticsAndModelVersion(e,t,makeAnalyzeSentimentResult,makeAnalyzeSentimentErrorResult)}function makeExtractKeyPhrasesResult(e){const{id:t,warnings:r,statistics:s,keyPhrases:a}=e;return Object.assign(Object.assign({},makeTextAnalyticsSuccessResult(t,r,s)),{keyPhrases:a})}function makeExtractKeyPhrasesErrorResult(e,t){return makeTextAnalyticsErrorResult(e,t)}function makeExtractKeyPhrasesResultArray(e,t){return combineSuccessfulAndErroneousDocumentsWithStatisticsAndModelVersion(e,t,makeExtractKeyPhrasesResult,makeExtractKeyPhrasesErrorResult)}function makeRecognizePiiEntitiesResult(e){const{id:t,entities:r,warnings:s,statistics:a,redactedText:c}=e;return Object.assign(Object.assign({},makeTextAnalyticsSuccessResult(t,s,a)),{entities:r,redactedText:c})}function makeRecognizePiiEntitiesErrorResult(e,t){return makeTextAnalyticsErrorResult(e,t)}function makeRecognizePiiEntitiesResultArray(e,t){return combineSuccessfulAndErroneousDocumentsWithStatisticsAndModelVersion(e,t,makeRecognizePiiEntitiesResult,makeRecognizePiiEntitiesErrorResult)}function makeRecognizeLinkedEntitiesResult(e){const{statistics:t,id:r,warnings:s,entities:a}=e;return Object.assign(Object.assign({},makeTextAnalyticsSuccessResult(r,s,t)),{entities:a})}function makeRecognizeLinkedEntitiesErrorResult(e,t){return makeTextAnalyticsErrorResult(e,t)}function makeRecognizeLinkedEntitiesResultArray(e,t){return combineSuccessfulAndErroneousDocumentsWithStatisticsAndModelVersion(e,t,makeRecognizeLinkedEntitiesResult,makeRecognizeLinkedEntitiesErrorResult)}const Le=p.createSpanFunction({packagePrefix:"Azure.CognitiveServices.TextAnalytics",namespace:"Microsoft.CognitiveServices"});class AnalysisPoller extends d.Poller{constructor(){super(...arguments),this.updateIntervalInMs=2e3}async delay(){return delay(this.updateIntervalInMs)}}class AnalysisPollOperation{constructor(e){this.state=e}toString(){return JSON.stringify({state:this.state})}}function makeHealthcareEntitiesWithoutNeighbors(e){var t;const{category:r,confidenceScore:s,assertion:a,offset:c,text:u,links:p,subcategory:d,length:h,name:m}=e;return{category:r,confidenceScore:s,assertion:a,offset:c,length:h,text:u,normalizedText:m,subCategory:d,dataSources:null!==(t=null==p?void 0:p.map((({dataSource:e,id:t})=>({name:e,entityId:t}))))&&void 0!==t?t:[]}}function makeHealthcareRelations(e,t){return t.map((t=>({relationType:t.relationType,roles:t.entities.map((t=>({entity:e[parseHealthcareEntityIndex(t.ref)],name:t.role})))})))}function makeHealthcareEntitiesResult(e){const{id:t,entities:r,relations:s,warnings:a,statistics:c}=e,u=r.map(makeHealthcareEntitiesWithoutNeighbors);return Object.assign(Object.assign({},makeTextAnalyticsSuccessResult(t,a,c)),{entities:u,entityRelations:makeHealthcareRelations(u,s)})}function makeHealthcareEntitiesErrorResult(e,t){return makeTextAnalyticsErrorResult(e,t)}function getMetaInfoFromResponse(e){return{createdOn:e.createdDateTime,lastModifiedOn:e.lastUpdateDateTime,expiresOn:e.expirationDateTime,status:e.status}}class BeginAnalyzeHealthcarePollerOperation extends AnalysisPollOperation{constructor(e,t,r,s={}){super(e),this.state=e,this.client=t,this.documents=r,this.options=s}listHealthcareEntitiesByPage(e,t={}){const r=this._listHealthcareEntities(e,t);return{next:()=>r.next(),[Symbol.asyncIterator](){return this},byPage:r=>{const s=Object.assign(Object.assign({},t),{top:null==r?void 0:r.maxPageSize});return this._listHealthcareEntitiesPaged(e,s)}}}_listHealthcareEntities(e,t){return r.__asyncGenerator(this,arguments,(function*(){var s,a;try{for(var c,u=r.__asyncValues(this._listHealthcareEntitiesPaged(e,t));!(c=yield r.__await(u.next())).done;){const e=c.value;yield r.__await(yield*r.__asyncDelegator(r.__asyncValues(e)))}}catch(e){s={error:e}}finally{try{c&&!c.done&&(a=u.return)&&(yield r.__await(a.call(u)))}finally{if(s)throw s.error}}}))}_listHealthcareEntitiesPaged(e,t){return r.__asyncGenerator(this,arguments,(function*(){let s=yield r.__await(this._listHealthcareEntitiesSinglePage(e,t));for(yield yield r.__await(s.result);s.skip;){const a=Object.assign(Object.assign({},t),{top:s.top,skip:s.skip});s=yield r.__await(this._listHealthcareEntitiesSinglePage(e,a)),yield yield r.__await(s.result)}}))}async _listHealthcareEntitiesSinglePage(e,t){const{span:r,updatedOptions:s}=Le("TextAnalyticsClient-_listHealthcareEntitiesSinglePage",t||{});try{const t=await this.client.healthStatus(e,s);if(t.results){const e=processAndCombineSuccessfulAndErroneousDocuments(this.documents,t.results,makeHealthcareEntitiesResult,makeHealthcareEntitiesErrorResult);return t.nextLink?Object.assign({result:e},nextLinkToTopAndSkip(t.nextLink)):{result:e}}throw new Error("Healthcare action has succeeded but the there are no results!")}catch(e){throw r.setStatus({code:p.SpanStatusCode.ERROR,message:e.message}),e}finally{r.end()}}async getHealthStatus(e,t){var r;const{span:s,updatedOptions:a}=Le("TextAnalyticsClient-getHealthStatus",t||{});try{const t=await this.client.healthStatus(e,a);switch(t.status){case"notStarted":case"running":break;case"failed":{const e=`Healthcare analysis failed. Error(s): ${(null===(r=t.errors)||void 0===r?void 0:r.map((e=>`  code ${e.code}, message: '${e.message}'`)).join("\n"))||""}`;throw new Error(e)}default:if(t.results)return{done:!0,statistics:t.results.statistics,modelVersion:t.results.modelVersion,operationMetdata:getMetaInfoFromResponse(t)};throw new Error("Healthcare action has finished but the there are no results!")}return{done:!1,operationMetdata:getMetaInfoFromResponse(t)}}catch(e){throw s.setStatus({code:p.SpanStatusCode.ERROR,message:e.message}),e}finally{s.end()}}async beginAnalyzeHealthcare(e,t){const{span:r,updatedOptions:s}=Le("TextAnalyticsClient-beginAnalyzeHealthcare",function(e){return Object.assign(Object.assign({},e),{stringIndexType:e.stringIndexType||ke})}(t||{}));try{return await this.client.health({documents:e},s)}catch(e){const t=handleInvalidDocumentBatch(e);throw r.setStatus({code:p.SpanStatusCode.ERROR,message:t.message}),t}finally{r.end()}}async update(e={}){const t=this.state,r=e.abortSignal;if(!t.isStarted){t.isStarted=!0;const s=await this.beginAnalyzeHealthcare(this.documents,{requestOptions:this.options.requestOptions,tracingOptions:this.options.tracingOptions,abortSignal:r||e.abortSignal,modelVersion:this.options.modelVersion,stringIndexType:this.options.stringIndexType,loggingOptOut:this.options.disableServiceLogs});if(!s.operationLocation)throw new Error("Expects a valid 'operationLocation' to retrieve health results but did not find any");t.operationId=getOperationId(s.operationLocation)}const s=await this.getHealthStatus(t.operationId,{abortSignal:r||e.abortSignal,includeStatistics:this.options.includeStatistics,tracingOptions:this.options.tracingOptions,onResponse:this.options.onResponse,serializerOptions:this.options.serializerOptions});if(t.createdOn=s.operationMetdata.createdOn,t.expiresOn=s.operationMetdata.expiresOn,t.lastModifiedOn=s.operationMetdata.lastModifiedOn,t.status=s.operationMetdata.status,!t.isCompleted&&s.done){const e=this.listHealthcareEntitiesByPage(t.operationId,{abortSignal:this.options.abortSignal,tracingOptions:this.options.tracingOptions});t.result=Object.assign(e,{statistics:s.statistics,modelVersion:s.modelVersion}),t.isCompleted=!0}return"function"==typeof e.fireProgress&&e.fireProgress(t),this}async cancel(){const e=this.state;return e.operationId&&await this.client.cancelHealthJob(e.operationId,{abortSignal:this.options.abortSignal,tracingOptions:this.options.tracingOptions}),e.isCancelled=!0,this}}class BeginAnalyzeHealthcarePoller extends AnalysisPoller{constructor(e){const{client:t,documents:r,options:s,updateIntervalInMs:a=5e3,resumeFrom:c}=e;let u;c&&(u=JSON.parse(c).state);super(new BeginAnalyzeHealthcarePollerOperation(u||{},t,r,s)),this.updateIntervalInMs=a}delay(){return delay(this.updateIntervalInMs)}}function convertTaskTypeToActionType(e){switch(e){case"entityRecognitionTasks":return"RecognizeCategorizedEntities";case"entityRecognitionPiiTasks":return"RecognizePiiEntities";case"keyPhraseExtractionTasks":return"ExtractKeyPhrases";case"entityLinkingTasks":return"RecognizeLinkedEntities";case"sentimentAnalysisTasks":return"AnalyzeSentiment";default:throw new Error(`unexpected action type from the service: ${e}`)}}function parseActionError(e){if(e.target){const t=new RegExp(/#\/tasks\/(entityRecognitionTasks|entityRecognitionPiiTasks|keyPhraseExtractionTasks|entityLinkingTasks|sentimentAnalysisTasks)\/(\d+)/).exec(e.target);if(null!==t)return{code:e.code,message:e.message,index:parseInt(t[2]),type:convertTaskTypeToActionType(t[1])};throw new Error(`Pointer "${e.target}" is not a valid action pointer`)}throw new Error("expected an error with a target field referencing an action but did not get one")}function createErredAction(e,t){return{error:intoTextAnalyticsError(e),failedOn:t}}function makeActionResult(e,t,r,s){let a=0;return r.reduce((function(r,c){const{results:u,lastUpdateDateTime:p}=c;if(void 0!==u){const s=t(e,u);return[...r,{results:s,completedOn:p}]}return[...r,createErredAction(s[a++],p)]}),[])}function createAnalyzeActionsResult(e,t){var r,s,a,c,u,p;const d=[],h=[],m=[],g=[],v=[];return function(e,t,r,s,a,c){for(const u of e){const e=parseActionError(u);switch(e.type){case"RecognizeCategorizedEntities":t.push(e);break;case"RecognizePiiEntities":r.push(e);break;case"ExtractKeyPhrases":s.push(e);break;case"RecognizeLinkedEntities":a.push(e);break;case"AnalyzeSentiment":c.push(e)}}}(null!==(r=null==e?void 0:e.errors)&&void 0!==r?r:[],d,h,m,g,v),{recognizeEntitiesResults:makeActionResult(t,makeRecognizeCategorizedEntitiesResultArray,null!==(s=e.tasks.entityRecognitionTasks)&&void 0!==s?s:[],d),recognizePiiEntitiesResults:makeActionResult(t,makeRecognizePiiEntitiesResultArray,null!==(a=e.tasks.entityRecognitionPiiTasks)&&void 0!==a?a:[],h),extractKeyPhrasesResults:makeActionResult(t,makeExtractKeyPhrasesResultArray,null!==(c=e.tasks.keyPhraseExtractionTasks)&&void 0!==c?c:[],m),recognizeLinkedEntitiesResults:makeActionResult(t,makeRecognizeLinkedEntitiesResultArray,null!==(u=e.tasks.entityLinkingTasks)&&void 0!==u?u:[],g),analyzeSentimentResults:makeActionResult(t,makeAnalyzeSentimentResultArray,null!==(p=e.tasks.sentimentAnalysisTasks)&&void 0!==p?p:[],v)}}function getMetaInfoFromResponse$1(e){return{createdOn:e.createdDateTime,lastModifiedOn:e.lastUpdateDateTime,expiresOn:e.expirationDateTime,status:e.status,actionsSucceededCount:e.tasks.completed,actionsFailedCount:e.tasks.failed,actionsInProgressCount:e.tasks.inProgress,displayName:e.displayName}}class BeginAnalyzeActionsPollerOperation extends AnalysisPollOperation{constructor(e,t,r,s,a={}){super(e),this.state=e,this.client=t,this.documents=r,this.actions=s,this.options=a}listAnalyzeActionsResults(e,t={}){const r=this._listAnalyzeActionsResultsPaged(e,t);return{next:()=>r.next(),[Symbol.asyncIterator](){return this},byPage:r=>{const s=Object.assign(Object.assign({},t),{top:null==r?void 0:r.maxPageSize});return this._listAnalyzeActionsResultsPaged(e,s)}}}_listAnalyzeActionsResultsPaged(e,t){return r.__asyncGenerator(this,arguments,(function*(){let s=yield r.__await(this._listAnalyzeActionsResultsSinglePage(e,t));for(yield yield r.__await(s.result);s.skip;){const a=Object.assign(Object.assign({},t),{top:s.top,skip:s.skip});s=yield r.__await(this._listAnalyzeActionsResultsSinglePage(e,a)),yield yield r.__await(s.result)}}))}async _listAnalyzeActionsResultsSinglePage(e,t){const{span:r,updatedOptions:s}=Le("TextAnalyticsClient-_listAnalyzeActionsResultsSinglePage",t||{});try{const t=await this.client.analyzeStatus(e,s),r=createAnalyzeActionsResult(t,this.documents);return t.nextLink?Object.assign({result:r},nextLinkToTopAndSkip(t.nextLink)):{result:r}}catch(e){throw r.setStatus({code:p.SpanStatusCode.ERROR,message:e.message}),e}finally{r.end()}}async getAnalyzeActionsOperationStatus(e,t){const{span:r,updatedOptions:s}=Le("TextAnalyticsClient-getAnalyzeActionsOperationStatus",t||{});try{const t=await this.client.analyzeStatus(e,s);switch(t.status){case"notStarted":case"running":break;default:return{done:!0,statistics:t.statistics,operationMetdata:getMetaInfoFromResponse$1(t)}}return{done:!1,operationMetdata:getMetaInfoFromResponse$1(t)}}catch(e){throw r.setStatus({code:p.SpanStatusCode.ERROR,message:e.message}),e}finally{r.end()}}async beginAnalyzeActions(e,t,r){const{span:s,updatedOptions:a}=Le("TextAnalyticsClient-beginAnalyze",r||{});try{return await this.client.analyze(Object.assign({body:{analysisInput:{documents:e},tasks:t,displayName:null==r?void 0:r.displayName}},a))}catch(e){const t=handleInvalidDocumentBatch(e);throw s.setStatus({code:p.SpanStatusCode.ERROR,message:t.message}),t}finally{s.end()}}async update(e={}){var t;const r=this.state,s=e.abortSignal;if(!r.isStarted){r.isStarted=!0;const e=await this.beginAnalyzeActions(this.documents,this.actions,{displayName:this.options.displayName,tracingOptions:this.options.tracingOptions,requestOptions:this.options.requestOptions,abortSignal:s||this.options.abortSignal});if(!e.operationLocation)throw new Error("Expects a valid 'operationLocation' to retrieve analyze results but did not find any");r.operationId=getOperationId(e.operationLocation)}const a=await this.getAnalyzeActionsOperationStatus(r.operationId,{abortSignal:s||e.abortSignal,includeStatistics:this.options.includeStatistics,tracingOptions:this.options.tracingOptions});if(r.createdOn=a.operationMetdata.createdOn,r.expiresOn=a.operationMetdata.expiresOn,r.lastModifiedOn=a.operationMetdata.lastModifiedOn,r.status=a.operationMetdata.status,r.actionsSucceededCount=a.operationMetdata.actionsSucceededCount,r.actionsFailedCount=a.operationMetdata.actionsFailedCount,r.actionsInProgressCount=a.operationMetdata.actionsInProgressCount,r.displayName=null===(t=a.operationMetdata)||void 0===t?void 0:t.displayName,!r.isCompleted&&a.done){const e=this.listAnalyzeActionsResults(r.operationId,{abortSignal:this.options.abortSignal,tracingOptions:this.options.tracingOptions,includeStatistics:this.options.includeStatistics,onResponse:this.options.onResponse,serializerOptions:this.options.serializerOptions});r.result=e,r.isCompleted=!0}return"function"==typeof e.fireProgress&&e.fireProgress(r),this}async cancel(){const e=this.state;return xe.warning("The service does not yet support cancellation for beginAnalyze."),e.isCancelled=!0,this}}class BeginAnalyzeActionsPoller extends AnalysisPoller{constructor(e){const{client:t,documents:r,actions:s,options:a,updateIntervalInMs:c=5e3,resumeFrom:u}=e;let p;u&&(p=JSON.parse(u).state);super(new BeginAnalyzeActionsPollerOperation(p||{},t,r,s,a)),this.updateIntervalInMs=c}delay(){return delay(this.updateIntervalInMs)}}(e.PiiEntityDomain||(e.PiiEntityDomain={})).PROTECTED_HEALTH_INFORMATION="PHI";function isStringArray(e){return"string"==typeof e[0]}function convertToTextDocumentInput(e,t){return e.map(((e,r)=>({id:String(r),language:t,text:e})))}Object.defineProperty(e,"AzureKeyCredential",{enumerable:!0,get:function(){return t.AzureKeyCredential}}),e.TextAnalyticsClient=class{constructor(e,a,c={}){this.endpointUrl=e;const{defaultCountryHint:u="us",defaultLanguage:p="en"}=c,d=r.__rest(c,["defaultCountryHint","defaultLanguage"]);this.defaultCountryHint=u,this.defaultLanguage=p;const h="azsdk-js-ai-textanalytics/5.1.0";d.userAgentOptions||(d.userAgentOptions={}),d.userAgentOptions.userAgentPrefix?d.userAgentOptions.userAgentPrefix=`${d.userAgentOptions.userAgentPrefix} ${h}`:d.userAgentOptions.userAgentPrefix=h;const m=Object.assign(Object.assign({},d),{loggingOptions:{logger:xe.info,additionalAllowedHeaderNames:["x-ms-correlation-request-id","x-ms-request-id"]}});this.client=new GeneratedClient(this.endpointUrl,m);const g=t.isTokenCredential(a)?s.bearerTokenAuthenticationPolicy({credential:a,scopes:"https://cognitiveservices.azure.com/.default"}):function(e){return{name:"textAnalyticsAzureKeyCredentialPolicy",sendRequest:(t,r)=>(t.headers.set("Ocp-Apim-Subscription-Key",e.key),r(t))}}(a);this.client.pipeline.addPolicy(g)}async detectLanguage(e,t,r){let s,a;if(!Array.isArray(e)||0===e.length)throw new Error("'documents' must be a non-empty array");if(isStringArray(e)){a=function(e,t){"none"===t&&(t="");return e.map(((e,r)=>({id:String(r),countryHint:t,text:e})))}(e,t||this.defaultCountryHint),s=r||{}}else a=e.map((e=>Object.assign(Object.assign({},e),{countryHint:"none"===e.countryHint?"":e.countryHint}))),s=t||{};const{span:c,updatedOptions:u}=Le("TextAnalyticsClient-detectLanguages",{abortSignal:(d=s).abortSignal,includeStatistics:d.includeStatistics,modelVersion:d.modelVersion,requestOptions:d.requestOptions,tracingOptions:d.tracingOptions,onResponse:d.onResponse,serializerOptions:d.serializerOptions,loggingOptOut:d.disableServiceLogs});var d;try{return function(e,t){return combineSuccessfulAndErroneousDocumentsWithStatisticsAndModelVersion(e,t,makeDetectLanguageResult,makeDetectLanguageErrorResult)}(a,await this.client.languages({documents:a},u))}catch(e){throw c.setStatus({code:p.SpanStatusCode.ERROR,message:e.message}),e}finally{c.end()}}async recognizeEntities(e,t,r){let s,a;if(!Array.isArray(e)||0===e.length)throw new Error("'documents' must be a non-empty array");if(isStringArray(e)){a=convertToTextDocumentInput(e,t||this.defaultLanguage),s=r||{}}else a=e,s=t||{};const{span:c,updatedOptions:u}=Le("TextAnalyticsClient-recognizeEntities",{abortSignal:(d=s).abortSignal,includeStatistics:d.includeStatistics,modelVersion:d.modelVersion,requestOptions:d.requestOptions,stringIndexType:setStrEncodingParamValue(d.stringIndexType),tracingOptions:d.tracingOptions,onResponse:d.onResponse,serializerOptions:d.serializerOptions,loggingOptOut:d.disableServiceLogs});var d;try{return makeRecognizeCategorizedEntitiesResultArray(a,await this.client.entitiesRecognitionGeneral({documents:a},u))}catch(e){const t=handleInvalidDocumentBatch(e);throw c.setStatus({code:p.SpanStatusCode.ERROR,message:t.message}),t}finally{c.end()}}async analyzeSentiment(e,t,r){let s,a;if(!Array.isArray(e)||0===e.length)throw new Error("'documents' must be a non-empty array");if(isStringArray(e)){a=convertToTextDocumentInput(e,t||this.defaultLanguage),s=r||{}}else a=e,s=t||{};const{span:c,updatedOptions:u}=Le("TextAnalyticsClient-analyzeSentiment",{abortSignal:(d=s).abortSignal,opinionMining:d.includeOpinionMining,includeStatistics:d.includeStatistics,modelVersion:d.modelVersion,requestOptions:d.requestOptions,stringIndexType:setStrEncodingParamValue(d.stringIndexType),tracingOptions:d.tracingOptions,onResponse:d.onResponse,serializerOptions:d.serializerOptions,loggingOptOut:d.disableServiceLogs});var d;try{return makeAnalyzeSentimentResultArray(a,await this.client.sentiment({documents:a},u))}catch(e){throw c.setStatus({code:p.SpanStatusCode.ERROR,message:e.message}),e}finally{c.end()}}async extractKeyPhrases(e,t,r){let s,a;if(!Array.isArray(e)||0===e.length)throw new Error("'documents' must be a non-empty array");if(isStringArray(e)){a=convertToTextDocumentInput(e,t||this.defaultLanguage),s=r||{}}else a=e,s=t||{};const{span:c,updatedOptions:u}=Le("TextAnalyticsClient-extractKeyPhrases",{abortSignal:(d=s).abortSignal,includeStatistics:d.includeStatistics,modelVersion:d.modelVersion,requestOptions:d.requestOptions,tracingOptions:d.tracingOptions,onResponse:d.onResponse,serializerOptions:d.serializerOptions,loggingOptOut:d.disableServiceLogs});var d;try{return makeExtractKeyPhrasesResultArray(a,await this.client.keyPhrases({documents:a},u))}catch(e){throw c.setStatus({code:p.SpanStatusCode.ERROR,message:e.message}),e}finally{c.end()}}async recognizePiiEntities(e,t,r){let s,a;if(isStringArray(e)){a=convertToTextDocumentInput(e,t||this.defaultLanguage),s=r||{}}else a=e,s=t||{};const{span:c,updatedOptions:u}=Le("TextAnalyticsClient-recognizePiiEntities",{abortSignal:(d=s).abortSignal,domain:d.domainFilter,includeStatistics:d.includeStatistics,modelVersion:d.modelVersion,requestOptions:d.requestOptions,stringIndexType:setStrEncodingParamValue(d.stringIndexType),tracingOptions:d.tracingOptions,piiCategories:d.categoriesFilter,onResponse:d.onResponse,serializerOptions:d.serializerOptions,loggingOptOut:d.disableServiceLogs});var d;try{return makeRecognizePiiEntitiesResultArray(a,await this.client.entitiesRecognitionPii({documents:a},u))}catch(e){throw c.setStatus({code:p.SpanStatusCode.ERROR,message:e.message}),e}finally{c.end()}}async recognizeLinkedEntities(e,t,r){let s,a;if(!Array.isArray(e)||0===e.length)throw new Error("'documents' must be a non-empty array");if(isStringArray(e)){a=convertToTextDocumentInput(e,t||this.defaultLanguage),s=r||{}}else a=e,s=t||{};const{span:c,updatedOptions:u}=Le("TextAnalyticsClient-recognizeLinkedEntities",{abortSignal:(d=s).abortSignal,includeStatistics:d.includeStatistics,modelVersion:d.modelVersion,requestOptions:d.requestOptions,tracingOptions:d.tracingOptions,onResponse:d.onResponse,serializerOptions:d.serializerOptions,loggingOptOut:d.disableServiceLogs,stringIndexType:setStrEncodingParamValue(d.stringIndexType)});var d;try{return makeRecognizeLinkedEntitiesResultArray(a,await this.client.entitiesLinking({documents:a},u))}catch(e){throw c.setStatus({code:p.SpanStatusCode.ERROR,message:e.message}),e}finally{c.end()}}async beginAnalyzeHealthcareEntities(e,t,s){let a,c;if(isStringArray(e)){c=convertToTextDocumentInput(e,t||this.defaultLanguage),a=s||{}}else c=e,a=t||{};const{updateIntervalInMs:u,resumeFrom:p}=a,d=r.__rest(a,["updateIntervalInMs","resumeFrom"]),h=new BeginAnalyzeHealthcarePoller({client:this.client,documents:c,options:d,updateIntervalInMs:u,resumeFrom:p});return await h.poll(),h}async beginAnalyzeActions(e,t,s,a){let c,u;if(!Array.isArray(e)||0===e.length)throw new Error("'documents' must be a non-empty array");if(isStringArray(e)){u=convertToTextDocumentInput(e,s||this.defaultLanguage),c=a||{}}else u=e,c=s||{};!function(e){function validateActionType(e,t){var r;if((null!==(r=null==e?void 0:e.length)&&void 0!==r?r:0)>1)throw new Error(`beginAnalyzeActions: Currently, the service can accept up to one action only for ${t} actions.`)}validateActionType(e.analyzeSentimentActions,"analyzeSentiment"),validateActionType(e.extractKeyPhrasesActions,"extractKeyPhrases"),validateActionType(e.recognizeEntitiesActions,"recognizeEntities"),validateActionType(e.recognizeLinkedEntitiesActions,"recognizeLinkedEntities"),validateActionType(e.recognizePiiEntitiesActions,"recognizePiiEntities")}(t);const p=function(e){var t,r,s,a,c;return{entityRecognitionPiiTasks:null===(t=e.recognizePiiEntitiesActions)||void 0===t?void 0:t.map(compose(setStrEncodingParam,compose(setCategoriesFilter,addParamsToTask))),entityRecognitionTasks:null===(r=e.recognizeEntitiesActions)||void 0===r?void 0:r.map(compose(setStrEncodingParam,addParamsToTask)),keyPhraseExtractionTasks:null===(s=e.extractKeyPhrasesActions)||void 0===s?void 0:s.map(addParamsToTask),entityLinkingTasks:null===(a=e.recognizeLinkedEntitiesActions)||void 0===a?void 0:a.map(compose(setStrEncodingParam,addParamsToTask)),sentimentAnalysisTasks:null===(c=e.analyzeSentimentActions)||void 0===c?void 0:c.map(compose(setStrEncodingParam,compose(setOpinionMining,addParamsToTask)))}}(t),{updateIntervalInMs:d,resumeFrom:h}=c,m=r.__rest(c,["updateIntervalInMs","resumeFrom"]),g=new BeginAnalyzeActionsPoller({client:this.client,documents:u,actions:p,options:m,resumeFrom:h,updateIntervalInMs:d});return await g.poll(),g}}}(ds);var Tc={exports:{}};const Nc=notImplemented("fs.access"),Cc=notImplemented("fs.copyFile"),xc=notImplemented("fs.cp"),kc=notImplemented("fs.open"),Lc=notImplemented("fs.opendir"),Dc=notImplemented("fs.rename"),zc=notImplemented("fs.truncate"),Mc=notImplemented("fs.rm"),Bc=notImplemented("fs.rmdir"),$c=notImplemented("fs.mkdir"),jc=notImplemented("fs.readdir"),qc=notImplemented("fs.readlink"),Uc=notImplemented("fs.symlink"),Hc=notImplemented("fs.lstat"),Fc=notImplemented("fs.stat"),Vc=notImplemented("fs.link"),Wc=notImplemented("fs.unlink"),Kc=notImplemented("fs.chmod"),Gc=notImplemented("fs.lchmod"),Yc=notImplemented("fs.lchown"),Jc=notImplemented("fs.chown"),Qc=notImplemented("fs.utimes"),Xc=notImplemented("fs.lutimes"),Zc=notImplemented("fs.realpath"),el=notImplemented("fs.mkdtemp"),tl=notImplemented("fs.writeFile"),rl=notImplemented("fs.appendFile"),nl=notImplemented("fs.readFile"),ol=notImplemented("fs.watch"),sl=notImplemented("fs.statfs"),il=notImplemented("fs.glob"),al=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4,EXTENSIONLESS_FORMAT_JAVASCRIPT:0,EXTENSIONLESS_FORMAT_WASM:1,F_OK:0,O_APPEND:1024,O_CREAT:64,O_DIRECT:16384,O_DIRECTORY:65536,O_DSYNC:4096,O_EXCL:128,O_NOATIME:262144,O_NOCTTY:256,O_NOFOLLOW:131072,O_NONBLOCK:2048,O_RDONLY:0,O_RDWR:2,O_SYNC:1052672,O_TRUNC:512,O_WRONLY:1,R_OK:4,S_IFBLK:24576,S_IFCHR:8192,S_IFDIR:16384,S_IFIFO:4096,S_IFLNK:40960,S_IFMT:61440,S_IFREG:32768,S_IFSOCK:49152,S_IRGRP:32,S_IROTH:4,S_IRUSR:256,S_IRWXG:56,S_IRWXO:7,S_IRWXU:448,S_IWGRP:16,S_IWOTH:2,S_IWUSR:128,S_IXGRP:8,S_IXOTH:1,S_IXUSR:64,UV_DIRENT_BLOCK:7,UV_DIRENT_CHAR:6,UV_DIRENT_DIR:2,UV_DIRENT_FIFO:4,UV_DIRENT_FILE:1,UV_DIRENT_LINK:3,UV_DIRENT_SOCKET:5,UV_DIRENT_UNKNOWN:0,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,UV_FS_O_FILEMAP:0,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,W_OK:2,X_OK:1},Symbol.toStringTag,{value:"Module"})),cl={constants:al,access:Nc,appendFile:rl,chmod:Kc,chown:Jc,copyFile:Cc,cp:xc,glob:il,lchmod:Gc,lchown:Yc,link:Vc,lstat:Hc,lutimes:Xc,mkdir:$c,mkdtemp:el,open:kc,opendir:Lc,readFile:nl,readdir:jc,readlink:qc,realpath:Zc,rename:Dc,rm:Mc,rmdir:Bc,stat:Fc,statfs:sl,symlink:Uc,truncate:zc,unlink:Wc,utimes:Qc,watch:ol,writeFile:tl},ll=notImplementedClass("fs.Dir"),ul=notImplementedClass("fs.Dirent"),pl=notImplementedClass("fs.Stats"),dl=notImplementedClass("fs.ReadStream"),fl=notImplementedClass("fs.WriteStream"),hl=dl,ml=fl;function callbackify(e){const fnc=function(...t){const r=t.pop();e().catch((e=>r(e))).then((e=>r(void 0,e)))};return fnc.__promisify__=e,fnc.native=fnc,fnc}const yl=callbackify(Nc),gl=callbackify(rl),bl=callbackify(Jc),vl=callbackify(Kc),Sl=callbackify(Cc),wl=callbackify(xc),El=callbackify(Yc),_l=callbackify(Gc),Rl=callbackify(Vc),Pl=callbackify(Hc),Ol=callbackify(Xc),Il=callbackify($c),Al=callbackify(el),Tl=callbackify(Zc),Nl=callbackify(kc),Cl=callbackify(Lc),xl=callbackify(jc),kl=callbackify(nl),Ll=callbackify(qc),Dl=callbackify(Dc),zl=callbackify(Mc),Ml=callbackify(Bc),Bl=callbackify(Fc),$l=callbackify(Uc),jl=callbackify(zc),ql=callbackify(Wc),Ul=callbackify(Qc),Hl=callbackify(tl),Fl=callbackify(sl),Vl=notImplementedAsync("fs.close"),Wl=notImplementedAsync("fs.createReadStream"),Kl=notImplementedAsync("fs.createWriteStream"),Gl=notImplementedAsync("fs.exists"),Yl=notImplementedAsync("fs.fchown"),Jl=notImplementedAsync("fs.fchmod"),Ql=notImplementedAsync("fs.fdatasync"),Xl=notImplementedAsync("fs.fstat"),Zl=notImplementedAsync("fs.fsync"),eu=notImplementedAsync("fs.ftruncate"),tu=notImplementedAsync("fs.futimes"),ru=notImplementedAsync("fs.lstatSync"),nu=notImplementedAsync("fs.read"),ou=notImplementedAsync("fs.readv"),su=notImplementedAsync("fs.realpathSync"),iu=notImplementedAsync("fs.statSync"),au=notImplementedAsync("fs.unwatchFile"),cu=notImplementedAsync("fs.watch"),lu=notImplementedAsync("fs.watchFile"),uu=notImplementedAsync("fs.write"),pu=notImplementedAsync("fs.writev"),du=notImplementedAsync("fs._toUnixTimestamp"),fu=notImplementedAsync("fs.openAsBlob"),hu=notImplementedAsync("fs.glob"),mu=notImplemented("fs.appendFileSync"),yu=notImplemented("fs.accessSync"),gu=notImplemented("fs.chownSync"),bu=notImplemented("fs.chmodSync"),vu=notImplemented("fs.closeSync"),Su=notImplemented("fs.copyFileSync"),wu=notImplemented("fs.cpSync"),existsSync=()=>!1,Eu=notImplemented("fs.fchownSync"),_u=notImplemented("fs.fchmodSync"),Ru=notImplemented("fs.fdatasyncSync"),Pu=notImplemented("fs.fstatSync"),Ou=notImplemented("fs.fsyncSync"),Iu=notImplemented("fs.ftruncateSync"),Au=notImplemented("fs.futimesSync"),Tu=notImplemented("fs.lchownSync"),Nu=notImplemented("fs.lchmodSync"),Cu=notImplemented("fs.linkSync"),xu=notImplemented("fs.lutimesSync"),ku=notImplemented("fs.mkdirSync"),Lu=notImplemented("fs.mkdtempSync"),Du=notImplemented("fs.openSync"),zu=notImplemented("fs.opendirSync"),Mu=notImplemented("fs.readdirSync"),Bu=notImplemented("fs.readSync"),$u=notImplemented("fs.readvSync"),ju=notImplemented("fs.readFileSync"),qu=notImplemented("fs.readlinkSync"),Uu=notImplemented("fs.renameSync"),Hu=notImplemented("fs.rmSync"),Fu=notImplemented("fs.rmdirSync"),Vu=notImplemented("fs.symlinkSync"),Wu=notImplemented("fs.truncateSync"),Ku=notImplemented("fs.unlinkSync"),Gu=notImplemented("fs.utimesSync"),Yu=notImplemented("fs.writeFileSync"),Ju=notImplemented("fs.writeSync"),Qu=notImplemented("fs.writevSync"),Xu=notImplemented("fs.statfsSync"),Zu=notImplemented("fs.globSync"),ep={F_OK:0,R_OK:4,W_OK:2,X_OK:1,constants:al,promises:cl,Dir:ll,Dirent:ul,FileReadStream:hl,FileWriteStream:ml,ReadStream:dl,Stats:pl,WriteStream:fl,_toUnixTimestamp:du,access:yl,accessSync:yu,appendFile:gl,appendFileSync:mu,chmod:vl,chmodSync:bu,chown:bl,chownSync:gu,close:Vl,closeSync:vu,copyFile:Sl,copyFileSync:Su,cp:wl,cpSync:wu,createReadStream:Wl,createWriteStream:Kl,exists:Gl,existsSync:existsSync,fchmod:Jl,fchmodSync:_u,fchown:Yl,fchownSync:Eu,fdatasync:Ql,fdatasyncSync:Ru,fstat:Xl,fstatSync:Pu,fsync:Zl,fsyncSync:Ou,ftruncate:eu,ftruncateSync:Iu,futimes:tu,futimesSync:Au,glob:hu,lchmod:_l,globSync:Zu,lchmodSync:Nu,lchown:El,lchownSync:Tu,link:Rl,linkSync:Cu,lstat:Pl,lstatSync:ru,lutimes:Ol,lutimesSync:xu,mkdir:Il,mkdirSync:ku,mkdtemp:Al,mkdtempSync:Lu,open:Nl,openAsBlob:fu,openSync:Du,opendir:Cl,opendirSync:zu,read:nu,readFile:kl,readFileSync:ju,readSync:Bu,readdir:xl,readdirSync:Mu,readlink:Ll,readlinkSync:qu,readv:ou,readvSync:$u,realpath:Tl,realpathSync:su,rename:Dl,renameSync:Uu,rm:zl,rmSync:Hu,rmdir:Ml,rmdirSync:Fu,stat:Bl,statSync:iu,statfs:Fl,statfsSync:Xu,symlink:$l,symlinkSync:Vu,truncate:jl,truncateSync:Wu,unlink:ql,unlinkSync:Ku,unwatchFile:au,utimes:Ul,utimesSync:Gu,watch:cu,watchFile:lu,write:uu,writeFile:Hl,writeFileSync:Yu,writeSync:Ju,writev:pu,writevSync:Qu},tp=getDefaultExportFromNamespaceIfNotNamed(Object.freeze(Object.defineProperty({__proto__:null,Dir:ll,Dirent:ul,F_OK:0,FileReadStream:hl,FileWriteStream:ml,R_OK:4,ReadStream:dl,Stats:pl,W_OK:2,WriteStream:fl,X_OK:1,_toUnixTimestamp:du,access:yl,accessSync:yu,appendFile:gl,appendFileSync:mu,chmod:vl,chmodSync:bu,chown:bl,chownSync:gu,close:Vl,closeSync:vu,constants:al,copyFile:Sl,copyFileSync:Su,cp:wl,cpSync:wu,createReadStream:Wl,createWriteStream:Kl,default:ep,exists:Gl,existsSync:existsSync,fchmod:Jl,fchmodSync:_u,fchown:Yl,fchownSync:Eu,fdatasync:Ql,fdatasyncSync:Ru,fstat:Xl,fstatSync:Pu,fsync:Zl,fsyncSync:Ou,ftruncate:eu,ftruncateSync:Iu,futimes:tu,futimesSync:Au,glob:hu,globSync:Zu,lchmod:_l,lchmodSync:Nu,lchown:El,lchownSync:Tu,link:Rl,linkSync:Cu,lstat:Pl,lstatSync:ru,lutimes:Ol,lutimesSync:xu,mkdir:Il,mkdirSync:ku,mkdtemp:Al,mkdtempSync:Lu,open:Nl,openAsBlob:fu,openSync:Du,opendir:Cl,opendirSync:zu,promises:cl,read:nu,readFile:kl,readFileSync:ju,readSync:Bu,readdir:xl,readdirSync:Mu,readlink:Ll,readlinkSync:qu,readv:ou,readvSync:$u,realpath:Tl,realpathSync:su,rename:Dl,renameSync:Uu,rm:zl,rmSync:Hu,rmdir:Ml,rmdirSync:Fu,stat:Bl,statSync:iu,statfs:Fl,statfsSync:Xu,symlink:$l,symlinkSync:Vu,truncate:jl,truncateSync:Wu,unlink:ql,unlinkSync:Ku,unwatchFile:au,utimes:Ul,utimesSync:Gu,watch:cu,watchFile:lu,write:uu,writeFile:Hl,writeFileSync:Yu,writeSync:Ju,writev:pu,writevSync:Qu},Symbol.toStringTag,{value:"Module"}))),rp=getDefaultExportFromNamespaceIfNotNamed(oo),np={UV_UDP_REUSEADDR:4,dlopen:{RTLD_LAZY:1,RTLD_NOW:2,RTLD_GLOBAL:256,RTLD_LOCAL:0,RTLD_DEEPBIND:8},errno:{E2BIG:7,EACCES:13,EADDRINUSE:98,EADDRNOTAVAIL:99,EAFNOSUPPORT:97,EAGAIN:11,EALREADY:114,EBADF:9,EBADMSG:74,EBUSY:16,ECANCELED:125,ECHILD:10,ECONNABORTED:103,ECONNREFUSED:111,ECONNRESET:104,EDEADLK:35,EDESTADDRREQ:89,EDOM:33,EDQUOT:122,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:113,EIDRM:43,EILSEQ:84,EINPROGRESS:115,EINTR:4,EINVAL:22,EIO:5,EISCONN:106,EISDIR:21,ELOOP:40,EMFILE:24,EMLINK:31,EMSGSIZE:90,EMULTIHOP:72,ENAMETOOLONG:36,ENETDOWN:100,ENETRESET:102,ENETUNREACH:101,ENFILE:23,ENOBUFS:105,ENODATA:61,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:37,ENOLINK:67,ENOMEM:12,ENOMSG:42,ENOPROTOOPT:92,ENOSPC:28,ENOSR:63,ENOSTR:60,ENOSYS:38,ENOTCONN:107,ENOTDIR:20,ENOTEMPTY:39,ENOTSOCK:88,ENOTSUP:95,ENOTTY:25,ENXIO:6,EOPNOTSUPP:95,EOVERFLOW:75,EPERM:1,EPIPE:32,EPROTO:71,EPROTONOSUPPORT:93,EPROTOTYPE:91,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:116,ETIME:62,ETIMEDOUT:110,ETXTBSY:26,EWOULDBLOCK:11,EXDEV:18},signals:{SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:7,SIGFPE:8,SIGKILL:9,SIGUSR1:10,SIGSEGV:11,SIGUSR2:12,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:17,SIGSTKFLT:16,SIGCONT:18,SIGSTOP:19,SIGTSTP:20,SIGTTIN:21,SIGTTOU:22,SIGURG:23,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:29,SIGPOLL:29,SIGPWR:30,SIGSYS:31},priority:{PRIORITY_LOW:19,PRIORITY_BELOW_NORMAL:10,PRIORITY_NORMAL:0,PRIORITY_ABOVE_NORMAL:-7,PRIORITY_HIGH:-14,PRIORITY_HIGHEST:-20}},availableParallelism=()=>8,arch=()=>"",machine=()=>"",endianness=()=>"LE",cpus=()=>{const e={model:"",speed:0,times:{user:0,nice:0,sys:0,idle:0,irq:0}};return Array.from({length:8},(()=>e))},getPriority=()=>0,op=notImplemented("os.setPriority"),homedir=()=>"/",tmpdir=()=>"/tmp",sp="/dev/null",freemem=()=>0,totalmem=()=>0,loadavg=()=>[0,0,0],uptime=()=>0,hostname=()=>"",networkInterfaces=()=>({lo0:[{address:"127.0.0.1",netmask:"255.0.0.0",family:"IPv4",mac:"00:00:00:00:00:00",internal:!0,cidr:"127.0.0.1/8"},{address:"::1",netmask:"ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff",family:"IPv6",mac:"00:00:00:00:00:00",internal:!0,cidr:"::1/128",scopeid:0},{address:"fe80::1",netmask:"ffff:ffff:ffff:ffff::",family:"IPv6",mac:"00:00:00:00:00:00",internal:!0,cidr:"fe80::1/64",scopeid:1}]}),platform=()=>"linux",type=()=>"Linux",release=()=>"",version$2=()=>"",userInfo=e=>{const encode=t=>{if(e?.encoding){const r=Zt.from(t);return"buffer"===e.encoding?r:r.toString(e.encoding)}return t};return{gid:1e3,uid:1e3,homedir:encode("/"),shell:encode("/bin/sh"),username:encode("root")}},ip={arch:arch,availableParallelism:availableParallelism,constants:np,cpus:cpus,EOL:"\n",endianness:endianness,devNull:sp,freemem:freemem,getPriority:getPriority,homedir:homedir,hostname:hostname,loadavg:loadavg,machine:machine,networkInterfaces:networkInterfaces,platform:platform,release:release,setPriority:op,tmpdir:tmpdir,totalmem:totalmem,type:type,uptime:uptime,userInfo:userInfo,version:version$2},ap=getDefaultExportFromNamespaceIfNotNamed(Object.freeze(Object.defineProperty({__proto__:null,EOL:"\n",arch:arch,availableParallelism:availableParallelism,constants:np,cpus:cpus,default:ip,devNull:sp,endianness:endianness,freemem:freemem,getPriority:getPriority,homedir:homedir,hostname:hostname,loadavg:loadavg,machine:machine,networkInterfaces:networkInterfaces,platform:platform,release:release,setPriority:op,tmpdir:tmpdir,totalmem:totalmem,type:type,uptime:uptime,userInfo:userInfo,version:version$2},Symbol.toStringTag,{value:"Module"}))),cp=globalThis.crypto?.subtle,randomUUID=()=>globalThis.crypto?.randomUUID(),getRandomValues=e=>globalThis.crypto?.getRandomValues(e),lp=new Proxy(globalThis.crypto,{get:(e,t)=>"CryptoKey"===t?globalThis.CryptoKey:"function"==typeof globalThis.crypto[t]?globalThis.crypto[t].bind(globalThis.crypto):globalThis.crypto[t]}),randomBytes=(e,t)=>{const r=Zt.alloc(e,0,void 0);for(let t=0;t<e;t+=65536)getRandomValues(Uint8Array.prototype.subarray.call(r,t,t+65536));if("function"!=typeof t)return r;t(null,r)},up=randomBytes,pp=randomBytes,dp=!1,fp=notImplemented("crypto.checkPrime"),hp=notImplemented("crypto.checkPrimeSync"),mp=notImplemented("crypto.createCipher"),yp=notImplemented("crypto.createDecipher"),gp=notImplemented("crypto.pseudoRandomBytes"),bp=notImplemented("crypto.createCipheriv"),vp=notImplemented("crypto.createDecipheriv"),Sp=notImplemented("crypto.createDiffieHellman"),wp=notImplemented("crypto.createDiffieHellmanGroup"),Ep=notImplemented("crypto.createECDH"),_p=notImplemented("crypto.createHash"),Rp=notImplemented("crypto.createHmac"),Pp=notImplemented("crypto.createPrivateKey"),Op=notImplemented("crypto.createPublicKey"),Ip=notImplemented("crypto.createSecretKey"),Ap=notImplemented("crypto.createSign"),Tp=notImplemented("crypto.createVerify"),Np=notImplemented("crypto.diffieHellman"),Cp=notImplemented("crypto.generatePrime"),xp=notImplemented("crypto.generatePrimeSync"),kp=notImplemented("crypto.getCiphers"),Lp=notImplemented("crypto.getCipherInfo"),Dp=notImplemented("crypto.getCurves"),zp=notImplemented("crypto.getDiffieHellman"),Mp=notImplemented("crypto.getHashes"),Bp=notImplemented("crypto.hkdf"),$p=notImplemented("crypto.hkdfSync"),jp=notImplemented("crypto.pbkdf2"),qp=notImplemented("crypto.pbkdf2Sync"),Up=notImplemented("crypto.generateKeyPair"),Hp=notImplemented("crypto.generateKeyPairSync"),Fp=notImplemented("crypto.generateKey"),Vp=notImplemented("crypto.generateKeySync"),Wp=notImplemented("crypto.privateDecrypt"),Kp=notImplemented("crypto.privateEncrypt"),Gp=notImplemented("crypto.publicDecrypt"),Yp=notImplemented("crypto.publicEncrypt"),Jp=notImplemented("crypto.randomFill"),Qp=notImplemented("crypto.randomFillSync"),Xp=notImplemented("crypto.randomInt"),Zp=notImplemented("crypto.scrypt"),ed=notImplemented("crypto.scryptSync"),td=notImplemented("crypto.sign"),rd=notImplemented("crypto.setEngine"),nd=notImplemented("crypto.timingSafeEqual"),od=notImplemented("crypto.getFips"),sd=notImplemented("crypto.setFips"),id=notImplemented("crypto.verify"),ad=notImplemented("crypto.secureHeapUsed"),cd=notImplemented("crypto.hash"),ld=notImplementedClass("crypto.Certificate"),ud=notImplementedClass("crypto.Cipher"),pd=notImplementedClass("crypto.Cipheriv"),dd=notImplementedClass("crypto.Decipher"),fd=notImplementedClass("crypto.Decipheriv"),hd=notImplementedClass("crypto.DiffieHellman"),md=notImplementedClass("crypto.DiffieHellmanGroup"),yd=notImplementedClass("crypto.ECDH"),gd=notImplementedClass("crypto.Hash"),bd=notImplementedClass("crypto.Hmac"),vd=notImplementedClass("crypto.KeyObject"),Sd=notImplementedClass("crypto.Sign"),wd=notImplementedClass("crypto.Verify"),Ed=notImplementedClass("crypto.X509Certificate"),_d={OPENSSL_VERSION_NUMBER:0,SSL_OP_ALL:2147485776,SSL_OP_ALLOW_NO_DHE_KEX:1024,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_ENCRYPT_THEN_MAC:524288,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_RENEGOTIATION:1073741824,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:0,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_NO_TLSv1_3:536870912,SSL_OP_PRIORITIZE_CHACHA:2097152,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_RSA:1,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_EC:2048,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,RSA_PKCS1_PADDING:1,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,RSA_PSS_SALTLEN_DIGEST:-1,RSA_PSS_SALTLEN_MAX_SIGN:-2,RSA_PSS_SALTLEN_AUTO:-2,defaultCoreCipherList:"",TLS1_VERSION:0,TLS1_1_VERSION:0,TLS1_2_VERSION:0,TLS1_3_VERSION:0,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6,defaultCipherList:""},Rd={constants:_d,getRandomValues:getRandomValues,randomUUID:randomUUID,subtle:cp,Certificate:ld,Cipher:ud,Cipheriv:pd,Decipher:dd,Decipheriv:fd,DiffieHellman:hd,DiffieHellmanGroup:md,ECDH:yd,Hash:gd,Hmac:bd,KeyObject:vd,Sign:Sd,Verify:wd,X509Certificate:Ed,checkPrime:fp,checkPrimeSync:hp,createCipheriv:bp,createDecipheriv:vp,createDiffieHellman:Sp,createDiffieHellmanGroup:wp,createECDH:Ep,createHash:_p,createHmac:Rp,createPrivateKey:Pp,createPublicKey:Op,createSecretKey:Ip,createSign:Ap,createVerify:Tp,diffieHellman:Np,fips:dp,generateKey:Fp,generateKeyPair:Up,generateKeyPairSync:Hp,generateKeySync:Vp,generatePrime:Cp,generatePrimeSync:xp,getCipherInfo:Lp,getCiphers:kp,getCurves:Dp,getDiffieHellman:zp,getFips:od,getHashes:Mp,hash:cd,hkdf:Bp,hkdfSync:$p,pbkdf2:jp,pbkdf2Sync:qp,privateDecrypt:Wp,privateEncrypt:Kp,pseudoRandomBytes:gp,publicDecrypt:Gp,prng:pp,publicEncrypt:Yp,randomBytes:randomBytes,randomFill:Jp,randomFillSync:Qp,randomInt:Xp,rng:up,scrypt:Zp,scryptSync:ed,secureHeapUsed:ad,setEngine:rd,setFips:sd,sign:td,timingSafeEqual:nd,verify:id,webcrypto:lp},Pd=Object.freeze(Object.defineProperty({__proto__:null,Certificate:ld,Cipher:ud,Cipheriv:pd,Decipher:dd,Decipheriv:fd,DiffieHellman:hd,DiffieHellmanGroup:md,ECDH:yd,Hash:gd,Hmac:bd,KeyObject:vd,Sign:Sd,Verify:wd,X509Certificate:Ed,checkPrime:fp,checkPrimeSync:hp,constants:_d,createCipher:mp,createCipheriv:bp,createDecipher:yp,createDecipheriv:vp,createDiffieHellman:Sp,createDiffieHellmanGroup:wp,createECDH:Ep,createHash:_p,createHmac:Rp,createPrivateKey:Pp,createPublicKey:Op,createSecretKey:Ip,createSign:Ap,createVerify:Tp,default:Rd,diffieHellman:Np,fips:dp,generateKey:Fp,generateKeyPair:Up,generateKeyPairSync:Hp,generateKeySync:Vp,generatePrime:Cp,generatePrimeSync:xp,getCipherInfo:Lp,getCiphers:kp,getCurves:Dp,getDiffieHellman:zp,getFips:od,getHashes:Mp,getRandomValues:getRandomValues,hash:cd,hkdf:Bp,hkdfSync:$p,pbkdf2:jp,pbkdf2Sync:qp,privateDecrypt:Wp,privateEncrypt:Kp,prng:pp,pseudoRandomBytes:gp,publicDecrypt:Gp,publicEncrypt:Yp,randomBytes:randomBytes,randomFill:Jp,randomFillSync:Qp,randomInt:Xp,randomUUID:randomUUID,rng:up,scrypt:Zp,scryptSync:ed,secureHeapUsed:ad,setEngine:rd,setFips:sd,sign:td,subtle:cp,timingSafeEqual:nd,verify:id,webcrypto:lp},Symbol.toStringTag,{value:"Module"}));const Od=tp,Id=rp,Ad=ap,Td=getDefaultExportFromNamespaceIfNotNamed(Pd),Nd={version:"16.5.0"}.version,Cd=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function _debug(e){console.log(`[dotenv@${Nd}][DEBUG] ${e}`)}function _dotenvKey(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:q.env.DOTENV_KEY&&q.env.DOTENV_KEY.length>0?q.env.DOTENV_KEY:""}function _instructions(e,t){let r;try{r=new URL(t)}catch(e){if("ERR_INVALID_URL"===e.code){const e=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw e.code="INVALID_DOTENV_KEY",e}throw e}const s=r.password;if(!s){const e=new Error("INVALID_DOTENV_KEY: Missing key part");throw e.code="INVALID_DOTENV_KEY",e}const a=r.searchParams.get("environment");if(!a){const e=new Error("INVALID_DOTENV_KEY: Missing environment part");throw e.code="INVALID_DOTENV_KEY",e}const c=`DOTENV_VAULT_${a.toUpperCase()}`,u=e.parsed[c];if(!u){const e=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${c} in your .env.vault file.`);throw e.code="NOT_FOUND_DOTENV_ENVIRONMENT",e}return{ciphertext:u,key:s}}function _vaultPath(e){let t=null;if(e&&e.path&&e.path.length>0)if(Array.isArray(e.path))for(const r of e.path)Od.existsSync(r)&&(t=r.endsWith(".vault")?r:`${r}.vault`);else t=e.path.endsWith(".vault")?e.path:`${e.path}.vault`;else t=Id.resolve(q.cwd(),".env.vault");return Od.existsSync(t)?t:null}function _resolveHome(e){return"~"===e[0]?Id.join(Ad.homedir(),e.slice(1)):e}const xd={configDotenv:function(e){const t=Id.resolve(q.cwd(),".env");let r="utf8";const s=Boolean(e&&e.debug);e&&e.encoding?r=e.encoding:s&&_debug("No encoding is specified. UTF-8 is used by default");let a,c=[t];if(e&&e.path)if(Array.isArray(e.path)){c=[];for(const t of e.path)c.push(_resolveHome(t))}else c=[_resolveHome(e.path)];const u={};for(const t of c)try{const s=xd.parse(Od.readFileSync(t,{encoding:r}));xd.populate(u,s,e)}catch(e){s&&_debug(`Failed to load ${t} ${e.message}`),a=e}let p=q.env;return e&&null!=e.processEnv&&(p=e.processEnv),xd.populate(p,u,e),a?{parsed:u,error:a}:{parsed:u}},_configVault:function(e){Boolean(e&&e.debug)&&_debug("Loading env from encrypted .env.vault");const t=xd._parseVault(e);let r=q.env;return e&&null!=e.processEnv&&(r=e.processEnv),xd.populate(r,t,e),{parsed:t}},_parseVault:function(e){const t=_vaultPath(e),r=xd.configDotenv({path:t});if(!r.parsed){const e=new Error(`MISSING_DATA: Cannot parse ${t} for an unknown reason`);throw e.code="MISSING_DATA",e}const s=_dotenvKey(e).split(","),a=s.length;let c;for(let e=0;e<a;e++)try{const t=_instructions(r,s[e].trim());c=xd.decrypt(t.ciphertext,t.key);break}catch(t){if(e+1>=a)throw t}return xd.parse(c)},config:function(e){if(0===_dotenvKey(e).length)return xd.configDotenv(e);const t=_vaultPath(e);return t?xd._configVault(e):(r=`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`,console.log(`[dotenv@${Nd}][WARN] ${r}`),xd.configDotenv(e));var r},decrypt:function(e,t){const r=Zt.from(t.slice(-64),"hex");let s=Zt.from(e,"base64");const a=s.subarray(0,12),c=s.subarray(-16);s=s.subarray(12,-16);try{const e=Td.createDecipheriv("aes-256-gcm",r,a);return e.setAuthTag(c),`${e.update(s)}${e.final()}`}catch(e){const t=e instanceof RangeError,r="Invalid key length"===e.message,s="Unsupported state or unable to authenticate data"===e.message;if(t||r){const e=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw e.code="INVALID_DOTENV_KEY",e}if(s){const e=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw e.code="DECRYPTION_FAILED",e}throw e}},parse:function(e){const t={};let r,s=e.toString();for(s=s.replace(/\r\n?/gm,"\n");null!=(r=Cd.exec(s));){const e=r[1];let s=r[2]||"";s=s.trim();const a=s[0];s=s.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===a&&(s=s.replace(/\\n/g,"\n"),s=s.replace(/\\r/g,"\r")),t[e]=s}return t},populate:function(e,t,r={}){const s=Boolean(r&&r.debug),a=Boolean(r&&r.override);if("object"!=typeof t){const e=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw e.code="OBJECT_REQUIRED",e}for(const r of Object.keys(t))Object.prototype.hasOwnProperty.call(e,r)?(!0===a&&(e[r]=t[r]),s&&_debug(!0===a?`"${r}" is already defined and WAS overwritten`:`"${r}" is already defined and was NOT overwritten`)):e[r]=t[r]}};Tc.exports.configDotenv=xd.configDotenv,Tc.exports._configVault=xd._configVault,Tc.exports._parseVault=xd._parseVault;var kd=Tc.exports.config=xd.config;function T(e){let t;const r=Dd(e),s={duplex:"half",method:e.method,headers:e.headers};return e.node.req.body instanceof ArrayBuffer?new Request(r,{...s,body:e.node.req.body}):new Request(r,{...s,get body(){return t||(t=zd(e),t)}})}function U(){return function(){var t;return getContext("nitro-app",{asyncContext:!!(null==(t=globalThis.app.config.server.experimental)?void 0:t.asyncContext),AsyncLocalStorage:e})}().use().event}Tc.exports.decrypt=xd.decrypt,Tc.exports.parse=xd.parse,Tc.exports.populate=xd.populate,Tc.exports=xd;const Ld=Symbol("$HTTPEvent");function f(e){return function(...t){var r;let s=t[0];if(function(e){return"object"==typeof e&&(e instanceof H3Event||(null==e?void 0:e[Ld])instanceof H3Event||!0===(null==e?void 0:e.__is_event__))}(s))t[0]=s instanceof H3Event||s.__is_event__?s:s[Ld];else{if(!(null==(r=globalThis.app.config.server.experimental)?void 0:r.asyncContext))throw new Error("AsyncLocalStorage was not enabled. Use the `server.experimental.asyncContext: true` option in your app configuration to enable it. Or, pass the instance of HTTPEvent that you have as the first argument to the function.");if(s=U(),!s)throw new Error("No HTTPEvent found in AsyncLocalStorage. Make sure you are using the function within the server runtime.");t.unshift(s)}return e(...t)}}const Dd=f(getRequestURL),zd=f(getRequestWebStream),Md=f((function(e){return null!=e.web||(e.web={request:T(e),url:Dd(e)}),e.web.request}));kd();const Bd=(new class extends Yo{constructor(e={}){super(e),this.router=e.router??new as({routers:[new is,new us]})}}).basePath("/api");Bd.use("*"),Bd.post("/sentiment-analysis",(async e=>{try{const t=q.env.AZURE_LANGUAGE_KEY,r=q.env.AZURE_LANGUAGE_ENDPOINT;if(!t||!r)return e.json({success:!1,error:"Configurao em falta. Verifique as variveis de ambiente AZURE_LANGUAGE_KEY e AZURE_LANGUAGE_ENDPOINT."},500);const s=await e.req.json(),{text:a,language:c="pt"}=s;if(!a||0===a.trim().length)return e.json({success:!1,error:"Texto  obrigatrio para anlise"},400);const u=new ds.TextAnalyticsClient(r,new ds.AzureKeyCredential(t)),p=[{text:a,id:"0",language:c}],d=(await u.analyzeSentiment(p,{includeOpinionMining:!0}))[0];if(d.error)return e.json({success:!1,error:`Erro na anlise: ${d.error}`},500);const h={documentText:a,overallSentiment:d.sentiment,confidenceScores:d.confidenceScores,sentences:d.sentences.map((e=>{var t;return{text:e.text,sentiment:e.sentiment,confidenceScores:e.confidenceScores,opinions:(null==(t=e.opinions)?void 0:t.map((e=>({target:{text:e.target.text,sentiment:e.target.sentiment,confidenceScores:e.target.confidenceScores},assessments:e.assessments.map((e=>({text:e.text,sentiment:e.sentiment})))}))))||[]}}))};return e.json({success:!0,data:h})}catch(t){return console.error("Erro no processamento:",t),e.json({success:!1,error:"Erro interno do servidor. Verifique a configurao do Azure AI."},500)}})),Bd.get("/health",(e=>e.json({status:"OK",timestamp:(new Date).toISOString()})));const $d=Br((async e=>{const t=Md(e);return Bd.fetch(t)})),jd=[{route:"/api",handler:$d,lazy:!1,middleware:!0,method:void 0},{route:"/",handler:Br((e=>'<!doctype html>\n<html lang="pt">\n  <head>\n    <meta charset="UTF-8" />\n    <link rel="icon" type="image/svg+xml" href="/vite.svg" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Anlise de Sentimentos Azure AI</title>\n    <meta name="description" content="Teste a anlise de sentimentos do Azure AI com interface em portugus">\n    <script type="module" crossorigin src="/assets/index-BoNMcHDW.js"><\/script>\n    <link rel="stylesheet" crossorigin href="/assets/index-CSRMiVrP.css">\n    <script src="/manifest.js"><\/script>\n  </head>\n  <body>\n    <div id="root"></div>\n  </body>\n</html>')),lazy:!1,middleware:!0,method:void 0}];const qd=function(){const e=useRuntimeConfig(),t=new Hookable,captureError=(e,r={})=>{const s=t.callHookParallel("error",e,r).catch((e=>{console.error("Error while capturing another error",e)}));if(r.event&&isEvent(r.event)){const t=r.event.context.nitro?.errors;t&&t.push({error:e,context:r}),r.event.waitUntil&&r.event.waitUntil(s)}},r=createApp({debug:destr(!1),onError:(e,t)=>(captureError(e,{event:t,tags:["request"]}),async function(e,t){for(const r of En)try{if(await r(e,t,{defaultHandler:defaultHandler}),t.handled)return}catch(e){console.error(e)}}(e,t)),onRequest:async e=>{e.context.nitro=e.context.nitro||{errors:[]};const t=e.node.req?.__unenv__;t?._platform&&(e.context={_platform:t?._platform,...t._platform,...e.context}),!e.context.waitUntil&&t?.waitUntil&&(e.context.waitUntil=t.waitUntil),e.fetch=(t,r)=>fetchWithEvent(e,t,r,{fetch:localFetch}),e.$fetch=(t,r)=>fetchWithEvent(e,t,r,{fetch:c}),e.waitUntil=t=>{e.context.nitro._waitUntilPromises||(e.context.nitro._waitUntilPromises=[]),e.context.nitro._waitUntilPromises.push(t),e.context.waitUntil&&e.context.waitUntil(t)},e.captureError=(t,r)=>{captureError(t,{event:e,...r})},await qd.hooks.callHook("request",e).catch((t=>{captureError(t,{event:e,tags:["request"]})}))},onBeforeResponse:async(e,t)=>{await qd.hooks.callHook("beforeResponse",e,t).catch((t=>{captureError(t,{event:e,tags:["request","response"]})}))},onAfterResponse:async(e,t)=>{await qd.hooks.callHook("afterResponse",e,t).catch((t=>{captureError(t,{event:e,tags:["request","response"]})}))}}),s=function(e={}){const t=createRouter$1({}),r={};let s;const a={},addRoute=(e,s,c)=>{let u=r[e];if(u||(r[e]=u={path:e,handlers:{}},t.insert(e,u)),Array.isArray(c))for(const t of c)addRoute(e,s,t);else u.handlers[c]=toEventHandler(s,0,e);return a};a.use=a.add=(e,t,r)=>addRoute(e,t,r||"all");for(const e of $r)a[e]=(t,r)=>a.add(t,r,e);const matchHandler=(e="/",r="get")=>{const a=e.indexOf("?");-1!==a&&(e=e.slice(0,Math.max(0,a)));const c=t.lookup(e);if(!c||!c.handlers)return{error:createError({statusCode:404,name:"Not Found",statusMessage:`Cannot find any route matching ${e||"/"}.`})};let u=c.handlers[r]||c.handlers.all;if(!u){s||(s=toRouteMatcher(t));const a=s.matchAll(e).reverse();for(const e of a){if(e.handlers[r]){u=e.handlers[r],c.handlers[r]=c.handlers[r]||u;break}if(e.handlers.all){u=e.handlers.all,c.handlers.all=c.handlers.all||u;break}}}return u?{matched:c,handler:u}:{error:createError({statusCode:405,name:"Method Not Allowed",statusMessage:`Method ${r} is not allowed on this route.`})}},c=e.preemptive||e.preemtive;return a.handler=Br((e=>{const t=matchHandler(e.path,e.method.toLowerCase());if("error"in t){if(c)throw t.error;return}e.context.matchedRoute=t.matched;const r=t.matched.params||{};return e.context.params=r,Promise.resolve(t.handler(e)).then((e=>void 0===e&&c?null:e))})),a.handler.__resolve__=async e=>{e=function(e=""){return function(e=""){return e.startsWith("/")}(e)?e:"/"+e}(e);const t=matchHandler(e);if("error"in t)return;let r={route:t.matched.path,handler:t.handler};if(t.handler.__resolve__){const s=await t.handler.__resolve__(e);if(!s)return;r={...r,...s}}return r},a}({preemptive:!0}),a=toNodeListener(r),localFetch=(e,t)=>e.toString().startsWith("/")?async function(e,t,r={}){try{const s=await b(e,{url:t,...r});return new Response(s.body,{status:s.status,statusText:s.statusText,headers:S$1(s.headers)})}catch(e){return new Response(e.toString(),{status:Number.parseInt(e.statusCode||e.code)||500,statusText:e.statusText})}}(a,e,t).then((e=>function(e){return e.headers.has("set-cookie")?new Response(e.body,{status:e.status,statusText:e.statusText,headers:normalizeCookieHeaders(e.headers)}):e}(e))):globalThis.fetch(e,t),c=createFetch({fetch:localFetch,Headers:Jr,defaults:{baseURL:e.app.baseURL}});globalThis.$fetch=c,r.use(createRouteRulesHandler({localFetch:localFetch}));for(const t of jd){let a=t.lazy?lazyEventHandler(t.handler):t.handler;if(t.middleware||!t.route){const s=(e.app.baseURL+(t.route||"/")).replace(/\/+/g,"/");r.use(s,a)}else{const e=getRouteRulesForPath(t.route.replace(/:\w+|\*\*/g,"_"));e.cache&&(a=cachedEventHandler(a,{group:"nitro/routes",...e.cache})),s.use(t.route,a,t.method)}}return r.use(e.app.baseURL,s.handler),{hooks:t,h3App:r,router:s,localCall:e=>b(a,e),localFetch:localFetch,captureError:captureError}}();function useNitroApp(){return qd}!function(e){for(const t of Bo)try{t(e)}catch(t){throw e.captureError(t,{tags:["plugin"]}),t}}(qd);const Ud={"/index.html":{type:"text/html; charset=utf-8",etag:'"277-hrQDVx/7XD26ztIdzriVbbBjXoI"',mtime:"2025-06-16T15:42:07.727Z",size:631,path:"../public/index.html"},"/manifest.js":{type:"text/javascript; charset=utf-8",etag:'"14-/P7Kcp6uJ/X7OiBgMvjkwMW6ViY"',mtime:"2025-06-16T15:42:07.727Z",size:20,path:"../public/manifest.js"},"/.vite/manifest.json":{type:"application/json",etag:'"b9-gRV7rMMPOZwFJ15jEKmABaazZOE"',mtime:"2025-06-16T15:42:07.726Z",size:185,path:"../public/.vite/manifest.json"},"/assets/index-BoNMcHDW.js":{type:"text/javascript; charset=utf-8",etag:'"3132d-zwDLEdruF/mNpOren0W3Hm0yEV4"',mtime:"2025-06-16T15:42:07.727Z",size:201517,path:"../public/assets/index-BoNMcHDW.js"},"/assets/index-CSRMiVrP.css":{type:"text/css; charset=utf-8",etag:'"3912-adf238h2aYVd5k9og3/ic8CXln0"',mtime:"2025-06-16T15:42:07.727Z",size:14610,path:"../public/assets/index-CSRMiVrP.css"}},Hd={};const Fd=function(e){const t=useNitroApp();return{async fetch(r,s,a){const c={},u=new URL(r.url);if(e.fetch){const t=await e.fetch(r,s,a,u,c);if(t)return t}return async function(e,t,r,s=new URL(e.url),a=useNitroApp(),c){let u;(function(e){return wn.test(e.method)})(e)&&(u=Zt.from(await e.arrayBuffer()));return globalThis.__env__=t,a.localFetch(s.pathname+s.search,{context:{waitUntil:e=>r.waitUntil(e),_platform:{cf:e.cf,cloudflare:{request:e,env:t,context:r,url:s,...c}}},host:s.hostname,protocol:s.protocol,method:e.method,headers:e.headers,body:u})}(r,s,a,u,t,c)},scheduled(e,r,s){globalThis.__env__=r,s.waitUntil(t.hooks.callHook("cloudflare:scheduled",{controller:e,env:r,context:s}))},email(e,r,s){globalThis.__env__=r,s.waitUntil(t.hooks.callHook("cloudflare:email",{message:e,event:e,env:r,context:s}))},queue(e,r,s){globalThis.__env__=r,s.waitUntil(t.hooks.callHook("cloudflare:queue",{batch:e,event:e,env:r,context:s}))},tail(e,r,s){globalThis.__env__=r,s.waitUntil(t.hooks.callHook("cloudflare:tail",{traces:e,env:r,context:s}))},trace(e,r,s){globalThis.__env__=r,s.waitUntil(t.hooks.callHook("cloudflare:trace",{traces:e,env:r,context:s}))}}}({fetch(e,t,r,s){if(t.ASSETS&&function(e=""){if(Ud[e])return!0;for(const t in Hd)if(e.startsWith(t))return!0;return!1}(s.pathname))return t.ASSETS.fetch(e)}});export{Fd as default};
//# sourceMappingURL=index.mjs.map
